"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/spending-watch/route";
exports.ids = ["app/api/spending-watch/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fspending-watch%2Froute&page=%2Fapi%2Fspending-watch%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fspending-watch%2Froute.ts&appDir=%2FUsers%2Fjk%2FDownloads%2Fhallowallet%203-main%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjk%2FDownloads%2Fhallowallet%203-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fspending-watch%2Froute&page=%2Fapi%2Fspending-watch%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fspending-watch%2Froute.ts&appDir=%2FUsers%2Fjk%2FDownloads%2Fhallowallet%203-main%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjk%2FDownloads%2Fhallowallet%203-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_jk_Downloads_hallowallet_3_main_src_app_api_spending_watch_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/spending-watch/route.ts */ \"(rsc)/./src/app/api/spending-watch/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/spending-watch/route\",\n        pathname: \"/api/spending-watch\",\n        filename: \"route\",\n        bundlePath: \"app/api/spending-watch/route\"\n    },\n    resolvedPagePath: \"/Users/jk/Downloads/hallowallet 3-main/src/app/api/spending-watch/route.ts\",\n    nextConfigOutput,\n    userland: _Users_jk_Downloads_hallowallet_3_main_src_app_api_spending_watch_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/spending-watch/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzcGVuZGluZy13YXRjaCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGc3BlbmRpbmctd2F0Y2glMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZzcGVuZGluZy13YXRjaCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmprJTJGRG93bmxvYWRzJTJGaGFsbG93YWxsZXQlMjAzLW1haW4lMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGamslMkZEb3dubG9hZHMlMkZoYWxsb3dhbGxldCUyMDMtbWFpbiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDMEI7QUFDdkc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYWxsb3dhbGxldC8/N2Y3ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvamsvRG93bmxvYWRzL2hhbGxvd2FsbGV0IDMtbWFpbi9zcmMvYXBwL2FwaS9zcGVuZGluZy13YXRjaC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc3BlbmRpbmctd2F0Y2gvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zcGVuZGluZy13YXRjaFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvc3BlbmRpbmctd2F0Y2gvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvamsvRG93bmxvYWRzL2hhbGxvd2FsbGV0IDMtbWFpbi9zcmMvYXBwL2FwaS9zcGVuZGluZy13YXRjaC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvc3BlbmRpbmctd2F0Y2gvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fspending-watch%2Froute&page=%2Fapi%2Fspending-watch%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fspending-watch%2Froute.ts&appDir=%2FUsers%2Fjk%2FDownloads%2Fhallowallet%203-main%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjk%2FDownloads%2Fhallowallet%203-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/spending-watch/route.ts":
/*!*********************************************!*\
  !*** ./src/app/api/spending-watch/route.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/db */ \"(rsc)/./src/lib/db.ts\");\n\n\n\nasync function GET(req) {\n    const user = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.getCurrentUser)();\n    if (!user) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: \"Unauthorized\"\n    }, {\n        status: 401\n    });\n    const { searchParams } = new URL(req.url);\n    const month = searchParams.get(\"month\") || new Date().toISOString().slice(0, 7);\n    // Get watches and filter by month/period\n    const allWatches = _lib_db__WEBPACK_IMPORTED_MODULE_2__.db.listSpendingWatches(user.id);\n    const watches = allWatches.filter((watch)=>{\n        // For monthly watches, only show in the month they were created\n        if (watch.period === \"monthly\") {\n            return watch.month === month;\n        }\n        // For yearly watches, show in all months of that year\n        if (watch.period === \"yearly\") {\n            const watchYear = watch.month.slice(0, 4);\n            const filterYear = month.slice(0, 4);\n            return watchYear === filterYear;\n        }\n        // For weekly watches, show if the current month overlaps with the watch's week\n        if (watch.period === \"weekly\") {\n            const w = watch;\n            if (w.rangeStart && w.rangeEnd) {\n                const watchMonth = w.rangeStart.slice(0, 7);\n                return watchMonth === month;\n            }\n            return watch.month.slice(0, 7) === month;\n        }\n        // For custom watches, show if the current month overlaps with the custom range\n        if (watch.period === \"custom\") {\n            const w = watch;\n            if (w.rangeStart && w.rangeEnd) {\n                const startMonth = w.rangeStart.slice(0, 7);\n                const endMonth = w.rangeEnd.slice(0, 7);\n                return month >= startMonth && month <= endMonth;\n            }\n            return false;\n        }\n        return false;\n    });\n    // Fetch expenses to calculate current spending\n    const expenses = _lib_db__WEBPACK_IMPORTED_MODULE_2__.db.listExpenses(user.id, {});\n    // Enrich watches with spending data\n    const enrichedWatches = watches.map((watch)=>{\n        const now = new Date();\n        let startDate;\n        let endDate;\n        const w = watch;\n        if (watch.period === \"weekly\" && w.rangeStart && w.rangeEnd) {\n            // For weekly watches with explicit range\n            startDate = new Date(w.rangeStart + \"T00:00:00.000Z\");\n            endDate = new Date(w.rangeEnd + \"T23:59:59.999Z\");\n        } else if (watch.period === \"custom\" && w.rangeStart && w.rangeEnd) {\n            // For custom date range watches\n            startDate = new Date(w.rangeStart + \"T00:00:00.000Z\");\n            endDate = new Date(w.rangeEnd + \"T23:59:59.999Z\");\n        } else if (watch.period === \"yearly\") {\n            // For yearly watches, use the year from the watch's month (UTC)\n            const watchYear = parseInt(watch.month.slice(0, 4));\n            startDate = new Date(Date.UTC(watchYear, 0, 1, 0, 0, 0));\n            endDate = new Date(Date.UTC(watchYear, 11, 31, 23, 59, 59));\n        } else {\n            // For monthly watches, use the watch's specific month (UTC)\n            const [year, monthNum] = watch.month.split(\"-\").map(Number);\n            startDate = new Date(Date.UTC(year, monthNum - 1, 1, 0, 0, 0));\n            endDate = new Date(Date.UTC(year, monthNum, 0, 23, 59, 59));\n        }\n        // Filter expenses by period and category\n        const relevantExpenses = expenses.filter((e)=>{\n            const expenseDate = new Date(e.date + \"T00:00:00.000Z\");\n            const inDateRange = expenseDate >= startDate && expenseDate <= endDate;\n            const searchTerm = watch.category.toLowerCase();\n            const category = (e.category || \"\").toLowerCase();\n            const description = (e.description || \"\").toLowerCase();\n            const categoryMatch = category.includes(searchTerm) || description.includes(searchTerm) || searchTerm.includes(category) || searchTerm.includes(description);\n            console.log(`[Watch] Expense: ${e.description} ($${e.amount}) on ${e.date} | Category: ${e.category} | InDateRange: ${inDateRange} | Match: ${categoryMatch}`);\n            return inDateRange && categoryMatch;\n        });\n        const currentSpending = relevantExpenses.reduce((sum, e)=>sum + e.amount, 0);\n        const percentUsed = currentSpending / watch.threshold * 100;\n        const shouldAlert = currentSpending >= watch.threshold;\n        return {\n            ...watch,\n            currentSpending,\n            percentUsed,\n            shouldAlert\n        };\n    });\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(enrichedWatches);\n}\nasync function POST(req) {\n    const user = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.getCurrentUser)();\n    if (!user) {\n        console.log(\"[SpendingWatch] Unauthorized - no user\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Unauthorized\"\n        }, {\n            status: 401\n        });\n    }\n    const body = await req.json();\n    const { category, threshold, period, month, rangeStart, rangeEnd } = body;\n    console.log(\"[SpendingWatch] Creating watch:\", {\n        category,\n        threshold,\n        period,\n        month,\n        rangeStart,\n        rangeEnd,\n        userId: user.id\n    });\n    if (!category || !threshold || !period) {\n        console.log(\"[SpendingWatch] Missing required fields\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Missing required fields\"\n        }, {\n            status: 400\n        });\n    }\n    // Use provided month or current month\n    const watchMonth = month || new Date().toISOString().slice(0, 7);\n    const watch = _lib_db__WEBPACK_IMPORTED_MODULE_2__.db.createSpendingWatch({\n        userId: user.id,\n        category,\n        threshold: parseFloat(threshold),\n        period,\n        month: watchMonth,\n        rangeStart,\n        rangeEnd,\n        createdAt: new Date().toISOString()\n    });\n    console.log(\"[SpendingWatch] Watch created:\", watch);\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(watch);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9zcGVuZGluZy13YXRjaC9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF3RDtBQUNMO0FBQ2Q7QUFFOUIsZUFBZUcsSUFBSUMsR0FBZ0I7SUFDeEMsTUFBTUMsT0FBT0oseURBQWNBO0lBQzNCLElBQUksQ0FBQ0ksTUFBTSxPQUFPTCxxREFBWUEsQ0FBQ00sSUFBSSxDQUFDO1FBQUVDLE9BQU87SUFBZSxHQUFHO1FBQUVDLFFBQVE7SUFBSTtJQUU3RSxNQUFNLEVBQUVDLFlBQVksRUFBRSxHQUFHLElBQUlDLElBQUlOLElBQUlPLEdBQUc7SUFDeEMsTUFBTUMsUUFBUUgsYUFBYUksR0FBRyxDQUFDLFlBQVksSUFBSUMsT0FBT0MsV0FBVyxHQUFHQyxLQUFLLENBQUMsR0FBRztJQUU3RSx5Q0FBeUM7SUFDekMsTUFBTUMsYUFBYWYsdUNBQUVBLENBQUNnQixtQkFBbUIsQ0FBQ2IsS0FBS2MsRUFBRTtJQUNqRCxNQUFNQyxVQUFVSCxXQUFXSSxNQUFNLENBQUNDLENBQUFBO1FBQ2hDLGdFQUFnRTtRQUNoRSxJQUFJQSxNQUFNQyxNQUFNLEtBQUssV0FBVztZQUM5QixPQUFPRCxNQUFNVixLQUFLLEtBQUtBO1FBQ3pCO1FBQ0Esc0RBQXNEO1FBQ3RELElBQUlVLE1BQU1DLE1BQU0sS0FBSyxVQUFVO1lBQzdCLE1BQU1DLFlBQVlGLE1BQU1WLEtBQUssQ0FBQ0ksS0FBSyxDQUFDLEdBQUc7WUFDdkMsTUFBTVMsYUFBYWIsTUFBTUksS0FBSyxDQUFDLEdBQUc7WUFDbEMsT0FBT1EsY0FBY0M7UUFDdkI7UUFDQSwrRUFBK0U7UUFDL0UsSUFBSUgsTUFBTUMsTUFBTSxLQUFLLFVBQVU7WUFDN0IsTUFBTUcsSUFBSUo7WUFDVixJQUFJSSxFQUFFQyxVQUFVLElBQUlELEVBQUVFLFFBQVEsRUFBRTtnQkFDOUIsTUFBTUMsYUFBYUgsRUFBRUMsVUFBVSxDQUFDWCxLQUFLLENBQUMsR0FBRztnQkFDekMsT0FBT2EsZUFBZWpCO1lB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ekQscURBQVlBLENBQUNNLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQTBCLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQy9FO0lBRUEsc0NBQXNDO0lBQ3RDLE1BQU1xQixhQUFhakIsU0FBUyxJQUFJRSxPQUFPQyxXQUFXLEdBQUdDLEtBQUssQ0FBQyxHQUFHO0lBRTlELE1BQU1NLFFBQVEsd0NBQVk4QyxtQkFBbUIsQ0FBQztRQUM1Q0QsUUFBUTlELEtBQUtjLEVBQUU7UUFDZmdDO1FBQ0FZLFdBQVdNLFdBQVdOO1FBQ3RCeEM7UUFDQVgsT0FBT2lCO1FBQ1BGO1FBQ0FDO1FBQ0EwQyxXQUFXLElBQUl4RCxPQUFPQyxXQUFXO0lBQ25DO0lBRUF5QyxRQUFRQyxHQUFHLENBQUMsa0NBQWtDbkM7SUFDOUMsT0FBT3RCLHFEQUFZQSxDQUFDTSxJQUFJLENBQUNnQjtBQUMzQiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhbGxvd2FsbGV0Ly4vc3JjL2FwcC9hcGkvc3BlbmRpbmctd2F0Y2gvcm91dGUudHM/NGQ4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgeyBnZXRDdXJyZW50VXNlciB9IGZyb20gXCIuLi8uLi8uLi9saWIvYXV0aFwiO1xuaW1wb3J0IHsgZGIgfSBmcm9tIFwiLi4vLi4vLi4vbGliL2RiXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxOiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCB1c2VyID0gZ2V0Q3VycmVudFVzZXIoKTtcbiAgaWYgKCF1c2VyKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJVbmF1dGhvcml6ZWRcIiB9LCB7IHN0YXR1czogNDAxIH0pO1xuXG4gIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcS51cmwpO1xuICBjb25zdCBtb250aCA9IHNlYXJjaFBhcmFtcy5nZXQoXCJtb250aFwiKSB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgNyk7XG5cbiAgLy8gR2V0IHdhdGNoZXMgYW5kIGZpbHRlciBieSBtb250aC9wZXJpb2RcbiAgY29uc3QgYWxsV2F0Y2hlcyA9IGRiLmxpc3RTcGVuZGluZ1dhdGNoZXModXNlci5pZCk7XG4gIGNvbnN0IHdhdGNoZXMgPSBhbGxXYXRjaGVzLmZpbHRlcih3YXRjaCA9PiB7XG4gICAgLy8gRm9yIG1vbnRobHkgd2F0Y2hlcywgb25seSBzaG93IGluIHRoZSBtb250aCB0aGV5IHdlcmUgY3JlYXRlZFxuICAgIGlmICh3YXRjaC5wZXJpb2QgPT09IFwibW9udGhseVwiKSB7XG4gICAgICByZXR1cm4gd2F0Y2gubW9udGggPT09IG1vbnRoO1xuICAgIH1cbiAgICAvLyBGb3IgeWVhcmx5IHdhdGNoZXMsIHNob3cgaW4gYWxsIG1vbnRocyBvZiB0aGF0IHllYXJcbiAgICBpZiAod2F0Y2gucGVyaW9kID09PSBcInllYXJseVwiKSB7XG4gICAgICBjb25zdCB3YXRjaFllYXIgPSB3YXRjaC5tb250aC5zbGljZSgwLCA0KTtcbiAgICAgIGNvbnN0IGZpbHRlclllYXIgPSBtb250aC5zbGljZSgwLCA0KTtcbiAgICAgIHJldHVybiB3YXRjaFllYXIgPT09IGZpbHRlclllYXI7XG4gICAgfVxuICAgIC8vIEZvciB3ZWVrbHkgd2F0Y2hlcywgc2hvdyBpZiB0aGUgY3VycmVudCBtb250aCBvdmVybGFwcyB3aXRoIHRoZSB3YXRjaCdzIHdlZWtcbiAgICBpZiAod2F0Y2gucGVyaW9kID09PSBcIndlZWtseVwiKSB7XG4gICAgICBjb25zdCB3ID0gd2F0Y2ggYXMgYW55O1xuICAgICAgaWYgKHcucmFuZ2VTdGFydCAmJiB3LnJhbmdlRW5kKSB7XG4gICAgICAgIGNvbnN0IHdhdGNoTW9udGggPSB3LnJhbmdlU3RhcnQuc2xpY2UoMCwgNyk7XG4gICAgICAgIHJldHVybiB3YXRjaE1vbnRoID09PSBtb250aDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3YXRjaC5tb250aC5zbGljZSgwLCA3KSA9PT0gbW9udGg7XG4gICAgfVxuICAgIC8vIEZvciBjdXN0b20gd2F0Y2hlcywgc2hvdyBpZiB0aGUgY3VycmVudCBtb250aCBvdmVybGFwcyB3aXRoIHRoZSBjdXN0b20gcmFuZ2VcbiAgICBpZiAod2F0Y2gucGVyaW9kID09PSBcImN1c3RvbVwiKSB7XG4gICAgICBjb25zdCB3ID0gd2F0Y2ggYXMgYW55O1xuICAgICAgaWYgKHcucmFuZ2VTdGFydCAmJiB3LnJhbmdlRW5kKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0TW9udGggPSB3LnJhbmdlU3RhcnQuc2xpY2UoMCwgNyk7XG4gICAgICAgIGNvbnN0IGVuZE1vbnRoID0gdy5yYW5nZUVuZC5zbGljZSgwLCA3KTtcbiAgICAgICAgcmV0dXJuIG1vbnRoID49IHN0YXJ0TW9udGggJiYgbW9udGggPD0gZW5kTW9udGg7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfSk7XG4gIFxuICAvLyBGZXRjaCBleHBlbnNlcyB0byBjYWxjdWxhdGUgY3VycmVudCBzcGVuZGluZ1xuICBjb25zdCBleHBlbnNlcyA9IGRiLmxpc3RFeHBlbnNlcyh1c2VyLmlkLCB7fSk7XG4gIFxuICAvLyBFbnJpY2ggd2F0Y2hlcyB3aXRoIHNwZW5kaW5nIGRhdGFcbiAgY29uc3QgZW5yaWNoZWRXYXRjaGVzID0gd2F0Y2hlcy5tYXAod2F0Y2ggPT4ge1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgbGV0IHN0YXJ0RGF0ZTogRGF0ZTtcbiAgICBsZXQgZW5kRGF0ZTogRGF0ZTtcbiAgICBjb25zdCB3ID0gd2F0Y2ggYXMgYW55O1xuICAgIFxuICAgIGlmICh3YXRjaC5wZXJpb2QgPT09IFwid2Vla2x5XCIgJiYgdy5yYW5nZVN0YXJ0ICYmIHcucmFuZ2VFbmQpIHtcbiAgICAgIC8vIEZvciB3ZWVrbHkgd2F0Y2hlcyB3aXRoIGV4cGxpY2l0IHJhbmdlXG4gICAgICBzdGFydERhdGUgPSBuZXcgRGF0ZSh3LnJhbmdlU3RhcnQgKyBcIlQwMDowMDowMC4wMDBaXCIpO1xuICAgICAgZW5kRGF0ZSA9IG5ldyBEYXRlKHcucmFuZ2VFbmQgKyBcIlQyMzo1OTo1OS45OTlaXCIpO1xuICAgIH0gZWxzZSBpZiAod2F0Y2gucGVyaW9kID09PSBcImN1c3RvbVwiICYmIHcucmFuZ2VTdGFydCAmJiB3LnJhbmdlRW5kKSB7XG4gICAgICAvLyBGb3IgY3VzdG9tIGRhdGUgcmFuZ2Ugd2F0Y2hlc1xuICAgICAgc3RhcnREYXRlID0gbmV3IERhdGUody5yYW5nZVN0YXJ0ICsgXCJUMDA6MDA6MDAuMDAwWlwiKTtcbiAgICAgIGVuZERhdGUgPSBuZXcgRGF0ZSh3LnJhbmdlRW5kICsgXCJUMjM6NTk6NTkuOTk5WlwiKTtcbiAgICB9IGVsc2UgaWYgKHdhdGNoLnBlcmlvZCA9PT0gXCJ5ZWFybHlcIikge1xuICAgICAgLy8gRm9yIHllYXJseSB3YXRjaGVzLCB1c2UgdGhlIHllYXIgZnJvbSB0aGUgd2F0Y2gncyBtb250aCAoVVRDKVxuICAgICAgY29uc3Qgd2F0Y2hZZWFyID0gcGFyc2VJbnQod2F0Y2gubW9udGguc2xpY2UoMCwgNCkpO1xuICAgICAgc3RhcnREYXRlID0gbmV3IERhdGUoRGF0ZS5VVEMod2F0Y2hZZWFyLCAwLCAxLCAwLCAwLCAwKSk7XG4gICAgICBlbmREYXRlID0gbmV3IERhdGUoRGF0ZS5VVEMod2F0Y2hZZWFyLCAxMSwgMzEsIDIzLCA1OSwgNTkpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRm9yIG1vbnRobHkgd2F0Y2hlcywgdXNlIHRoZSB3YXRjaCdzIHNwZWNpZmljIG1vbnRoIChVVEMpXG4gICAgICBjb25zdCBbeWVhciwgbW9udGhOdW1dID0gd2F0Y2gubW9udGguc3BsaXQoJy0nKS5tYXAoTnVtYmVyKTtcbiAgICAgIHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKERhdGUuVVRDKHllYXIsIG1vbnRoTnVtIC0gMSwgMSwgMCwgMCwgMCkpO1xuICAgICAgZW5kRGF0ZSA9IG5ldyBEYXRlKERhdGUuVVRDKHllYXIsIG1vbnRoTnVtLCAwLCAyMywgNTksIDU5KSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEZpbHRlciBleHBlbnNlcyBieSBwZXJpb2QgYW5kIGNhdGVnb3J5XG4gICAgY29uc3QgcmVsZXZhbnRFeHBlbnNlcyA9IGV4cGVuc2VzLmZpbHRlcihlID0+IHtcbiAgICAgIGNvbnN0IGV4cGVuc2VEYXRlID0gbmV3IERhdGUoZS5kYXRlICsgXCJUMDA6MDA6MDAuMDAwWlwiKTtcbiAgICAgIGNvbnN0IGluRGF0ZVJhbmdlID0gZXhwZW5zZURhdGUgPj0gc3RhcnREYXRlICYmIGV4cGVuc2VEYXRlIDw9IGVuZERhdGU7XG4gICAgICBcbiAgICAgIGNvbnN0IHNlYXJjaFRlcm0gPSB3YXRjaC5jYXRlZ29yeS50b0xvd2VyQ2FzZSgpO1xuICAgICAgY29uc3QgY2F0ZWdvcnkgPSAoZS5jYXRlZ29yeSB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSAoZS5kZXNjcmlwdGlvbiB8fCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgXG4gICAgICBjb25zdCBjYXRlZ29yeU1hdGNoID0gY2F0ZWdvcnkuaW5jbHVkZXMoc2VhcmNoVGVybSkgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbi5pbmNsdWRlcyhzZWFyY2hUZXJtKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoVGVybS5pbmNsdWRlcyhjYXRlZ29yeSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaFRlcm0uaW5jbHVkZXMoZGVzY3JpcHRpb24pO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgW1dhdGNoXSBFeHBlbnNlOiAke2UuZGVzY3JpcHRpb259ICgkJHtlLmFtb3VudH0pIG9uICR7ZS5kYXRlfSB8IENhdGVnb3J5OiAke2UuY2F0ZWdvcnl9IHwgSW5EYXRlUmFuZ2U6ICR7aW5EYXRlUmFuZ2V9IHwgTWF0Y2g6ICR7Y2F0ZWdvcnlNYXRjaH1gKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIGluRGF0ZVJhbmdlICYmIGNhdGVnb3J5TWF0Y2g7XG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgY3VycmVudFNwZW5kaW5nID0gcmVsZXZhbnRFeHBlbnNlcy5yZWR1Y2UoKHN1bSwgZSkgPT4gc3VtICsgZS5hbW91bnQsIDApO1xuICAgIGNvbnN0IHBlcmNlbnRVc2VkID0gKGN1cnJlbnRTcGVuZGluZyAvIHdhdGNoLnRocmVzaG9sZCkgKiAxMDA7XG4gICAgY29uc3Qgc2hvdWxkQWxlcnQgPSBjdXJyZW50U3BlbmRpbmcgPj0gd2F0Y2gudGhyZXNob2xkO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICAuLi53YXRjaCxcbiAgICAgIGN1cnJlbnRTcGVuZGluZyxcbiAgICAgIHBlcmNlbnRVc2VkLFxuICAgICAgc2hvdWxkQWxlcnRcbiAgICB9O1xuICB9KTtcblxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oZW5yaWNoZWRXYXRjaGVzKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCB1c2VyID0gZ2V0Q3VycmVudFVzZXIoKTtcbiAgaWYgKCF1c2VyKSB7XG4gICAgY29uc29sZS5sb2coXCJbU3BlbmRpbmdXYXRjaF0gVW5hdXRob3JpemVkIC0gbm8gdXNlclwiKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJVbmF1dGhvcml6ZWRcIiB9LCB7IHN0YXR1czogNDAxIH0pO1xuICB9XG5cbiAgY29uc3QgYm9keSA9IGF3YWl0IHJlcS5qc29uKCk7XG4gIGNvbnN0IHsgY2F0ZWdvcnksIHRocmVzaG9sZCwgcGVyaW9kLCBtb250aCwgcmFuZ2VTdGFydCwgcmFuZ2VFbmQgfSA9IGJvZHk7XG5cbiAgY29uc29sZS5sb2coXCJbU3BlbmRpbmdXYXRjaF0gQ3JlYXRpbmcgd2F0Y2g6XCIsIHsgY2F0ZWdvcnksIHRocmVzaG9sZCwgcGVyaW9kLCBtb250aCwgcmFuZ2VTdGFydCwgcmFuZ2VFbmQsIHVzZXJJZDogdXNlci5pZCB9KTtcblxuICBpZiAoIWNhdGVnb3J5IHx8ICF0aHJlc2hvbGQgfHwgIXBlcmlvZCkge1xuICAgIGNvbnNvbGUubG9nKFwiW1NwZW5kaW5nV2F0Y2hdIE1pc3NpbmcgcmVxdWlyZWQgZmllbGRzXCIpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIk1pc3NpbmcgcmVxdWlyZWQgZmllbGRzXCIgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgfVxuXG4gIC8vIFVzZSBwcm92aWRlZCBtb250aCBvciBjdXJyZW50IG1vbnRoXG4gIGNvbnN0IHdhdGNoTW9udGggPSBtb250aCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgNyk7XG5cbiAgY29uc3Qgd2F0Y2ggPSAoZGIgYXMgYW55KS5jcmVhdGVTcGVuZGluZ1dhdGNoKHtcbiAgICB1c2VySWQ6IHVzZXIuaWQsXG4gICAgY2F0ZWdvcnksXG4gICAgdGhyZXNob2xkOiBwYXJzZUZsb2F0KHRocmVzaG9sZCksXG4gICAgcGVyaW9kLFxuICAgIG1vbnRoOiB3YXRjaE1vbnRoLFxuICAgIHJhbmdlU3RhcnQsXG4gICAgcmFuZ2VFbmQsXG4gICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgfSk7XG5cbiAgY29uc29sZS5sb2coXCJbU3BlbmRpbmdXYXRjaF0gV2F0Y2ggY3JlYXRlZDpcIiwgd2F0Y2gpO1xuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24od2F0Y2gpO1xufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldEN1cnJlbnRVc2VyIiwiZGIiLCJHRVQiLCJyZXEiLCJ1c2VyIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwibW9udGgiLCJnZXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzbGljZSIsImFsbFdhdGNoZXMiLCJsaXN0U3BlbmRpbmdXYXRjaGVzIiwiaWQiLCJ3YXRjaGVzIiwiZmlsdGVyIiwid2F0Y2giLCJwZXJpb2QiLCJ3YXRjaFllYXIiLCJmaWx0ZXJZZWFyIiwidyIsInJhbmdlU3RhcnQiLCJyYW5nZUVuZCIsIndhdGNoTW9udGgiLCJzdGFydE1vbnRoIiwiZW5kTW9udGgiLCJleHBlbnNlcyIsImxpc3RFeHBlbnNlcyIsImVucmljaGVkV2F0Y2hlcyIsIm1hcCIsIm5vdyIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJwYXJzZUludCIsIlVUQyIsInllYXIiLCJtb250aE51bSIsInNwbGl0IiwiTnVtYmVyIiwicmVsZXZhbnRFeHBlbnNlcyIsImUiLCJleHBlbnNlRGF0ZSIsImRhdGUiLCJpbkRhdGVSYW5nZSIsInNlYXJjaFRlcm0iLCJjYXRlZ29yeSIsInRvTG93ZXJDYXNlIiwiZGVzY3JpcHRpb24iLCJjYXRlZ29yeU1hdGNoIiwiaW5jbHVkZXMiLCJjb25zb2xlIiwibG9nIiwiYW1vdW50IiwiY3VycmVudFNwZW5kaW5nIiwicmVkdWNlIiwic3VtIiwicGVyY2VudFVzZWQiLCJ0aHJlc2hvbGQiLCJzaG91bGRBbGVydCIsIlBPU1QiLCJib2R5IiwidXNlcklkIiwiY3JlYXRlU3BlbmRpbmdXYXRjaCIsInBhcnNlRmxvYXQiLCJjcmVhdGVkQXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/spending-watch/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SESSION_COOKIE: () => (/* binding */ SESSION_COOKIE),\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   signUser: () => (/* binding */ signUser),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nconst JWT_SECRET = process.env.JWT_SECRET || \"dev-secret-change-me\";\nconst SESSION_COOKIE = \"hallowallet_token\";\nasync function hashPassword(pw) {\n    const salt = await bcryptjs__WEBPACK_IMPORTED_MODULE_3___default().genSalt(10);\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_3___default().hash(pw, salt);\n}\nasync function verifyPassword(pw, hash) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_3___default().compare(pw, hash);\n}\nfunction signUser(user) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign({\n        sub: user.id\n    }, JWT_SECRET, {\n        expiresIn: \"7d\"\n    });\n}\n// Read-only: used in server components/layouts/route handlers\nfunction getCurrentUser() {\n    const token = (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)().get(SESSION_COOKIE)?.value;\n    if (!token) return null;\n    try {\n        const payload = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET);\n        return _db__WEBPACK_IMPORTED_MODULE_2__.db.getUserById(payload.sub) || null;\n    } catch  {\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0I7QUFDUTtBQUNiO0FBRUk7QUFFOUIsTUFBTUksYUFBYUMsUUFBUUMsR0FBRyxDQUFDRixVQUFVLElBQUk7QUFDdEMsTUFBTUcsaUJBQWlCLG9CQUFvQjtBQUUzQyxlQUFlQyxhQUFhQyxFQUFVO0lBQzNDLE1BQU1DLE9BQU8sTUFBTVAsdURBQWMsQ0FBQztJQUNsQyxPQUFPQSxvREFBVyxDQUFDTSxJQUFJQztBQUN6QjtBQUVPLGVBQWVHLGVBQWVKLEVBQVUsRUFBRUcsSUFBWTtJQUMzRCxPQUFPVCx1REFBYyxDQUFDTSxJQUFJRztBQUM1QjtBQUVPLFNBQVNHLFNBQVNDLElBQVU7SUFDakMsT0FBT2hCLHdEQUFRLENBQUM7UUFBRWtCLEtBQUtGLEtBQUtHLEVBQUU7SUFBQyxHQUFHZixZQUFZO1FBQUVnQixXQUFXO0lBQUs7QUFDbEU7QUFFQSw4REFBOEQ7QUFDdkQsU0FBU0M7SUFDZCxNQUFNQyxRQUFRckIscURBQU9BLEdBQUdzQixHQUFHLENBQUNoQixpQkFBaUJpQjtJQUM3QyxJQUFJLENBQUNGLE9BQU8sT0FBTztJQUNuQixJQUFJO1FBQ0YsTUFBTUcsVUFBVXpCLDBEQUFVLENBQUNzQixPQUFPbEI7UUFDbEMsT0FBT0YsbUNBQUVBLENBQUN5QixXQUFXLENBQUNGLFFBQVFQLEdBQUcsS0FBSztJQUN4QyxFQUFFLE9BQU07UUFDTixPQUFPO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhbGxvd2FsbGV0Ly4vc3JjL2xpYi9hdXRoLnRzPzY2OTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSBcIm5leHQvaGVhZGVyc1wiO1xuaW1wb3J0IHsgZGIgfSBmcm9tIFwiLi9kYlwiO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRqc1wiO1xuXG5jb25zdCBKV1RfU0VDUkVUID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCBcImRldi1zZWNyZXQtY2hhbmdlLW1lXCI7XG5leHBvcnQgY29uc3QgU0VTU0lPTl9DT09LSUUgPSBcImhhbGxvd2FsbGV0X3Rva2VuXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoUGFzc3dvcmQocHc6IHN0cmluZykge1xuICBjb25zdCBzYWx0ID0gYXdhaXQgYmNyeXB0LmdlblNhbHQoMTApO1xuICByZXR1cm4gYmNyeXB0Lmhhc2gocHcsIHNhbHQpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5UGFzc3dvcmQocHc6IHN0cmluZywgaGFzaDogc3RyaW5nKSB7XG4gIHJldHVybiBiY3J5cHQuY29tcGFyZShwdywgaGFzaCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaWduVXNlcih1c2VyOiBVc2VyKSB7XG4gIHJldHVybiBqd3Quc2lnbih7IHN1YjogdXNlci5pZCB9LCBKV1RfU0VDUkVULCB7IGV4cGlyZXNJbjogXCI3ZFwiIH0pO1xufVxuXG4vLyBSZWFkLW9ubHk6IHVzZWQgaW4gc2VydmVyIGNvbXBvbmVudHMvbGF5b3V0cy9yb3V0ZSBoYW5kbGVyc1xuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRVc2VyKCk6IFVzZXIgfCBudWxsIHtcbiAgY29uc3QgdG9rZW4gPSBjb29raWVzKCkuZ2V0KFNFU1NJT05fQ09PS0lFKT8udmFsdWU7XG4gIGlmICghdG9rZW4pIHJldHVybiBudWxsO1xuICB0cnkge1xuICAgIGNvbnN0IHBheWxvYWQgPSBqd3QudmVyaWZ5KHRva2VuLCBKV1RfU0VDUkVUKSBhcyB7IHN1Yjogc3RyaW5nIH07XG4gICAgcmV0dXJuIGRiLmdldFVzZXJCeUlkKHBheWxvYWQuc3ViKSB8fCBudWxsO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImp3dCIsImNvb2tpZXMiLCJkYiIsImJjcnlwdCIsIkpXVF9TRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwiU0VTU0lPTl9DT09LSUUiLCJoYXNoUGFzc3dvcmQiLCJwdyIsInNhbHQiLCJnZW5TYWx0IiwiaGFzaCIsInZlcmlmeVBhc3N3b3JkIiwiY29tcGFyZSIsInNpZ25Vc2VyIiwidXNlciIsInNpZ24iLCJzdWIiLCJpZCIsImV4cGlyZXNJbiIsImdldEN1cnJlbnRVc2VyIiwidG9rZW4iLCJnZXQiLCJ2YWx1ZSIsInBheWxvYWQiLCJ2ZXJpZnkiLCJnZXRVc2VyQnlJZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst DB_FILE = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \".data\", \"db.json\");\n// Load data from file if it exists\nfunction loadData() {\n    try {\n        if (fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(DB_FILE)) {\n            const data = JSON.parse(fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(DB_FILE, \"utf-8\"));\n            console.log(\"[DB] Loaded from file:\", data.users.length, \"users\");\n            return data;\n        }\n    } catch (err) {\n        console.error(\"[DB] Error loading data:\", err);\n    }\n    return {\n        users: [],\n        expenses: [],\n        goals: [],\n        spendingWatches: []\n    };\n}\n// Save data to file\nfunction saveData() {\n    try {\n        const dir = path__WEBPACK_IMPORTED_MODULE_2___default().dirname(DB_FILE);\n        if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(dir)) {\n            fs__WEBPACK_IMPORTED_MODULE_1___default().mkdirSync(dir, {\n                recursive: true\n            });\n        }\n        fs__WEBPACK_IMPORTED_MODULE_1___default().writeFileSync(DB_FILE, JSON.stringify({\n            users,\n            expenses,\n            goals,\n            spendingWatches\n        }, null, 2));\n    } catch (err) {\n        console.error(\"[DB] Error saving data:\", err);\n    }\n}\nconst initialData = loadData();\nconst users = initialData.users;\nconst expenses = initialData.expenses;\nconst goals = initialData.goals;\nconst spendingWatches = initialData.spendingWatches || [];\nconst db = {\n    createUser (data) {\n        const user = {\n            id: (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)(),\n            ...data\n        };\n        users.push(user);\n        console.log(\"[DB] User created:\", user.email, \"Total users:\", users.length);\n        saveData();\n        return user;\n    },\n    findUserByEmail (email) {\n        const found = users.find((u)=>u.email === email) || null;\n        console.log(\"[DB] Finding user by email:\", email, \"Found:\", !!found, \"Total users:\", users.length);\n        return found;\n    },\n    getUserById (id) {\n        return users.find((u)=>u.id === id) || null;\n    },\n    updateUserPassword (userId, newHashedPassword) {\n        const user = users.find((u)=>u.id === userId);\n        if (!user) return false;\n        user.password = newHashedPassword;\n        console.log(\"[DB] Password updated for user:\", user.email);\n        saveData();\n        return true;\n    },\n    createExpense (data) {\n        const e = {\n            id: (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)(),\n            ...data\n        };\n        expenses.push(e);\n        saveData();\n        return e;\n    },\n    updateExpense (id, userId, patch) {\n        const idx = expenses.findIndex((e)=>e.id === id && e.userId === userId);\n        if (idx === -1) return null;\n        expenses[idx] = {\n            ...expenses[idx],\n            ...patch\n        };\n        saveData();\n        return expenses[idx];\n    },\n    deleteExpense (id, userId) {\n        const idx = expenses.findIndex((e)=>e.id === id && e.userId === userId);\n        if (idx === -1) return false;\n        expenses.splice(idx, 1);\n        saveData();\n        return true;\n    },\n    listExpenses (userId, filters) {\n        return expenses.filter((e)=>{\n            if (e.userId !== userId) return false;\n            if (filters?.month && !e.date.startsWith(filters.month)) return false;\n            if (filters?.category && filters.category !== \"All\" && e.category !== filters.category) return false;\n            return true;\n        });\n    },\n    createGoal (data) {\n        const g = {\n            id: (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)(),\n            ...data\n        };\n        goals.push(g);\n        saveData();\n        return g;\n    },\n    listGoals (userId, month) {\n        return goals.filter((g)=>{\n            if (g.userId !== userId) return false;\n            if (!month) return true;\n            // For yearly goals, show them in all months of the same year\n            if (g.period === \"yearly\") {\n                const goalYear = g.month.slice(0, 4);\n                const filterYear = month.slice(0, 4);\n                return goalYear === filterYear;\n            }\n            // For weekly goals, show them in the month they were created\n            if (g.period === \"weekly\") {\n                const goalMonth = g.month.slice(0, 7);\n                return goalMonth === month;\n            }\n            // For monthly goals, exact month match\n            return g.month === month;\n        });\n    },\n    deleteGoal (id, userId) {\n        const idx = goals.findIndex((g)=>g.id === id && g.userId === userId);\n        if (idx === -1) return false;\n        goals.splice(idx, 1);\n        saveData();\n        return true;\n    },\n    createSpendingWatch (data) {\n        const watch = {\n            id: (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)(),\n            ...data\n        };\n        spendingWatches.push(watch);\n        console.log(\"[DB] Spending watch created:\", watch, \"Total watches:\", spendingWatches.length);\n        saveData();\n        return watch;\n    },\n    listSpendingWatches (userId) {\n        return spendingWatches.filter((w)=>w.userId === userId);\n    },\n    deleteSpendingWatch (id, userId) {\n        const idx = spendingWatches.findIndex((w)=>w.id === id && w.userId === userId);\n        if (idx === -1) return false;\n        spendingWatches.splice(idx, 1);\n        saveData();\n        return true;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bEQ7SUFDQStCLHFCQUFvQnhDLEVBQVUsRUFBRVMsTUFBYztRQUM1QyxNQUFNTyxNQUFNNUIsZ0JBQWdCNkIsU0FBUyxDQUFDc0IsQ0FBQUEsSUFBS0EsRUFBRXZDLEVBQUUsS0FBS0EsTUFBTXVDLEVBQUU5QixNQUFNLEtBQUtBO1FBQ3ZFLElBQUlPLFFBQVEsQ0FBQyxHQUFHLE9BQU87UUFDdkI1QixnQkFBZ0IrQixNQUFNLENBQUNILEtBQUs7UUFDNUIzQjtRQUNBLE9BQU87SUFDVDtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYWxsb3dhbGxldC8uL3NyYy9saWIvZGIudHM/OWU0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFeHBlbnNlLCBHb2FsLCBVc2VyIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IHJhbmRvbVVVSUQgfSBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuXG5jb25zdCBEQl9GSUxFID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksIFwiLmRhdGFcIiwgXCJkYi5qc29uXCIpO1xuXG4vLyBMb2FkIGRhdGEgZnJvbSBmaWxlIGlmIGl0IGV4aXN0c1xuZnVuY3Rpb24gbG9hZERhdGEoKSB7XG4gIHRyeSB7XG4gICAgaWYgKGZzLmV4aXN0c1N5bmMoREJfRklMRSkpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhEQl9GSUxFLCBcInV0Zi04XCIpKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiW0RCXSBMb2FkZWQgZnJvbSBmaWxlOlwiLCBkYXRhLnVzZXJzLmxlbmd0aCwgXCJ1c2Vyc1wiKTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIltEQl0gRXJyb3IgbG9hZGluZyBkYXRhOlwiLCBlcnIpO1xuICB9XG4gIHJldHVybiB7IHVzZXJzOiBbXSwgZXhwZW5zZXM6IFtdLCBnb2FsczogW10sIHNwZW5kaW5nV2F0Y2hlczogW10gfTtcbn1cblxuLy8gU2F2ZSBkYXRhIHRvIGZpbGVcbmZ1bmN0aW9uIHNhdmVEYXRhKCkge1xuICB0cnkge1xuICAgIGNvbnN0IGRpciA9IHBhdGguZGlybmFtZShEQl9GSUxFKTtcbiAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZGlyKSkge1xuICAgICAgZnMubWtkaXJTeW5jKGRpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgfVxuICAgIGZzLndyaXRlRmlsZVN5bmMoREJfRklMRSwgSlNPTi5zdHJpbmdpZnkoeyB1c2VycywgZXhwZW5zZXMsIGdvYWxzLCBzcGVuZGluZ1dhdGNoZXMgfSwgbnVsbCwgMikpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW0RCXSBFcnJvciBzYXZpbmcgZGF0YTpcIiwgZXJyKTtcbiAgfVxufVxuXG50eXBlIFNwZW5kaW5nV2F0Y2ggPSB7XG4gIGlkOiBzdHJpbmc7XG4gIHVzZXJJZDogc3RyaW5nO1xuICBjYXRlZ29yeTogc3RyaW5nO1xuICB0aHJlc2hvbGQ6IG51bWJlcjtcbiAgcGVyaW9kOiBcIndlZWtseVwiIHwgXCJtb250aGx5XCIgfCBcInllYXJseVwiIHwgXCJjdXN0b21cIjtcbiAgbW9udGg6IHN0cmluZztcbiAgcmFuZ2VTdGFydD86IHN0cmluZztcbiAgcmFuZ2VFbmQ/OiBzdHJpbmc7XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xufTtcblxuY29uc3QgaW5pdGlhbERhdGEgPSBsb2FkRGF0YSgpO1xuY29uc3QgdXNlcnM6IFVzZXJbXSA9IGluaXRpYWxEYXRhLnVzZXJzO1xuY29uc3QgZXhwZW5zZXM6IEV4cGVuc2VbXSA9IGluaXRpYWxEYXRhLmV4cGVuc2VzO1xuY29uc3QgZ29hbHM6IEdvYWxbXSA9IGluaXRpYWxEYXRhLmdvYWxzO1xuY29uc3Qgc3BlbmRpbmdXYXRjaGVzOiBTcGVuZGluZ1dhdGNoW10gPSBpbml0aWFsRGF0YS5zcGVuZGluZ1dhdGNoZXMgfHwgW107XG5cbmV4cG9ydCBjb25zdCBkYiA9IHtcbiAgY3JlYXRlVXNlcihkYXRhOiBPbWl0PFVzZXIsIFwiaWRcIj4pOiBVc2VyIHtcbiAgICBjb25zdCB1c2VyOiBVc2VyID0geyBpZDogcmFuZG9tVVVJRCgpLCAuLi5kYXRhIH07XG4gICAgdXNlcnMucHVzaCh1c2VyKTtcbiAgICBjb25zb2xlLmxvZyhcIltEQl0gVXNlciBjcmVhdGVkOlwiLCB1c2VyLmVtYWlsLCBcIlRvdGFsIHVzZXJzOlwiLCB1c2Vycy5sZW5ndGgpO1xuICAgIHNhdmVEYXRhKCk7XG4gICAgcmV0dXJuIHVzZXI7XG4gIH0sXG4gIGZpbmRVc2VyQnlFbWFpbChlbWFpbDogc3RyaW5nKSB7XG4gICAgY29uc3QgZm91bmQgPSB1c2Vycy5maW5kKHUgPT4gdS5lbWFpbCA9PT0gZW1haWwpIHx8IG51bGw7XG4gICAgY29uc29sZS5sb2coXCJbREJdIEZpbmRpbmcgdXNlciBieSBlbWFpbDpcIiwgZW1haWwsIFwiRm91bmQ6XCIsICEhZm91bmQsIFwiVG90YWwgdXNlcnM6XCIsIHVzZXJzLmxlbmd0aCk7XG4gICAgcmV0dXJuIGZvdW5kO1xuICB9LFxuICBnZXRVc2VyQnlJZChpZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHVzZXJzLmZpbmQodSA9PiB1LmlkID09PSBpZCkgfHwgbnVsbDtcbiAgfSxcbiAgdXBkYXRlVXNlclBhc3N3b3JkKHVzZXJJZDogc3RyaW5nLCBuZXdIYXNoZWRQYXNzd29yZDogc3RyaW5nKSB7XG4gICAgY29uc3QgdXNlciA9IHVzZXJzLmZpbmQodSA9PiB1LmlkID09PSB1c2VySWQpO1xuICAgIGlmICghdXNlcikgcmV0dXJuIGZhbHNlO1xuICAgIHVzZXIucGFzc3dvcmQgPSBuZXdIYXNoZWRQYXNzd29yZDtcbiAgICBjb25zb2xlLmxvZyhcIltEQl0gUGFzc3dvcmQgdXBkYXRlZCBmb3IgdXNlcjpcIiwgdXNlci5lbWFpbCk7XG4gICAgc2F2ZURhdGEoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcbiAgY3JlYXRlRXhwZW5zZShkYXRhOiBPbWl0PEV4cGVuc2UsIFwiaWRcIj4pOiBFeHBlbnNlIHtcbiAgICBjb25zdCBlOiBFeHBlbnNlID0geyBpZDogcmFuZG9tVVVJRCgpLCAuLi5kYXRhIH07XG4gICAgZXhwZW5zZXMucHVzaChlKTtcbiAgICBzYXZlRGF0YSgpO1xuICAgIHJldHVybiBlO1xuICB9LFxuICB1cGRhdGVFeHBlbnNlKGlkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nLCBwYXRjaDogUGFydGlhbDxFeHBlbnNlPikge1xuICAgIGNvbnN0IGlkeCA9IGV4cGVuc2VzLmZpbmRJbmRleChlID0+IGUuaWQgPT09IGlkICYmIGUudXNlcklkID09PSB1c2VySWQpO1xuICAgIGlmIChpZHggPT09IC0xKSByZXR1cm4gbnVsbDtcbiAgICBleHBlbnNlc1tpZHhdID0geyAuLi5leHBlbnNlc1tpZHhdLCAuLi5wYXRjaCB9O1xuICAgIHNhdmVEYXRhKCk7XG4gICAgcmV0dXJuIGV4cGVuc2VzW2lkeF07XG4gIH0sXG4gIGRlbGV0ZUV4cGVuc2UoaWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpIHtcbiAgICBjb25zdCBpZHggPSBleHBlbnNlcy5maW5kSW5kZXgoZSA9PiBlLmlkID09PSBpZCAmJiBlLnVzZXJJZCA9PT0gdXNlcklkKTtcbiAgICBpZiAoaWR4ID09PSAtMSkgcmV0dXJuIGZhbHNlO1xuICAgIGV4cGVuc2VzLnNwbGljZShpZHgsIDEpO1xuICAgIHNhdmVEYXRhKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG4gIGxpc3RFeHBlbnNlcyh1c2VySWQ6IHN0cmluZywgZmlsdGVycz86IHsgbW9udGg/OiBzdHJpbmc7IGNhdGVnb3J5Pzogc3RyaW5nIH0pIHtcbiAgICByZXR1cm4gZXhwZW5zZXMuZmlsdGVyKGUgPT4ge1xuICAgICAgaWYgKGUudXNlcklkICE9PSB1c2VySWQpIHJldHVybiBmYWxzZTtcbiAgICAgIGlmIChmaWx0ZXJzPy5tb250aCAmJiAhZS5kYXRlLnN0YXJ0c1dpdGgoZmlsdGVycy5tb250aCkpIHJldHVybiBmYWxzZTtcbiAgICAgIGlmIChmaWx0ZXJzPy5jYXRlZ29yeSAmJiBmaWx0ZXJzLmNhdGVnb3J5ICE9PSBcIkFsbFwiICYmIGUuY2F0ZWdvcnkgIT09IGZpbHRlcnMuY2F0ZWdvcnkpIHJldHVybiBmYWxzZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICB9LFxuICBjcmVhdGVHb2FsKGRhdGE6IE9taXQ8R29hbCwgXCJpZFwiPik6IEdvYWwge1xuICAgIGNvbnN0IGc6IEdvYWwgPSB7IGlkOiByYW5kb21VVUlEKCksIC4uLmRhdGEgfTtcbiAgICBnb2Fscy5wdXNoKGcpO1xuICAgIHNhdmVEYXRhKCk7XG4gICAgcmV0dXJuIGc7XG4gIH0sXG4gIGxpc3RHb2Fscyh1c2VySWQ6IHN0cmluZywgbW9udGg/OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gZ29hbHMuZmlsdGVyKGcgPT4ge1xuICAgICAgaWYgKGcudXNlcklkICE9PSB1c2VySWQpIHJldHVybiBmYWxzZTtcbiAgICAgIGlmICghbW9udGgpIHJldHVybiB0cnVlO1xuICAgICAgXG4gICAgICAvLyBGb3IgeWVhcmx5IGdvYWxzLCBzaG93IHRoZW0gaW4gYWxsIG1vbnRocyBvZiB0aGUgc2FtZSB5ZWFyXG4gICAgICBpZiAoZy5wZXJpb2QgPT09IFwieWVhcmx5XCIpIHtcbiAgICAgICAgY29uc3QgZ29hbFllYXIgPSBnLm1vbnRoLnNsaWNlKDAsIDQpO1xuICAgICAgICBjb25zdCBmaWx0ZXJZZWFyID0gbW9udGguc2xpY2UoMCwgNCk7XG4gICAgICAgIHJldHVybiBnb2FsWWVhciA9PT0gZmlsdGVyWWVhcjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRm9yIHdlZWtseSBnb2Fscywgc2hvdyB0aGVtIGluIHRoZSBtb250aCB0aGV5IHdlcmUgY3JlYXRlZFxuICAgICAgaWYgKGcucGVyaW9kID09PSBcIndlZWtseVwiKSB7XG4gICAgICAgIGNvbnN0IGdvYWxNb250aCA9IGcubW9udGguc2xpY2UoMCwgNyk7XG4gICAgICAgIHJldHVybiBnb2FsTW9udGggPT09IG1vbnRoO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBGb3IgbW9udGhseSBnb2FscywgZXhhY3QgbW9udGggbWF0Y2hcbiAgICAgIHJldHVybiBnLm1vbnRoID09PSBtb250aDtcbiAgICB9KTtcbiAgfSxcbiAgZGVsZXRlR29hbChpZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZykge1xuICAgIGNvbnN0IGlkeCA9IGdvYWxzLmZpbmRJbmRleChnID0+IGcuaWQgPT09IGlkICYmIGcudXNlcklkID09PSB1c2VySWQpO1xuICAgIGlmIChpZHggPT09IC0xKSByZXR1cm4gZmFsc2U7XG4gICAgZ29hbHMuc3BsaWNlKGlkeCwgMSk7XG4gICAgc2F2ZURhdGEoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcbiAgY3JlYXRlU3BlbmRpbmdXYXRjaChkYXRhOiBPbWl0PFNwZW5kaW5nV2F0Y2gsIFwiaWRcIj4pOiBTcGVuZGluZ1dhdGNoIHtcbiAgICBjb25zdCB3YXRjaDogU3BlbmRpbmdXYXRjaCA9IHsgaWQ6IHJhbmRvbVVVSUQoKSwgLi4uZGF0YSB9O1xuICAgIHNwZW5kaW5nV2F0Y2hlcy5wdXNoKHdhdGNoKTtcbiAgICBjb25zb2xlLmxvZyhcIltEQl0gU3BlbmRpbmcgd2F0Y2ggY3JlYXRlZDpcIiwgd2F0Y2gsIFwiVG90YWwgd2F0Y2hlczpcIiwgc3BlbmRpbmdXYXRjaGVzLmxlbmd0aCk7XG4gICAgc2F2ZURhdGEoKTtcbiAgICByZXR1cm4gd2F0Y2g7XG4gIH0sXG4gIGxpc3RTcGVuZGluZ1dhdGNoZXModXNlcklkOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gc3BlbmRpbmdXYXRjaGVzLmZpbHRlcih3ID0+IHcudXNlcklkID09PSB1c2VySWQpO1xuICB9LFxuICBkZWxldGVTcGVuZGluZ1dhdGNoKGlkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKSB7XG4gICAgY29uc3QgaWR4ID0gc3BlbmRpbmdXYXRjaGVzLmZpbmRJbmRleCh3ID0+IHcuaWQgPT09IGlkICYmIHcudXNlcklkID09PSB1c2VySWQpO1xuICAgIGlmIChpZHggPT09IC0xKSByZXR1cm4gZmFsc2U7XG4gICAgc3BlbmRpbmdXYXRjaGVzLnNwbGljZShpZHgsIDEpO1xuICAgIHNhdmVEYXRhKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn07XG4iXSwibmFtZXMiOlsicmFuZG9tVVVJRCIsImZzIiwicGF0aCIsIkRCX0ZJTEUiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsImxvYWREYXRhIiwiZXhpc3RzU3luYyIsImRhdGEiLCJKU09OIiwicGFyc2UiLCJyZWFkRmlsZVN5bmMiLCJjb25zb2xlIiwibG9nIiwidXNlcnMiLCJsZW5ndGgiLCJlcnIiLCJlcnJvciIsImV4cGVuc2VzIiwiZ29hbHMiLCJzcGVuZGluZ1dhdGNoZXMiLCJzYXZlRGF0YSIsImRpciIsImRpcm5hbWUiLCJta2RpclN5bmMiLCJyZWN1cnNpdmUiLCJ3cml0ZUZpbGVTeW5jIiwic3RyaW5naWZ5IiwiaW5pdGlhbERhdGEiLCJkYiIsImNyZWF0ZVVzZXIiLCJ1c2VyIiwiaWQiLCJwdXNoIiwiZW1haWwiLCJmaW5kVXNlckJ5RW1haWwiLCJmb3VuZCIsImZpbmQiLCJ1IiwiZ2V0VXNlckJ5SWQiLCJ1cGRhdGVVc2VyUGFzc3dvcmQiLCJ1c2VySWQiLCJuZXdIYXNoZWRQYXNzd29yZCIsInBhc3N3b3JkIiwiY3JlYXRlRXhwZW5zZSIsImUiLCJ1cGRhdGVFeHBlbnNlIiwicGF0Y2giLCJpZHgiLCJmaW5kSW5kZXgiLCJkZWxldGVFeHBlbnNlIiwic3BsaWNlIiwibGlzdEV4cGVuc2VzIiwiZmlsdGVycyIsImZpbHRlciIsIm1vbnRoIiwiZGF0ZSIsInN0YXJ0c1dpdGgiLCJjYXRlZ29yeSIsImNyZWF0ZUdvYWwiLCJnIiwibGlzdEdvYWxzIiwicGVyaW9kIiwiZ29hbFllYXIiLCJzbGljZSIsImZpbHRlclllYXIiLCJnb2FsTW9udGgiLCJkZWxldGVHb2FsIiwiY3JlYXRlU3BlbmRpbmdXYXRjaCIsIndhdGNoIiwibGlzdFNwZW5kaW5nV2F0Y2hlcyIsInciLCJkZWxldGVTcGVuZGluZ1dhdGNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/semver","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time","vendor-chunks/bcryptjs"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fspending-watch%2Froute&page=%2Fapi%2Fspending-watch%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fspending-watch%2Froute.ts&appDir=%2FUsers%2Fjk%2FDownloads%2Fhallowallet%203-main%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjk%2FDownloads%2Fhallowallet%203-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();