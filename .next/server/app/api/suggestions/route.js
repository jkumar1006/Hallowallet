"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/suggestions/route";
exports.ids = ["app/api/suggestions/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsuggestions%2Froute&page=%2Fapi%2Fsuggestions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsuggestions%2Froute.ts&appDir=%2FUsers%2Fjk%2FDownloads%2Fhallowallet%203-main%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjk%2FDownloads%2Fhallowallet%203-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsuggestions%2Froute&page=%2Fapi%2Fsuggestions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsuggestions%2Froute.ts&appDir=%2FUsers%2Fjk%2FDownloads%2Fhallowallet%203-main%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjk%2FDownloads%2Fhallowallet%203-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_jk_Downloads_hallowallet_3_main_src_app_api_suggestions_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/suggestions/route.ts */ \"(rsc)/./src/app/api/suggestions/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/suggestions/route\",\n        pathname: \"/api/suggestions\",\n        filename: \"route\",\n        bundlePath: \"app/api/suggestions/route\"\n    },\n    resolvedPagePath: \"/Users/jk/Downloads/hallowallet 3-main/src/app/api/suggestions/route.ts\",\n    nextConfigOutput,\n    userland: _Users_jk_Downloads_hallowallet_3_main_src_app_api_suggestions_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/suggestions/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzdWdnZXN0aW9ucyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGc3VnZ2VzdGlvbnMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZzdWdnZXN0aW9ucyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmprJTJGRG93bmxvYWRzJTJGaGFsbG93YWxsZXQlMjAzLW1haW4lMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGamslMkZEb3dubG9hZHMlMkZoYWxsb3dhbGxldCUyMDMtbWFpbiZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDdUI7QUFDcEc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYWxsb3dhbGxldC8/NmEyZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvamsvRG93bmxvYWRzL2hhbGxvd2FsbGV0IDMtbWFpbi9zcmMvYXBwL2FwaS9zdWdnZXN0aW9ucy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc3VnZ2VzdGlvbnMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zdWdnZXN0aW9uc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvc3VnZ2VzdGlvbnMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvamsvRG93bmxvYWRzL2hhbGxvd2FsbGV0IDMtbWFpbi9zcmMvYXBwL2FwaS9zdWdnZXN0aW9ucy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvc3VnZ2VzdGlvbnMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsuggestions%2Froute&page=%2Fapi%2Fsuggestions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsuggestions%2Froute.ts&appDir=%2FUsers%2Fjk%2FDownloads%2Fhallowallet%203-main%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjk%2FDownloads%2Fhallowallet%203-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/suggestions/route.ts":
/*!******************************************!*\
  !*** ./src/app/api/suggestions/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/db */ \"(rsc)/./src/lib/db.ts\");\n// src/app/api/assistant/route.ts\n\n\n\n/* ========================= UTC & TZ DATE UTILS ========================= */ const MS_DAY = 86400000;\nconst toISO = (d)=>new Date(Date.UTC(d.getUTCFullYear(), d.getUTCMonth(), d.getUTCDate())).toISOString().slice(0, 10); // YYYY-MM-DD\n// Safely produce \"today\" in a specific IANA tz (fallback UTC)\nfunction todayInTZ(tz) {\n    try {\n        if (!tz) return toISO(new Date());\n        const now = new Date();\n        const fmt = new Intl.DateTimeFormat(\"en-CA\", {\n            timeZone: tz,\n            year: \"numeric\",\n            month: \"2-digit\",\n            day: \"2-digit\"\n        });\n        const parts = fmt.formatToParts(now);\n        const y = parts.find((p)=>p.type === \"year\")?.value ?? String(now.getUTCFullYear());\n        const m = parts.find((p)=>p.type === \"month\")?.value ?? String(now.getUTCMonth() + 1).padStart(2, \"0\");\n        const d = parts.find((p)=>p.type === \"day\")?.value ?? String(now.getUTCDate()).padStart(2, \"0\");\n        return `${y}-${m}-${d}`;\n    } catch  {\n        return toISO(new Date());\n    }\n}\nconst startOfMonthUTC = (y, m0)=>toISO(new Date(Date.UTC(y, m0, 1)));\nconst endOfMonthUTC = (y, m0)=>toISO(new Date(Date.UTC(y, m0 + 1, 0)));\nconst startOfWeekMonUTC = (iso)=>{\n    const d = new Date(iso + \"T00:00:00.000Z\");\n    const day = d.getUTCDay(); // 0..6\n    const diff = (day + 6) % 7; // Mon=0\n    d.setUTCDate(d.getUTCDate() - diff);\n    return toISO(d);\n};\nconst endOfWeekMonUTC = (iso)=>{\n    const s = new Date(startOfWeekMonUTC(iso) + \"T00:00:00.000Z\");\n    s.setUTCDate(s.getUTCDate() + 6);\n    return toISO(s);\n};\nconst addDaysISO = (iso, delta)=>{\n    const d = new Date(iso + \"T00:00:00.000Z\");\n    d.setUTCDate(d.getUTCDate() + delta);\n    return toISO(d);\n};\nconst addMonthsISO = (iso, delta)=>{\n    const d = new Date(iso + \"T00:00:00.000Z\");\n    d.setUTCMonth(d.getUTCMonth() + delta);\n    return toISO(d);\n};\nconst MONTHS = [\n    // English full names\n    \"january\",\n    \"february\",\n    \"march\",\n    \"april\",\n    \"may\",\n    \"june\",\n    \"july\",\n    \"august\",\n    \"september\",\n    \"october\",\n    \"november\",\n    \"december\",\n    // Spanish\n    \"enero\",\n    \"febrero\",\n    \"marzo\",\n    \"abril\",\n    \"mayo\",\n    \"junio\",\n    \"julio\",\n    \"agosto\",\n    \"septiembre\",\n    \"setiembre\",\n    \"octubre\",\n    \"noviembre\",\n    \"diciembre\"\n];\nconst MONTH_ABBREV = {\n    // English abbreviations\n    \"jan\": 0,\n    \"feb\": 1,\n    \"mar\": 2,\n    \"apr\": 3,\n    \"may\": 4,\n    \"jun\": 5,\n    \"jul\": 6,\n    \"aug\": 7,\n    \"sep\": 8,\n    \"oct\": 9,\n    \"nov\": 10,\n    \"dec\": 11,\n    // Spanish abbreviations (only unique ones)\n    \"ene\": 0,\n    \"abr\": 3,\n    \"ago\": 7,\n    \"dic\": 11,\n    // \"sept\" is also common\n    \"sept\": 8\n};\nconst monthNameToIndex = (m)=>{\n    const lower = m.toLowerCase();\n    // Try abbreviation first\n    if (MONTH_ABBREV[lower] !== undefined) return MONTH_ABBREV[lower];\n    // Try full name\n    const i = MONTHS.indexOf(lower);\n    return i === -1 ? null : i % 12; // normalize EN/ES to 0..11\n};\n// “in May 2025”, “en mayo 2025”\nfunction parseExplicitMonthRange(q) {\n    // Try with year first: \"May 2025\", \"in november 2025\"\n    let m = q.match(/\\b(?:in\\s+|en\\s+|on\\s+|for\\s+)?([a-záéíóúüñ]+)\\s+(\\d{4})\\b/i);\n    if (m) {\n        const mi = monthNameToIndex(m[1]);\n        const y = parseInt(m[2], 10);\n        if (mi != null && y) {\n            console.log(`[Month Parse] Matched \"${m[0]}\" -> ${y}-${String(mi + 1).padStart(2, \"0\")}`);\n            return {\n                start: startOfMonthUTC(y, mi),\n                end: endOfMonthUTC(y, mi)\n            };\n        }\n    }\n    // Try month only - more flexible matching\n    // Match any month name in the query, regardless of position\n    const words = q.toLowerCase().split(/\\s+/);\n    for (const word of words){\n        const mi = monthNameToIndex(word);\n        if (mi != null) {\n            // Make sure it's not followed by a day number\n            const wordIndex = q.toLowerCase().indexOf(word);\n            const afterWord = q.slice(wordIndex + word.length).trim();\n            if (!/^\\d{1,2}\\b/.test(afterWord)) {\n                const y = new Date().getFullYear();\n                console.log(`[Month Parse] Found month \"${word}\" -> ${y}-${String(mi + 1).padStart(2, \"0\")}`);\n                return {\n                    start: startOfMonthUTC(y, mi),\n                    end: endOfMonthUTC(y, mi)\n                };\n            }\n        }\n    }\n    console.log(`[Month Parse] No month found in \"${q}\"`);\n    return null;\n}\nfunction parseNamed(q) {\n    const s = q.toLowerCase();\n    if (/\\bthis\\s+week\\b|\\best[ea]\\s+semana\\b/.test(s)) return \"this-week\";\n    if (/\\blast\\s+week\\b|\\bla\\s+semana\\s+pasada\\b/.test(s)) return \"last-week\";\n    if (/\\bthis\\s+month\\b|\\best[ea]\\s+mes\\b/.test(s)) return \"this-month\";\n    if (/\\blast\\s+month\\b|\\bel\\s+mes\\s+pasado\\b/.test(s)) return \"last-month\";\n    if (/\\bthis\\s+year\\b|\\best[ea]\\s+a(ñ|n)o\\b/.test(s)) return \"this-year\";\n    if (/\\blast\\s+year\\b|\\bel\\s+a(ñ|n)o\\s+pasado\\b/.test(s)) return \"last-year\";\n    return null;\n}\nfunction parseRolling(q) {\n    const s = q.toLowerCase();\n    const compact = s.match(/\\b(\\d+)\\s*(d|w|m|y)\\b/); // 7d/30d/6m/2y\n    if (compact) return {\n        n: parseInt(compact[1], 10),\n        unit: compact[2]\n    };\n    const long = s.match(/\\b(past|last)\\s+(\\d+)\\s+(days?|weeks?|months?|years?)\\b/);\n    if (long) return {\n        n: parseInt(long[2], 10),\n        unit: long[3][0]\n    };\n    return null;\n}\n// IMPORTANT DEFAULT: if user picked a month in the left panel, default to that month range\nfunction resolveRange(query, selectedMonth, tz) {\n    console.log(`[resolveRange] query=\"${query}\", selectedMonth=\"${selectedMonth}\"`);\n    // 1) explicit month (EN/ES)\n    const explicit = parseExplicitMonthRange(query);\n    if (explicit) {\n        console.log(`[resolveRange] Using explicit month: ${explicit.start} to ${explicit.end}`);\n        return explicit;\n    }\n    // 2) named windows\n    const named = parseNamed(query);\n    if (named) {\n        const today = todayInTZ(tz);\n        const y = parseInt(today.slice(0, 4), 10);\n        const m0 = parseInt(today.slice(5, 7), 10) - 1;\n        switch(named){\n            case \"this-week\":\n                return {\n                    start: startOfWeekMonUTC(today),\n                    end: endOfWeekMonUTC(today)\n                };\n            case \"last-week\":\n                {\n                    const end = addDaysISO(startOfWeekMonUTC(today), -1);\n                    const start = addDaysISO(end, -6);\n                    return {\n                        start,\n                        end\n                    };\n                }\n            case \"this-month\":\n                return {\n                    start: startOfMonthUTC(y, m0),\n                    end: today\n                };\n            case \"last-month\":\n                {\n                    const prevEnd = startOfMonthUTC(y, m0); // first of this month\n                    const end = addDaysISO(prevEnd, -1);\n                    const yy = parseInt(end.slice(0, 4), 10);\n                    const mm0 = parseInt(end.slice(5, 7), 10) - 1;\n                    return {\n                        start: startOfMonthUTC(yy, mm0),\n                        end\n                    };\n                }\n            case \"this-year\":\n                return {\n                    start: `${y}-01-01`,\n                    end: today\n                };\n            case \"last-year\":\n                {\n                    const yr = y - 1;\n                    return {\n                        start: `${yr}-01-01`,\n                        end: `${yr}-12-31`\n                    };\n                }\n        }\n    }\n    // 3) rolling windows\n    const rolling = parseRolling(query);\n    if (rolling) {\n        let end = todayInTZ(tz);\n        let start = end;\n        if (rolling.unit === \"d\") start = addDaysISO(end, -rolling.n + 1);\n        if (rolling.unit === \"w\") start = addDaysISO(end, -(rolling.n * 7) + 1);\n        if (rolling.unit === \"m\") start = addMonthsISO(end, -rolling.n);\n        if (rolling.unit === \"y\") {\n            const e = new Date(end + \"T00:00:00.000Z\");\n            start = toISO(new Date(Date.UTC(e.getUTCFullYear() - rolling.n, e.getUTCMonth(), e.getUTCDate())));\n        }\n        if (new Date(start) > new Date(end)) [start, end] = [\n            end,\n            start\n        ];\n        return {\n            start,\n            end\n        };\n    }\n    // 4) DEFAULT: use selectedMonth from left panel (full month); if not given, use current month until \"today\"\n    if (selectedMonth) {\n        const y = parseInt(selectedMonth.slice(0, 4), 10);\n        const m0 = parseInt(selectedMonth.slice(5, 7), 10) - 1;\n        return {\n            start: startOfMonthUTC(y, m0),\n            end: endOfMonthUTC(y, m0)\n        };\n    }\n    const today = todayInTZ(tz);\n    const y = parseInt(today.slice(0, 4), 10);\n    const m0 = parseInt(today.slice(5, 7), 10) - 1;\n    return {\n        start: startOfMonthUTC(y, m0),\n        end: today\n    };\n}\n/* ========================= AGGREGATION ========================= */ const inRange = (iso, r)=>iso >= r.start && iso <= r.end;\nfunction filterByRange(all, r) {\n    return all.filter((e)=>inRange(String(e.date).slice(0, 10), r));\n}\nfunction dailySeries(expenses, r) {\n    const start = new Date(r.start + \"T00:00:00.000Z\");\n    const end = new Date(r.end + \"T00:00:00.000Z\");\n    const days = Math.max(1, Math.round((+end - +start) / MS_DAY) + 1);\n    const map = new Map();\n    for(let i = 0; i < days; i++){\n        map.set(toISO(new Date(Date.UTC(start.getUTCFullYear(), start.getUTCMonth(), start.getUTCDate() + i))), 0);\n    }\n    for (const e of expenses){\n        const k = String(e.date).slice(0, 10);\n        if (map.has(k)) map.set(k, (map.get(k) || 0) + e.amount);\n    }\n    return Array.from(map.entries()).map(([date, amount])=>({\n            date,\n            amount\n        }));\n}\nfunction weekdayBreakdown(expenses, r) {\n    const totals = Array.from({\n        length: 7\n    }, ()=>0);\n    for (const e of expenses){\n        const k = String(e.date).slice(0, 10);\n        if (inRange(k, r)) {\n            const wd = new Date(k + \"T00:00:00.000Z\").getUTCDay();\n            totals[wd] += e.amount;\n        }\n    }\n    const labels = [\n        \"Sun\",\n        \"Mon\",\n        \"Tue\",\n        \"Wed\",\n        \"Thu\",\n        \"Fri\",\n        \"Sat\"\n    ];\n    return totals.map((amount, i)=>({\n            weekday: labels[i],\n            amount\n        }));\n}\nfunction topCats(expenses) {\n    const byCat = {};\n    let total = 0;\n    for (const e of expenses){\n        total += e.amount;\n        const key = e.category || \"Other\";\n        byCat[key] = (byCat[key] || 0) + e.amount;\n    }\n    const sorted = Object.entries(byCat).sort((a, b)=>b[1] - a[1]);\n    return {\n        total,\n        sorted,\n        top: sorted[0]\n    };\n}\n/* ========================= CATEGORY INFERENCE ========================= */ function inferCategory(desc) {\n    const d = (desc || \"\").toLowerCase();\n    if (/food|coffee|lunch|dinner|breakfast|grocer/.test(d)) return \"Food\";\n    if (/uber|taxi|bus|path|metro|train|transit|ride/.test(d)) return \"Transit\";\n    if (/netflix|spotify|subscription|suscrip/.test(d)) return \"Subscriptions\";\n    if (/rent|bill|electric|water|internet|utility|servicios|luz|agua/.test(d)) return \"Bills\";\n    if (/cloth|shirt|pant|shoe|dress|shop|ropa|zapatos|tienda/.test(d)) return \"Shopping\";\n    return \"Other\";\n}\n/* ========================= AMOUNT & DATE EXTRACTION ========================= */ const extractAmount = (q)=>{\n    const lower = q.toLowerCase();\n    // Try word numbers: \"thousand dollars\", \"five hundred\", etc.\n    if (/\\bthousand\\b/.test(lower)) {\n        const numMatch = lower.match(/\\b(one|two|three|four|five|six|seven|eight|nine|ten)\\s+thousand/i);\n        const multiplier = numMatch ? parseWordNumber(numMatch[1]) : 1;\n        return multiplier * 1000;\n    }\n    if (/\\bhundred\\b/.test(lower)) {\n        const numMatch = lower.match(/\\b(one|two|three|four|five|six|seven|eight|nine|ten)\\s+hundred/i);\n        const multiplier = numMatch ? parseWordNumber(numMatch[1]) : 1;\n        return multiplier * 100;\n    }\n    // Try numeric: \"100\", \"$50\", \"20 dollars\"\n    const m = q.match(/(?:\\$?\\s*)(\\d+(?:\\.\\d+)?)(?:\\s*\\$)?(?:\\s*(?:dollars?|dólares|dolares))?/i);\n    return m ? parseFloat(m[1]) : null;\n};\nconst parseWordNumber = (word)=>{\n    const map = {\n        one: 1,\n        two: 2,\n        three: 3,\n        four: 4,\n        five: 5,\n        six: 6,\n        seven: 7,\n        eight: 8,\n        nine: 9,\n        ten: 10,\n        eleven: 11,\n        twelve: 12,\n        thirteen: 13,\n        fourteen: 14,\n        fifteen: 15,\n        sixteen: 16,\n        seventeen: 17,\n        eighteen: 18,\n        nineteen: 19,\n        twenty: 20,\n        thirty: 30,\n        forty: 40,\n        fifty: 50,\n        sixty: 60,\n        seventy: 70,\n        eighty: 80,\n        ninety: 90\n    };\n    return map[word.toLowerCase()] || 1;\n};\n// if client sends exact date, trust it; else: use today's date\nfunction chooseExpenseDate(bodyDate, selectedMonth, tz) {\n    if (bodyDate && /^\\d{4}-\\d{2}-\\d{2}$/.test(bodyDate)) return bodyDate;\n    // Always use today's date when no explicit date is provided\n    return todayInTZ(tz);\n}\n// Parse \"September 10 to 17\", \"Sep 10-17\", \"10–17 Sep\", \"09/10 to 09/17\", etc.\n// Returns an inclusive ISO range or null.\nfunction parseWatchDateRange(q, selectedMonth, tz) {\n    const s = q.toLowerCase();\n    // 1) Month-name + day to day: \"september 10 to 17\" / \"sep 10-17\"\n    let m = s.match(/\\b([a-záéíóúüñ]{3,})\\s+(\\d{1,2})\\s*(?:to|-|–)\\s*(\\d{1,2})\\b/i);\n    if (m) {\n        const mi = monthNameToIndex(m[1]);\n        if (mi != null) {\n            const { year } = resolveYearForMonth(mi, selectedMonth, tz);\n            const d1 = clampDay(year, mi, parseInt(m[2], 10));\n            const d2 = clampDay(year, mi, parseInt(m[3], 10));\n            const start = toISO(new Date(Date.UTC(year, mi, Math.min(d1, d2))));\n            const end = toISO(new Date(Date.UTC(year, mi, Math.max(d1, d2))));\n            return {\n                start,\n                end\n            };\n        }\n    }\n    // 2) Day range + month-name at end: \"10 to 17 september\"\n    m = s.match(/\\b(\\d{1,2})\\s*(?:to|-|–)\\s*(\\d{1,2})\\s+([a-záéíóúüñ]{3,})\\b/i);\n    if (m) {\n        const mi = monthNameToIndex(m[3]);\n        if (mi != null) {\n            const { year } = resolveYearForMonth(mi, selectedMonth, tz);\n            const d1 = clampDay(year, mi, parseInt(m[1], 10));\n            const d2 = clampDay(year, mi, parseInt(m[2], 10));\n            const start = toISO(new Date(Date.UTC(year, mi, Math.min(d1, d2))));\n            const end = toISO(new Date(Date.UTC(year, mi, Math.max(d1, d2))));\n            return {\n                start,\n                end\n            };\n        }\n    }\n    // 3) Month day to month day: \"aug 1 to aug 7\" / \"august 1 to august 7\"\n    m = s.match(/\\b([a-záéíóúüñ]{3,})\\s+(\\d{1,2})\\s*(?:to|-|–)\\s*([a-záéíóúüñ]{3,})\\s+(\\d{1,2})\\b/i);\n    if (m) {\n        const mi1 = monthNameToIndex(m[1]);\n        const mi2 = monthNameToIndex(m[3]);\n        if (mi1 != null && mi2 != null) {\n            const { year: year1 } = resolveYearForMonth(mi1, selectedMonth, tz);\n            const { year: year2 } = resolveYearForMonth(mi2, selectedMonth, tz);\n            const d1 = clampDay(year1, mi1, parseInt(m[2], 10));\n            const d2 = clampDay(year2, mi2, parseInt(m[4], 10));\n            const start = toISO(new Date(Date.UTC(year1, mi1, d1)));\n            const end = toISO(new Date(Date.UTC(year2, mi2, d2)));\n            return {\n                start: start < end ? start : end,\n                end: end > start ? end : start\n            };\n        }\n    }\n    // 4) Numeric \"mm/dd to mm/dd\" (or dd/mm based on heuristic is overkill; assume mm/dd)\n    m = s.match(/\\b(\\d{1,2})[\\/\\-](\\d{1,2})\\s*(?:to|-|–)\\s*(\\d{1,2})[\\/\\-](\\d{1,2})\\b/);\n    if (m) {\n        const y = (selectedMonth || todayInTZ(tz)).slice(0, 4);\n        const m1 = parseInt(m[1], 10) - 1, d1 = parseInt(m[2], 10);\n        const m2 = parseInt(m[3], 10) - 1, d2 = parseInt(m[4], 10);\n        const start = toISO(new Date(Date.UTC(+y, m1, d1)));\n        const end = toISO(new Date(Date.UTC(+y, m2, d2)));\n        return {\n            start: start < end ? start : end,\n            end: end > start ? end : start\n        };\n    }\n    return null;\n}\n// Pick the year to use for \"September …\" based on the selected month or today.\nfunction resolveYearForMonth(monthIndex0, selectedMonth, tz) {\n    if (selectedMonth) return {\n        year: parseInt(selectedMonth.slice(0, 4), 10)\n    };\n    return {\n        year: parseInt(todayInTZ(tz).slice(0, 4), 10)\n    };\n}\nfunction clampDay(y, m0, d) {\n    const end = endOfMonthUTC(y, m0);\n    const last = parseInt(end.slice(8, 10), 10);\n    return Math.min(Math.max(1, d), last);\n}\n/* ========================= INTENT DETECTORS ========================= */ const isChartIntent = (q)=>/\\b(chart|graph|trend|plot|gr[áa]fic[oa])\\b/i.test(q) || /^\\s*\\d+\\s*[dwmy]\\s*chart$/i.test(q) || /^chart$/i.test(q);\nconst isMonthlyIntent = (q)=>/(summary|report|this month|month)\\b/i.test(q) || /\\b(resumen|reporte|este\\s+mes|mes)\\b/i.test(q);\nconst isYearlyIntent = (q)=>/\\byear(ly)?\\b/i.test(q) && /(summary|report|total)/i.test(q) || /\\b(a(ñ|n)o)\\b/i.test(q) && /(resumen|reporte|total)/i.test(q);\nconst isMostSpentIntent = (q)=>/\\bmost\\b/i.test(q) && /\\b(spent|spending)\\b/i.test(q) || /\\bm[aá]s\\s+gastad/i.test(q);\nconst isInsightsIntent = (q)=>/(insight|analysis|analy|ideas)/i.test(q);\n// Add, Delete, Goal, Watch\nconst isAddIntent = (q)=>{\n    // Don't match if it's clearly a \"most spent\" query\n    if (/\\b(most|top|highest|biggest|largest)\\b/i.test(q)) return false;\n    // Don't match if it's clearly an insights/summary query\n    if (/\\b(insight|summary|report)\\b/i.test(q)) return false;\n    return /\\b(add|spent|spend|agrega|añade|anade|sumar|registrar|add expense|gaste|gasté)\\b/i.test(q) || /^\\s*\\$?\\d/.test(q);\n};\nconst isDeleteIntent = (q)=>/\\b(delete|remove|eliminar|borrar|quitar)\\b/i.test(q);\nconst isGoalIntent = (q)=>/\\b(goal|meta)\\b/i.test(q) && /\\b(set|create|crear|establecer|add|agrega|añade|anade)\\b/i.test(q);\nconst isWatchIntent = (q)=>/\\b(watch|alert|notify|alerta|aviso)\\b/i.test(q);\n/* ========================= ROUTE ========================= */ async function POST(req) {\n    const user = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_1__.getCurrentUser)();\n    if (!user) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: \"Unauthorized\"\n    }, {\n        status: 401\n    });\n    const body = await req.json().catch(()=>({})) || {};\n    const query = String(body.query || \"\").trim();\n    const selectedMonth = body.month; // \"YYYY-MM\" from left panel\n    const explicitDate = body.date; // \"YYYY-MM-DD\" (optional exact)\n    const tz = body.tz; // e.g. \"America/New_York\" (optional)\n    const allExpenses = _lib_db__WEBPACK_IMPORTED_MODULE_2__.db.listExpenses(user.id, {});\n    /* ---------- CHART ---------- */ if (isChartIntent(query)) {\n        const range = resolveRange(query, selectedMonth, tz);\n        // optional category: \"chart last week on food\"\n        const catMatch = query.match(/\\b(on|for|en|para)\\s+([a-záéíóúüñ][\\w\\s-]*)$/i);\n        const cat = catMatch ? catMatch[2].trim() : null;\n        const within = filterByRange(allExpenses, range);\n        const filtered = cat ? within.filter((e)=>e.category.toLowerCase() === cat.toLowerCase() || e.description.toLowerCase().includes(cat.toLowerCase())) : within;\n        const series = dailySeries(filtered, range);\n        const weekday = weekdayBreakdown(filtered, range);\n        const total = filtered.reduce((s, e)=>s + e.amount, 0);\n        const days = Math.max(1, Math.round((+new Date(range.end) - +new Date(range.start)) / MS_DAY) + 1);\n        const avg = total / days;\n        const peak = series.reduce((m, p)=>p.amount > m.amount ? p : m, {\n            date: range.start,\n            amount: 0\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            chart: {\n                range,\n                category: cat || \"All\",\n                summary: {\n                    total,\n                    avg,\n                    peak\n                },\n                series,\n                weekdayBreakdown: weekday // [{ weekday, amount }]\n            }\n        });\n    }\n    /* ---------- ADD EXPENSE ---------- */ if (isAddIntent(query)) {\n        const amount = extractAmount(query);\n        if (!amount) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                messages: [\n                    \"❌ Please include an amount. Example: 'Add 12 coffee' or '$20 for groceries'.\"\n                ]\n            });\n        }\n        // Extract date from query FIRST (before description extraction)\n        let dateToUse = explicitDate;\n        if (!dateToUse) {\n            // Try slash date format: MM/DD/YYYY or DD/MM/YYYY\n            const slashDateMatch = query.match(/\\b(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})\\b/);\n            if (slashDateMatch) {\n                const p1 = parseInt(slashDateMatch[1], 10);\n                const p2 = parseInt(slashDateMatch[2], 10);\n                const year = slashDateMatch[3];\n                // Assume MM/DD/YYYY format (US standard)\n                const month = p1.toString().padStart(2, \"0\");\n                const day = p2.toString().padStart(2, \"0\");\n                dateToUse = `${year}-${month}-${day}`;\n                console.log(`[Expense] Parsed slash date \"${slashDateMatch[0]}\" as ${dateToUse}`);\n            }\n        }\n        if (!dateToUse) {\n            // Try month + day + year format: \"nov 1, 2025\", \"november 1 2025\", \"sept 23,2025\" (with or without space after comma)\n            const monthDayYearMatch = query.match(/\\b(?:on\\s+)?([a-záéíóúüñ]+)\\s+(\\d{1,2})(?:st|nd|rd|th)?,?\\s*(\\d{4})?\\b/i);\n            if (monthDayYearMatch) {\n                const monthName = monthDayYearMatch[1];\n                const day = parseInt(monthDayYearMatch[2], 10);\n                const year = monthDayYearMatch[3] ? parseInt(monthDayYearMatch[3], 10) : selectedMonth ? parseInt(selectedMonth.slice(0, 4), 10) : new Date().getFullYear();\n                const monthIndex = monthNameToIndex(monthName);\n                console.log(`[Expense] Matched: \"${monthDayYearMatch[0]}\", month=\"${monthName}\", monthIndex=${monthIndex}, day=${day}, year=${year}`);\n                if (monthIndex !== null) {\n                    const clampedDay = clampDay(year, monthIndex, day);\n                    dateToUse = toISO(new Date(Date.UTC(year, monthIndex, clampedDay)));\n                    console.log(`[Expense] Parsed \"${monthDayYearMatch[0]}\" as ${dateToUse} (monthIndex=${monthIndex}, clampedDay=${clampedDay})`);\n                } else {\n                    console.log(`[Expense] ERROR: monthNameToIndex returned null for \"${monthName}\"`);\n                }\n            }\n        }\n        if (!dateToUse) {\n            // Try month name format: \"in August 2025\", \"in may\"\n            const monthYearMatch = query.match(/\\b(?:in|on)\\s+([a-záéíóúüñ]+)\\s+(\\d{4})\\b/i);\n            if (monthYearMatch) {\n                const monthName = monthYearMatch[1];\n                const year = parseInt(monthYearMatch[2], 10);\n                const monthIndex = monthNameToIndex(monthName);\n                if (monthIndex !== null) {\n                    // Use last day of that month\n                    dateToUse = endOfMonthUTC(year, monthIndex);\n                    console.log(`[Expense] Parsed \"${monthYearMatch[0]}\" as ${dateToUse}`);\n                }\n            }\n        }\n        // Extract description (after date parsing, so we can remove date from description)\n        let description = \"\";\n        // Pattern 1: \"add swimming for $100\" or \"add $100 for swimming\"\n        const forMatch = query.match(/\\b(for|para)\\s+([^\\$\\d]+?)(?:\\s+on\\s+|\\s+in\\s+|$)/i);\n        if (forMatch) {\n            description = forMatch[2].trim();\n        } else {\n            // Pattern 2: \"add 100 swimming\" - extract after amount\n            description = query.replace(/^(add|agrega|añade|anade|sumar|registrar)\\s+/i, \"\").replace(/\\b(hundred|thousand|million)\\s+(?:dollars?|dólares|dolares)?\\s*/i, \"\").replace(/^\\$?\\s*\\d+(?:\\.\\d+)?\\s*(?:\\$)?\\s*(?:dollars?|dólares|dolares)?\\s*/i, \"\").replace(/\\s+on\\s+[a-záéíóúüñ]+\\s+\\d{1,2},?\\s*\\d{4}/i, \"\").replace(/\\s+in\\s+[a-záéíóúüñ]+\\s+\\d{4}/i, \"\").replace(/\\s+\\d{1,2}\\/\\d{1,2}\\/\\d{4}/i, \"\").trim();\n        }\n        if (!description) description = \"Expense\";\n        // choose date inside selectedMonth if provided\n        const date = chooseExpenseDate(dateToUse, selectedMonth, tz);\n        console.log(`[Expense] Final date: ${date} (dateToUse: ${dateToUse}, selectedMonth: ${selectedMonth}, explicitDate: ${explicitDate})`);\n        const category = inferCategory(description);\n        const e = _lib_db__WEBPACK_IMPORTED_MODULE_2__.db.createExpense({\n            userId: user.id,\n            amount,\n            description,\n            category,\n            date\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            messages: [\n                `✅ Added: ${e.description} – $${e.amount.toFixed(2)} (${e.category}) on ${e.date}`\n            ],\n            effects: [\n                {\n                    type: \"expense_created\",\n                    id: e.id\n                }\n            ]\n        });\n    }\n    /* ---------- DELETE WATCH ---------- */ if (isDeleteIntent(query) && /\\b(watch|alert|alerta)\\b/i.test(query)) {\n        // Parse: \"delete watch shoes\" or \"delete watch for food\"\n        let category = \"\";\n        const catMatch = query.match(/\\b(watch|alert|alerta)\\s+(?:for\\s+)?([a-záéíóúüñ]\\w+)/i);\n        if (catMatch) {\n            category = catMatch[2];\n        }\n        if (!category) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                messages: [\n                    \"❌ Please specify the category. Example: 'delete watch food' or 'delete watch for shoes'.\"\n                ]\n            });\n        }\n        // Find matching watch\n        const allWatches = _lib_db__WEBPACK_IMPORTED_MODULE_2__.db.listSpendingWatches(user.id);\n        const matchingWatch = allWatches.find((w)=>w.category.toLowerCase() === category.toLowerCase());\n        if (matchingWatch) {\n            _lib_db__WEBPACK_IMPORTED_MODULE_2__.db.deleteSpendingWatch(matchingWatch.id, user.id);\n            const periodLabel = matchingWatch.period === \"custom\" && matchingWatch.rangeStart && matchingWatch.rangeEnd ? `${matchingWatch.rangeStart} to ${matchingWatch.rangeEnd}` : matchingWatch.period === \"weekly\" ? \"weekly\" : matchingWatch.period === \"yearly\" ? \"yearly\" : \"monthly\";\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                messages: [\n                    `✅ Deleted watch: ${matchingWatch.category} - $${matchingWatch.threshold} ${periodLabel}`\n                ],\n                effects: [\n                    {\n                        type: \"watch_deleted\",\n                        id: matchingWatch.id\n                    }\n                ]\n            });\n        } else {\n            const available = allWatches.map((w)=>`• ${w.category} - $${w.threshold} ${w.period}`).join(\"\\n\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                messages: [\n                    `❌ Could not find watch for \"${category}\".\\n\\nAvailable watches:\\n${available || \"None\"}`\n                ]\n            });\n        }\n    }\n    /* ---------- DELETE EXPENSE (simple) ---------- */ if (isDeleteIntent(query)) {\n        const amount = extractAmount(query);\n        // Parse exact date from query\n        let targetDate;\n        let targetMonth;\n        const fullDateMatch = query.match(/\\b(?:on|in)\\s+([a-záéíóúüñ]+)\\s+(\\d{1,2})(?:st|nd|rd|th)?,?\\s*(\\d{4})?\\b/i);\n        if (fullDateMatch) {\n            const monthName = fullDateMatch[1];\n            const day = parseInt(fullDateMatch[2], 10);\n            const year = fullDateMatch[3] ? parseInt(fullDateMatch[3], 10) : selectedMonth ? parseInt(selectedMonth.slice(0, 4), 10) : new Date().getFullYear();\n            const mi = monthNameToIndex(monthName);\n            if (mi !== null) {\n                const clampedDay = clampDay(year, mi, day);\n                targetDate = toISO(new Date(Date.UTC(year, mi, clampedDay)));\n                targetMonth = `${year}-${String(mi + 1).padStart(2, \"0\")}`;\n            }\n        }\n        if (!targetMonth) {\n            const monthOnlyMatch = query.match(/\\b(?:on|in)\\s+([a-záéíóúüñ]+)\\b/i);\n            if (monthOnlyMatch) {\n                const mi = monthNameToIndex(monthOnlyMatch[1]);\n                if (mi !== null) {\n                    const year = selectedMonth ? selectedMonth.slice(0, 4) : new Date().getFullYear();\n                    targetMonth = `${year}-${String(mi + 1).padStart(2, \"0\")}`;\n                }\n            }\n        }\n        let after = query.replace(/\\b(delete|remove|eliminar|borrar|quitar)\\b/i, \"\").replace(/\\$?\\s*\\d+(?:\\.\\d+)?\\s*\\$?\\s*(?:dollars?|dólares|dolares)?/i, \"\").replace(/\\b(?:on|in)\\s+[a-záéíóúüñ]+(?:\\s+\\d{1,2}(?:st|nd|rd|th)?,?\\s*\\d{4})?\\b/i, \"\").replace(/\\b(for|para)\\s+/i, \"\").trim();\n        const monthISO = targetMonth || selectedMonth || todayInTZ(tz).slice(0, 7);\n        const monthExpenses = _lib_db__WEBPACK_IMPORTED_MODULE_2__.db.listExpenses(user.id, {\n            month: monthISO\n        });\n        if (!amount || !after) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                messages: [\n                    \"❌ Please say amount and description. Example: 'delete 30 for path on december 3'.\"\n                ]\n            });\n        }\n        let candidates = monthExpenses.filter((e)=>e.amount === amount);\n        // If we have a specific date, filter by that date\n        if (targetDate && candidates.length > 0) {\n            const dateFiltered = candidates.filter((e)=>String(e.date).slice(0, 10) === targetDate);\n            if (dateFiltered.length > 0) {\n                candidates = dateFiltered;\n            }\n        }\n        if (candidates.length === 0) {\n            const list = monthExpenses.map((e)=>`• ${e.description} - ${e.amount.toFixed(2)} on ${String(e.date).slice(0, 10)}`).join(\"\\n\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                messages: [\n                    `❌ Not found ${amount} for \"${after}\"${targetDate ? ` on ${targetDate}` : ` in ${monthISO}`}.\\n\\nAvailable:\\n${list || \"None\"}`\n                ]\n            });\n        }\n        const keys = after.toLowerCase().split(/\\s+/).filter((w)=>w.length > 2);\n        let chosen = candidates[0];\n        const better = candidates.find((e)=>keys.some((w)=>e.description.toLowerCase().includes(w) || e.category.toLowerCase().includes(w)));\n        if (better) chosen = better;\n        _lib_db__WEBPACK_IMPORTED_MODULE_2__.db.deleteExpense(chosen.id, user.id);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            messages: [\n                `✅ Deleted: ${chosen.description} – ${chosen.amount.toFixed(2)} on ${String(chosen.date).slice(0, 10)}`\n            ],\n            effects: [\n                {\n                    type: \"expense_deleted\",\n                    id: chosen.id\n                }\n            ]\n        });\n    }\n    /* ---------- GOAL ---------- */ if (isGoalIntent(query)) {\n        const amount = extractAmount(query);\n        let period;\n        if (/\\bweekly|semanal\\b/i.test(query)) period = \"weekly\";\n        else if (/\\bmonthly|mensual\\b/i.test(query)) period = \"monthly\";\n        else if (/\\byearly|yearly|anual\\b/i.test(query)) period = \"yearly\";\n        else if (/\\bmonth|mes\\b/i.test(query)) period = \"monthly\";\n        const catMatch = query.match(/\\b(for|para)\\s+([a-záéíóúüñ][\\w\\s-]*)$/i);\n        const category = catMatch ? catMatch[2].trim() : undefined;\n        if (!amount || !period) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                messages: [\n                    \"❌ Please include amount and period. Example: 'Set monthly goal 300 for food'.\"\n                ]\n            });\n        }\n        // Extract month from query if specified (e.g., \"in December 2025\")\n        let monthValue = selectedMonth || todayInTZ(tz).slice(0, 7);\n        const monthYearMatch = query.match(/\\b(?:in|for)\\s+(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)[a-z]*\\s+(\\d{4})\\b/i);\n        if (monthYearMatch) {\n            const monthName = monthYearMatch[1];\n            const year = monthYearMatch[2];\n            const monthIndex = monthNameToIndex(monthName);\n            if (monthIndex !== null) {\n                monthValue = `${year}-${String(monthIndex + 1).padStart(2, \"0\")}`;\n                console.log(`[Goal] Parsed \"${monthYearMatch[0]}\" as ${monthValue}`);\n            }\n        }\n        if (period === \"yearly\") monthValue = monthValue.slice(0, 4);\n        if (period === \"weekly\") monthValue = monthValue + \"-01\";\n        const label = `Stay under $${amount} ${period}${category ? ` for ${category}` : \"\"}`;\n        const goal = _lib_db__WEBPACK_IMPORTED_MODULE_2__.db.createGoal({\n            userId: user.id,\n            label,\n            limit: amount,\n            month: monthValue,\n            period,\n            category\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            messages: [\n                `✅ Goal created: ${goal.label}.`\n            ],\n            effects: [\n                {\n                    type: \"goal_created\",\n                    id: goal.id\n                }\n            ]\n        });\n    }\n    /* ---------- WATCH (ALERT) — weekly + custom date ranges ---------- */ if (isWatchIntent(query)) {\n        const amount = extractAmount(query);\n        // Period: now supports weekly/monthly/yearly (EN/ES)\n        // Use looser matching to handle \"500weekly\" (no space)\n        let period;\n        if (/(weekly|semanal)/i.test(query)) period = \"weekly\";\n        else if (/(monthly|mensual|mes)/i.test(query)) period = \"monthly\";\n        else if (/(yearly|annual|anual|year)/i.test(query)) period = \"yearly\";\n        // Custom explicit date range like \"september 10 to 17\"\n        const dateRange = parseWatchDateRange(query, selectedMonth, tz); // -> {start,end}|null\n        if (dateRange) period = \"custom\";\n        if (!amount) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                messages: [\n                    \"❌ Please include an amount. Example: 'watch food 500 weekly' or 'watch 500 for food monthly'.\"\n                ]\n            });\n        }\n        // Category: extract before amount, excluding dates and keywords\n        // Pattern: \"watch CATEGORY amount period [for date]\"\n        let category;\n        // Try to match: watch [category] [amount]\n        const catBeforeAmount = query.match(/\\b(?:watch|alert|notify|alerta|aviso)\\s+([a-záéíóúüñ]\\w+)\\s+\\$?\\d/i);\n        if (catBeforeAmount && catBeforeAmount[1]) {\n            const word = catBeforeAmount[1].toLowerCase();\n            // Make sure it's not a keyword\n            if (!/(weekly|monthly|yearly|semanal|mensual|anual|for|on|en|para)/i.test(word)) {\n                category = catBeforeAmount[1];\n            }\n        }\n        // If not found, try \"for category\" pattern\n        if (!category) {\n            const catAfterFor = query.match(/\\b(for|on|en|para)\\s+([a-záéíóúüñ]\\w+)/i);\n            if (catAfterFor && catAfterFor[2]) {\n                const word = catAfterFor[2].toLowerCase();\n                // Make sure it's not a date word\n                if (!/(january|february|march|april|may|june|july|august|september|october|november|december|enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i.test(word)) {\n                    category = catAfterFor[2];\n                }\n            }\n        }\n        // Fallback: guess from remaining words\n        if (!category) {\n            const cleaned = query.replace(/\\$?\\s*\\d+(?:\\.\\d+)?/g, \"\");\n            const words = cleaned.split(/\\s+/).filter((w)=>w.length > 2 && !/(watch|alert|notify|alerta|aviso|weekly|monthly|yearly|semanal|mensual|anual|for|on|en|para|january|february|march|april|may|june|july|august|september|october|november|december|enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|\\d{4})/i.test(w));\n            category = (words[0] || \"General\").trim();\n        }\n        // Anchor to selected month/year so \"monthly/yearly\" is deterministic.\n        let monthValue = selectedMonth || todayInTZ(tz).slice(0, 7);\n        if (period === \"yearly\") monthValue = monthValue.slice(0, 4);\n        if (!period) period = \"monthly\"; // sensible default if user omitted it\n        // For weekly: store the ISO week start so it's reproducible.\n        let rangeStart, rangeEnd;\n        if (period === \"weekly\" && !dateRange) {\n            // Use TODAY's date for the current week (not selected month)\n            const today = todayInTZ(tz);\n            rangeStart = startOfWeekMonUTC(today);\n            rangeEnd = endOfWeekMonUTC(today);\n        }\n        if (period === \"custom\" && dateRange) {\n            rangeStart = dateRange.start;\n            rangeEnd = dateRange.end;\n        }\n        // Create the watch. We pass rangeStart/rangeEnd as optional fields —\n        // safe even if your db layer ignores unknown keys.\n        const watch = _lib_db__WEBPACK_IMPORTED_MODULE_2__.db.createSpendingWatch({\n            userId: user.id,\n            category,\n            threshold: amount,\n            period: period === \"custom\" ? \"custom\" : period,\n            month: monthValue,\n            rangeStart,\n            rangeEnd,\n            createdAt: new Date().toISOString()\n        });\n        // Friendly confirmation text\n        let when = period === \"weekly\" && rangeStart && rangeEnd ? `this week (${rangeStart} → ${rangeEnd})` : period === \"monthly\" ? `monthly (${monthValue})` : period === \"yearly\" ? `year ${monthValue}` : period === \"custom\" && rangeStart && rangeEnd ? `${rangeStart} → ${rangeEnd}` : period;\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            messages: [\n                `✅ Watch created: Alert when ${category} reaches $${amount} ${when}.`\n            ],\n            effects: [\n                {\n                    type: \"watch_created\",\n                    id: watch?.id\n                }\n            ]\n        });\n    }\n    /* ---------- INSIGHTS (DEFAULT = SELECTED MONTH) ---------- */ if (isInsightsIntent(query)) {\n        const range = resolveRange(query, selectedMonth, tz);\n        const within = filterByRange(allExpenses, range);\n        const total = within.reduce((s, e)=>s + e.amount, 0);\n        const days = Math.max(1, Math.round((+new Date(range.end) - +new Date(range.start)) / MS_DAY) + 1);\n        const avgPerDay = total / days;\n        const projected = avgPerDay * days;\n        const { sorted } = topCats(within);\n        const top3 = sorted.slice(0, 3).map(([c, a], i)=>`${i + 1}. ${c}: $${a.toFixed(2)}`).join(\"\\n\");\n        const byCat = {};\n        within.forEach((e)=>byCat[e.category || \"Other\"] = (byCat[e.category || \"Other\"] || 0) + e.amount);\n        const tips = [];\n        if (byCat[\"Food\"] > 300) tips.push(\"\\uD83D\\uDCA1 Food is high — meal prep could help.\");\n        if (byCat[\"Transit\"] > 150) tips.push(\"\\uD83D\\uDCA1 Consider a weekly/monthly transit pass.\");\n        if (byCat[\"Subscriptions\"] > 100) tips.push(\"\\uD83D\\uDCA1 Review and cancel unused subscriptions.\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            messages: [\n                `🔍 Insights ${range.start} → ${range.end}`,\n                `• Total: $${total.toFixed(2)} • Daily avg: $${avgPerDay.toFixed(2)} • Projected: ~$${projected.toFixed(2)}`,\n                sorted.length ? `• Top categories:\\n${top3}` : \"• No categorized spending.\",\n                ...tips.length ? [\n                    \"\",\n                    ...tips\n                ] : []\n            ]\n        });\n    }\n    /* ---------- MOST SPENT (PERIOD-AWARE) ---------- */ if (isMostSpentIntent(query)) {\n        const range = resolveRange(query, selectedMonth, tz);\n        const within = filterByRange(allExpenses, range);\n        if (!within.length) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            messages: [\n                `No expenses from ${range.start} to ${range.end}.`\n            ]\n        });\n        const { total, sorted, top } = topCats(within);\n        const msgs = [];\n        if (top) {\n            msgs.push(`💰 From ${range.start} to ${range.end}, you spent the most on ${top[0]}: $${top[1].toFixed(2)} (${total ? (top[1] / total * 100).toFixed(1) : \"0.0\"}%)`);\n            msgs.push(`\\nTop 3 Categories:\\n` + sorted.slice(0, 3).map(([c, a], i)=>`${i + 1}. ${c}: $${a.toFixed(2)}`).join(\"\\n\"));\n        } else {\n            msgs.push(\"No categorized spending in that range.\");\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            messages: msgs\n        });\n    }\n    /* ---------- MONTHLY SUMMARY (ALWAYS USE SELECTED MONTH IF PROVIDED) ---------- */ if (isMonthlyIntent(query)) {\n        // Try to parse month from query first\n        const explicitRange = parseExplicitMonthRange(query);\n        const monthISO = explicitRange ? explicitRange.start.slice(0, 7) : selectedMonth || todayInTZ(tz).slice(0, 7);\n        const monthExpenses = _lib_db__WEBPACK_IMPORTED_MODULE_2__.db.listExpenses(user.id, {\n            month: monthISO\n        });\n        const total = monthExpenses.reduce((s, e)=>s + e.amount, 0);\n        const byCat = {};\n        for (const e of monthExpenses)byCat[e.category || \"Other\"] = (byCat[e.category || \"Other\"] || 0) + e.amount;\n        const sorted = Object.entries(byCat).sort((a, b)=>b[1] - a[1]);\n        const top = sorted[0];\n        const msgs = [];\n        msgs.push(`📊 Monthly Summary for ${monthISO}:\\nTotal Spent: $${total.toFixed(2)}\\nTransactions: ${monthExpenses.length}`);\n        if (top) msgs.push(`💰 Most spent on: ${top[0]} ($${top[1].toFixed(2)} - ${total ? (top[1] / total * 100).toFixed(1) : \"0.0\"}%)`);\n        if (sorted.length) msgs.push(`\\nBreakdown by Category:\\n` + sorted.map(([c, a])=>`• ${c}: $${a.toFixed(2)}`).join(\"\\n\"));\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            messages: msgs\n        });\n    }\n    /* ---------- YEARLY SUMMARY ---------- */ if (isYearlyIntent(query)) {\n        const y = selectedMonth ? selectedMonth.slice(0, 4) : todayInTZ(tz).slice(0, 4);\n        const yearExpenses = allExpenses.filter((e)=>String(e.date).startsWith(y));\n        const total = yearExpenses.reduce((s, e)=>s + e.amount, 0);\n        const byCat = {};\n        const byMonth = {};\n        for (const e of yearExpenses){\n            const cat = e.category || \"Other\";\n            byCat[cat] = (byCat[cat] || 0) + e.amount;\n            const mk = String(e.date).slice(0, 7);\n            byMonth[mk] = (byMonth[mk] || 0) + e.amount;\n        }\n        const top = Object.entries(byCat).sort((a, b)=>b[1] - a[1])[0];\n        const avgMonthly = total / Math.max(Object.keys(byMonth).length, 1);\n        const msgs = [];\n        msgs.push(`📊 Yearly Summary for ${y}:\\nTotal Spent: $${total.toFixed(2)}\\nTransactions: ${yearExpenses.length}\\nAverage Monthly: $${avgMonthly.toFixed(2)}`);\n        if (top) msgs.push(`💰 Most spent on: ${top[0]} ($${top[1].toFixed(2)} - ${total ? (top[1] / total * 100).toFixed(1) : \"0.0\"}%)`);\n        const breakdown = Object.entries(byCat).sort((a, b)=>b[1] - a[1]).map(([c, a])=>`• ${c}: $${a.toFixed(2)}`).join(\"\\n\");\n        if (breakdown) msgs.push(`\\nBreakdown by Category:\\n${breakdown}`);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            messages: msgs\n        });\n    }\n    /* ---------- FALLBACK HELP ---------- */ return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        messages: [\n            \"Try:\",\n            \"• Add: 'Add 20 dollars for path' (+ optional { date: 'YYYY-MM-DD', month: 'YYYY-MM' })\",\n            \"• Delete: 'delete 100 for coffee'\",\n            \"• Goal: 'Set monthly goal 300 for food'\",\n            \"• Watch: 'Watch food 500 weekly/monthly/yearly'\",\n            \"• Chart: 'chart 7d', 'chart last week', 'chart May 2025', 'chart last month on food'\",\n            \"• Insights: 'insights' (uses selected month by default)\",\n            \"• Most spent: 'Most spent on this week?' / 'Most spent on May 2025'\",\n            \"• Summary: 'monthly summary', 'yearly summary'\"\n        ]\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9zdWdnZXN0aW9ucy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsaUNBQWlDO0FBQ3VCO0FBQ0w7QUFDZDtBQUVyQywyRUFBMkUsR0FDM0UsTUFBTUcsU0FBUztBQUVmLE1BQU1DLFFBQVEsQ0FBQ0MsSUFDYixJQUFJQyxLQUFLQSxLQUFLQyxHQUFHLENBQUNGLEVBQUVHLGNBQWMsSUFBSUgsRUFBRUksV0FBVyxJQUFJSixFQUFFSyxVQUFVLEtBQ2hFQyxXQUFXLEdBQ1hDLEtBQUssQ0FBQyxHQUFHLEtBQUssYUFBYTtBQUVoQyw4REFBOEQ7QUFDOUQsU0FBU0MsVUFBVUMsRUFBVztJQUM1QixJQUFJO1FBQ0YsSUFBSSxDQUFDQSxJQUFJLE9BQU9WLE1BQU0sSUFBSUU7UUFDMUIsTUFBTVMsTUFBTSxJQUFJVDtRQUNoQixNQUFNVSxNQUFNLElBQUlDLEtBQUtDLGNBQWMsQ0FBQyxTQUFTO1lBQUVDLFVBQVVMO1lBQUlNLE1BQU07WUFBV0MsT0FBTztZQUFXQyxLQUFLO1FBQVU7UUFDL0csTUFBTUMsUUFBUVAsSUFBSVEsYUFBYSxDQUFDVDtRQUNoQyxNQUFNVSxJQUFJRixNQUFNRyxJQUFJLENBQUNDLENBQUFBLElBQUtBLEVBQUVDLElBQUksS0FBSyxTQUFTQyxTQUFTQyxPQUFPZixJQUFJUCxjQUFjO1FBQ2hGLE1BQU11QixJQUFJUixNQUFNRyxJQUFJLENBQUNDLENBQUFBLElBQUtBLEVBQUVDLElBQUksS0FBSyxVQUFVQyxTQUFTQyxPQUFPZixJQUFJTixXQUFXLEtBQUssR0FBR3VCLFFBQVEsQ0FBQyxHQUFHO1FBQ2xHLE1BQU0zQixJQUFJa0IsTUFBTUcsSUFBSSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFQyxJQUFJLEtBQUssUUFBUUMsU0FBU0MsT0FBT2YsSUFBSUwsVUFBVSxJQUFJc0IsUUFBUSxDQUFDLEdBQUc7UUFDM0YsT0FBTyxDQUFDLEVBQUVQLEVBQUUsQ0FBQyxFQUFFTSxFQUFFLENBQUMsRUFB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ZXMiOlsid2VicGFjazovL2hhbGxvd2FsbGV0Ly4vc3JjL2FwcC9hcGkvc3VnZ2VzdGlvbnMvcm91dGUudHM/OTJkYiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvYXBwL2FwaS9hc3Npc3RhbnQvcm91dGUudHNcbmltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IGdldEN1cnJlbnRVc2VyIH0gZnJvbSBcIi4uLy4uLy4uL2xpYi9hdXRoXCI7XG5pbXBvcnQgeyBkYiB9IGZyb20gXCIuLi8uLi8uLi9saWIvZGJcIjtcblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PSBVVEMgJiBUWiBEQVRFIFVUSUxTID09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbmNvbnN0IE1TX0RBWSA9IDg2XzQwMF8wMDA7XG5cbmNvbnN0IHRvSVNPID0gKGQ6IERhdGUpID0+XG4gIG5ldyBEYXRlKERhdGUuVVRDKGQuZ2V0VVRDRnVsbFllYXIoKSwgZC5nZXRVVENNb250aCgpLCBkLmdldFVUQ0RhdGUoKSkpXG4gICAgLnRvSVNPU3RyaW5nKClcbiAgICAuc2xpY2UoMCwgMTApOyAvLyBZWVlZLU1NLUREXG5cbi8vIFNhZmVseSBwcm9kdWNlIFwidG9kYXlcIiBpbiBhIHNwZWNpZmljIElBTkEgdHogKGZhbGxiYWNrIFVUQylcbmZ1bmN0aW9uIHRvZGF5SW5UWih0ej86IHN0cmluZyk6IHN0cmluZyB7XG4gIHRyeSB7XG4gICAgaWYgKCF0eikgcmV0dXJuIHRvSVNPKG5ldyBEYXRlKCkpO1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZm10ID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoXCJlbi1DQVwiLCB7IHRpbWVab25lOiB0eiwgeWVhcjogXCJudW1lcmljXCIsIG1vbnRoOiBcIjItZGlnaXRcIiwgZGF5OiBcIjItZGlnaXRcIiB9KTtcbiAgICBjb25zdCBwYXJ0cyA9IGZtdC5mb3JtYXRUb1BhcnRzKG5vdyk7XG4gICAgY29uc3QgeSA9IHBhcnRzLmZpbmQocCA9PiBwLnR5cGUgPT09IFwieWVhclwiKT8udmFsdWUgPz8gU3RyaW5nKG5vdy5nZXRVVENGdWxsWWVhcigpKTtcbiAgICBjb25zdCBtID0gcGFydHMuZmluZChwID0+IHAudHlwZSA9PT0gXCJtb250aFwiKT8udmFsdWUgPz8gU3RyaW5nKG5vdy5nZXRVVENNb250aCgpICsgMSkucGFkU3RhcnQoMiwgXCIwXCIpO1xuICAgIGNvbnN0IGQgPSBwYXJ0cy5maW5kKHAgPT4gcC50eXBlID09PSBcImRheVwiKT8udmFsdWUgPz8gU3RyaW5nKG5vdy5nZXRVVENEYXRlKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICByZXR1cm4gYCR7eX0tJHttfS0ke2R9YDtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIHRvSVNPKG5ldyBEYXRlKCkpO1xuICB9XG59XG5cbmNvbnN0IHN0YXJ0T2ZNb250aFVUQyA9ICh5OiBudW1iZXIsIG0wOiBudW1iZXIpID0+IHRvSVNPKG5ldyBEYXRlKERhdGUuVVRDKHksIG0wLCAxKSkpO1xuY29uc3QgZW5kT2ZNb250aFVUQyA9ICh5OiBudW1iZXIsIG0wOiBudW1iZXIpID0+IHRvSVNPKG5ldyBEYXRlKERhdGUuVVRDKHksIG0wICsgMSwgMCkpKTtcblxuY29uc3Qgc3RhcnRPZldlZWtNb25VVEMgPSAoaXNvOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgZCA9IG5ldyBEYXRlKGlzbyArIFwiVDAwOjAwOjAwLjAwMFpcIik7XG4gIGNvbnN0IGRheSA9IGQuZ2V0VVRDRGF5KCk7IC8vIDAuLjZcbiAgY29uc3QgZGlmZiA9IChkYXkgKyA2KSAlIDc7IC8vIE1vbj0wXG4gIGQuc2V0VVRDRGF0ZShkLmdldFVUQ0RhdGUoKSAtIGRpZmYpO1xuICByZXR1cm4gdG9JU08oZCk7XG59O1xuY29uc3QgZW5kT2ZXZWVrTW9uVVRDID0gKGlzbzogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IHMgPSBuZXcgRGF0ZShzdGFydE9mV2Vla01vblVUQyhpc28pICsgXCJUMDA6MDA6MDAuMDAwWlwiKTtcbiAgcy5zZXRVVENEYXRlKHMuZ2V0VVRDRGF0ZSgpICsgNik7XG4gIHJldHVybiB0b0lTTyhzKTtcbn07XG5cbmNvbnN0IGFkZERheXNJU08gPSAoaXNvOiBzdHJpbmcsIGRlbHRhOiBudW1iZXIpID0+IHtcbiAgY29uc3QgZCA9IG5ldyBEYXRlKGlzbyArIFwiVDAwOjAwOjAwLjAwMFpcIik7XG4gIGQuc2V0VVRDRGF0ZShkLmdldFVUQ0RhdGUoKSArIGRlbHRhKTtcbiAgcmV0dXJuIHRvSVNPKGQpO1xufTtcbmNvbnN0IGFkZE1vbnRoc0lTTyA9IChpc286IHN0cmluZywgZGVsdGE6IG51bWJlcikgPT4ge1xuICBjb25zdCBkID0gbmV3IERhdGUoaXNvICsgXCJUMDA6MDA6MDAuMDAwWlwiKTtcbiAgZC5zZXRVVENNb250aChkLmdldFVUQ01vbnRoKCkgKyBkZWx0YSk7XG4gIHJldHVybiB0b0lTTyhkKTtcbn07XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT0gUkFOR0UgUEFSU0lORyA9PT09PT09PT09PT09PT09PT09PT09PT09ICovXG50eXBlIFJhbmdlID0geyBzdGFydDogc3RyaW5nOyBlbmQ6IHN0cmluZyB9O1xuXG5jb25zdCBNT05USFMgPSBbXG4gIC8vIEVuZ2xpc2ggZnVsbCBuYW1lc1xuICBcImphbnVhcnlcIixcImZlYnJ1YXJ5XCIsXCJtYXJjaFwiLFwiYXByaWxcIixcIm1heVwiLFwianVuZVwiLFxuICBcImp1bHlcIixcImF1Z3VzdFwiLFwic2VwdGVtYmVyXCIsXCJvY3RvYmVyXCIsXCJub3ZlbWJlclwiLFwiZGVjZW1iZXJcIixcbiAgLy8gU3BhbmlzaFxuICBcImVuZXJvXCIsXCJmZWJyZXJvXCIsXCJtYXJ6b1wiLFwiYWJyaWxcIixcIm1heW9cIixcImp1bmlvXCIsXG4gIFwianVsaW9cIixcImFnb3N0b1wiLFwic2VwdGllbWJyZVwiLFwic2V0aWVtYnJlXCIsXCJvY3R1YnJlXCIsXCJub3ZpZW1icmVcIixcImRpY2llbWJyZVwiLFxuXTtcblxuY29uc3QgTU9OVEhfQUJCUkVWOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge1xuICAvLyBFbmdsaXNoIGFiYnJldmlhdGlvbnNcbiAgXCJqYW5cIjogMCwgXCJmZWJcIjogMSwgXCJtYXJcIjogMiwgXCJhcHJcIjogMywgXCJtYXlcIjogNCwgXCJqdW5cIjogNSxcbiAgXCJqdWxcIjogNiwgXCJhdWdcIjogNywgXCJzZXBcIjogOCwgXCJvY3RcIjogOSwgXCJub3ZcIjogMTAsIFwiZGVjXCI6IDExLFxuICAvLyBTcGFuaXNoIGFiYnJldmlhdGlvbnMgKG9ubHkgdW5pcXVlIG9uZXMpXG4gIFwiZW5lXCI6IDAsIFwiYWJyXCI6IDMsIFwiYWdvXCI6IDcsIFwiZGljXCI6IDExLFxuICAvLyBcInNlcHRcIiBpcyBhbHNvIGNvbW1vblxuICBcInNlcHRcIjogOCxcbn07XG5cbmNvbnN0IG1vbnRoTmFtZVRvSW5kZXggPSAobTogc3RyaW5nKTogbnVtYmVyIHwgbnVsbCA9PiB7XG4gIGNvbnN0IGxvd2VyID0gbS50b0xvd2VyQ2FzZSgpO1xuICAvLyBUcnkgYWJicmV2aWF0aW9uIGZpcnN0XG4gIGlmIChNT05USF9BQkJSRVZbbG93ZXJdICE9PSB1bmRlZmluZWQpIHJldHVybiBNT05USF9BQkJSRVZbbG93ZXJdO1xuICAvLyBUcnkgZnVsbCBuYW1lXG4gIGNvbnN0IGkgPSBNT05USFMuaW5kZXhPZihsb3dlcik7XG4gIHJldHVybiBpID09PSAtMSA/IG51bGwgOiBpICUgMTI7IC8vIG5vcm1hbGl6ZSBFTi9FUyB0byAwLi4xMVxufTtcblxuLy8g4oCcaW4gTWF5IDIwMjXigJ0sIOKAnGVuIG1heW8gMjAyNeKAnVxuZnVuY3Rpb24gcGFyc2VFeHBsaWNpdE1vbnRoUmFuZ2UocTogc3RyaW5nKTogUmFuZ2UgfCBudWxsIHtcbiAgLy8gVHJ5IHdpdGggeWVhciBmaXJzdDogXCJNYXkgMjAyNVwiLCBcImluIG5vdmVtYmVyIDIwMjVcIlxuICBsZXQgbSA9IHEubWF0Y2goL1xcYig/OmluXFxzK3xlblxccyt8b25cXHMrfGZvclxccyspPyhbYS16w6HDqcOtw7PDusO8w7FdKylcXHMrKFxcZHs0fSlcXGIvaSk7XG4gIGlmIChtKSB7XG4gICAgY29uc3QgbWkgPSBtb250aE5hbWVUb0luZGV4KG1bMV0pO1xuICAgIGNvbnN0IHkgPSBwYXJzZUludChtWzJdLCAxMCk7XG4gICAgaWYgKG1pICE9IG51bGwgJiYgeSkge1xuICAgICAgY29uc29sZS5sb2coYFtNb250aCBQYXJzZV0gTWF0Y2hlZCBcIiR7bVswXX1cIiAtPiAke3l9LSR7U3RyaW5nKG1pKzEpLnBhZFN0YXJ0KDIsJzAnKX1gKTtcbiAgICAgIHJldHVybiB7IHN0YXJ0OiBzdGFydE9mTW9udGhVVEMoeSwgbWkpLCBlbmQ6IGVuZE9mTW9udGhVVEMoeSwgbWkpIH07XG4gICAgfVxuICB9XG4gIFxuICAvLyBUcnkgbW9udGggb25seSAtIG1vcmUgZmxleGlibGUgbWF0Y2hpbmdcbiAgLy8gTWF0Y2ggYW55IG1vbnRoIG5hbWUgaW4gdGhlIHF1ZXJ5LCByZWdhcmRsZXNzIG9mIHBvc2l0aW9uXG4gIGNvbnN0IHdvcmRzID0gcS50b0xvd2VyQ2FzZSgpLnNwbGl0KC9cXHMrLyk7XG4gIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgIGNvbnN0IG1pID0gbW9udGhOYW1lVG9JbmRleCh3b3JkKTtcbiAgICBpZiAobWkgIT0gbnVsbCkge1xuICAgICAgLy8gTWFrZSBzdXJlIGl0J3Mgbm90IGZvbGxvd2VkIGJ5IGEgZGF5IG51bWJlclxuICAgICAgY29uc3Qgd29yZEluZGV4ID0gcS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yod29yZCk7XG4gICAgICBjb25zdCBhZnRlcldvcmQgPSBxLnNsaWNlKHdvcmRJbmRleCArIHdvcmQubGVuZ3RoKS50cmltKCk7XG4gICAgICBpZiAoIS9eXFxkezEsMn1cXGIvLnRlc3QoYWZ0ZXJXb3JkKSkge1xuICAgICAgICBjb25zdCB5ID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpO1xuICAgICAgICBjb25zb2xlLmxvZyhgW01vbnRoIFBhcnNlXSBGb3VuZCBtb250aCBcIiR7d29yZH1cIiAtPiAke3l9LSR7U3RyaW5nKG1pKzEpLnBhZFN0YXJ0KDIsJzAnKX1gKTtcbiAgICAgICAgcmV0dXJuIHsgc3RhcnQ6IHN0YXJ0T2ZNb250aFVUQyh5LCBtaSksIGVuZDogZW5kT2ZNb250aFVUQyh5LCBtaSkgfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIGNvbnNvbGUubG9nKGBbTW9udGggUGFyc2VdIE5vIG1vbnRoIGZvdW5kIGluIFwiJHtxfVwiYCk7XG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBwYXJzZU5hbWVkKHE6IHN0cmluZyk6XG4gIHwgXCJ0aGlzLXdlZWtcIiB8IFwibGFzdC13ZWVrXCJcbiAgfCBcInRoaXMtbW9udGhcIiB8IFwibGFzdC1tb250aFwiXG4gIHwgXCJ0aGlzLXllYXJcIiB8IFwibGFzdC15ZWFyXCIgfCBudWxsIHtcbiAgY29uc3QgcyA9IHEudG9Mb3dlckNhc2UoKTtcbiAgaWYgKC9cXGJ0aGlzXFxzK3dlZWtcXGJ8XFxiZXN0W2VhXVxccytzZW1hbmFcXGIvLnRlc3QocykpIHJldHVybiBcInRoaXMtd2Vla1wiO1xuICBpZiAoL1xcYmxhc3RcXHMrd2Vla1xcYnxcXGJsYVxccytzZW1hbmFcXHMrcGFzYWRhXFxiLy50ZXN0KHMpKSByZXR1cm4gXCJsYXN0LXdlZWtcIjtcbiAgaWYgKC9cXGJ0aGlzXFxzK21vbnRoXFxifFxcYmVzdFtlYV1cXHMrbWVzXFxiLy50ZXN0KHMpKSByZXR1cm4gXCJ0aGlzLW1vbnRoXCI7XG4gIGlmICgvXFxibGFzdFxccyttb250aFxcYnxcXGJlbFxccyttZXNcXHMrcGFzYWRvXFxiLy50ZXN0KHMpKSByZXR1cm4gXCJsYXN0LW1vbnRoXCI7XG4gIGlmICgvXFxidGhpc1xccyt5ZWFyXFxifFxcYmVzdFtlYV1cXHMrYSjDsXxuKW9cXGIvLnRlc3QocykpIHJldHVybiBcInRoaXMteWVhclwiO1xuICBpZiAoL1xcYmxhc3RcXHMreWVhclxcYnxcXGJlbFxccythKMOxfG4pb1xccytwYXNhZG9cXGIvLnRlc3QocykpIHJldHVybiBcImxhc3QteWVhclwiO1xuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gcGFyc2VSb2xsaW5nKHE6IHN0cmluZyk6IHsgbjogbnVtYmVyOyB1bml0OiBcImRcInxcIndcInxcIm1cInxcInlcIiB9IHwgbnVsbCB7XG4gIGNvbnN0IHMgPSBxLnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IGNvbXBhY3QgPSBzLm1hdGNoKC9cXGIoXFxkKylcXHMqKGR8d3xtfHkpXFxiLyk7IC8vIDdkLzMwZC82bS8yeVxuICBpZiAoY29tcGFjdCkgcmV0dXJuIHsgbjogcGFyc2VJbnQoY29tcGFjdFsxXSwgMTApLCB1bml0OiBjb21wYWN0WzJdIGFzIGFueSB9O1xuICBjb25zdCBsb25nID0gcy5tYXRjaCgvXFxiKHBhc3R8bGFzdClcXHMrKFxcZCspXFxzKyhkYXlzP3x3ZWVrcz98bW9udGhzP3x5ZWFycz8pXFxiLyk7XG4gIGlmIChsb25nKSByZXR1cm4geyBuOiBwYXJzZUludChsb25nWzJdLCAxMCksIHVuaXQ6IGxvbmdbM11bMF0gYXMgYW55IH07XG4gIHJldHVybiBudWxsO1xufVxuXG4vLyBJTVBPUlRBTlQgREVGQVVMVDogaWYgdXNlciBwaWNrZWQgYSBtb250aCBpbiB0aGUgbGVmdCBwYW5lbCwgZGVmYXVsdCB0byB0aGF0IG1vbnRoIHJhbmdlXG5mdW5jdGlvbiByZXNvbHZlUmFuZ2UocXVlcnk6IHN0cmluZywgc2VsZWN0ZWRNb250aD86IHN0cmluZywgdHo/OiBzdHJpbmcpOiBSYW5nZSB7XG4gIGNvbnNvbGUubG9nKGBbcmVzb2x2ZVJhbmdlXSBxdWVyeT1cIiR7cXVlcnl9XCIsIHNlbGVjdGVkTW9udGg9XCIke3NlbGVjdGVkTW9udGh9XCJgKTtcbiAgLy8gMSkgZXhwbGljaXQgbW9udGggKEVOL0VTKVxuICBjb25zdCBleHBsaWNpdCA9IHBhcnNlRXhwbGljaXRNb250aFJhbmdlKHF1ZXJ5KTtcbiAgaWYgKGV4cGxpY2l0KSB7XG4gICAgY29uc29sZS5sb2coYFtyZXNvbHZlUmFuZ2VdIFVzaW5nIGV4cGxpY2l0IG1vbnRoOiAke2V4cGxpY2l0LnN0YXJ0fSB0byAke2V4cGxpY2l0LmVuZH1gKTtcbiAgICByZXR1cm4gZXhwbGljaXQ7XG4gIH1cblxuICAvLyAyKSBuYW1lZCB3aW5kb3dzXG4gIGNvbnN0IG5hbWVkID0gcGFyc2VOYW1lZChxdWVyeSk7XG4gIGlmIChuYW1lZCkge1xuICAgIGNvbnN0IHRvZGF5ID0gdG9kYXlJblRaKHR6KTtcbiAgICBjb25zdCB5ID0gcGFyc2VJbnQodG9kYXkuc2xpY2UoMCw0KSwxMCk7XG4gICAgY29uc3QgbTAgPSBwYXJzZUludCh0b2RheS5zbGljZSg1LDcpLDEwKSAtIDE7XG4gICAgc3dpdGNoIChuYW1lZCkge1xuICAgICAgY2FzZSBcInRoaXMtd2Vla1wiOiAgcmV0dXJuIHsgc3RhcnQ6IHN0YXJ0T2ZXZWVrTW9uVVRDKHRvZGF5KSwgZW5kOiBlbmRPZldlZWtNb25VVEModG9kYXkpIH07XG4gICAgICBjYXNlIFwibGFzdC13ZWVrXCI6IHtcbiAgICAgICAgY29uc3QgZW5kID0gYWRkRGF5c0lTTyhzdGFydE9mV2Vla01vblVUQyh0b2RheSksIC0xKTtcbiAgICAgICAgY29uc3Qgc3RhcnQgPSBhZGREYXlzSVNPKGVuZCwgLTYpO1xuICAgICAgICByZXR1cm4geyBzdGFydCwgZW5kIH07XG4gICAgICB9XG4gICAgICBjYXNlIFwidGhpcy1tb250aFwiOiByZXR1cm4geyBzdGFydDogc3RhcnRPZk1vbnRoVVRDKHksIG0wKSwgZW5kOiB0b2RheSB9O1xuICAgICAgY2FzZSBcImxhc3QtbW9udGhcIjoge1xuICAgICAgICBjb25zdCBwcmV2RW5kID0gc3RhcnRPZk1vbnRoVVRDKHksIG0wKTsgLy8gZmlyc3Qgb2YgdGhpcyBtb250aFxuICAgICAgICBjb25zdCBlbmQgPSBhZGREYXlzSVNPKHByZXZFbmQsIC0xKTtcbiAgICAgICAgY29uc3QgeXkgPSBwYXJzZUludChlbmQuc2xpY2UoMCw0KSwxMCk7XG4gICAgICAgIGNvbnN0IG1tMCA9IHBhcnNlSW50KGVuZC5zbGljZSg1LDcpLDEwKSAtIDE7XG4gICAgICAgIHJldHVybiB7IHN0YXJ0OiBzdGFydE9mTW9udGhVVEMoeXksIG1tMCksIGVuZCB9O1xuICAgICAgfVxuICAgICAgY2FzZSBcInRoaXMteWVhclwiOiByZXR1cm4geyBzdGFydDogYCR7eX0tMDEtMDFgLCBlbmQ6IHRvZGF5IH07XG4gICAgICBjYXNlIFwibGFzdC15ZWFyXCI6IHtcbiAgICAgICAgY29uc3QgeXIgPSB5IC0gMTtcbiAgICAgICAgcmV0dXJuIHsgc3RhcnQ6IGAke3lyfS0wMS0wMWAsIGVuZDogYCR7eXJ9LTEyLTMxYCB9O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIDMpIHJvbGxpbmcgd2luZG93c1xuICBjb25zdCByb2xsaW5nID0gcGFyc2VSb2xsaW5nKHF1ZXJ5KTtcbiAgaWYgKHJvbGxpbmcpIHtcbiAgICBsZXQgZW5kID0gdG9kYXlJblRaKHR6KTtcbiAgICBsZXQgc3RhcnQgPSBlbmQ7XG4gICAgaWYgKHJvbGxpbmcudW5pdCA9PT0gXCJkXCIpIHN0YXJ0ID0gYWRkRGF5c0lTTyhlbmQsIC1yb2xsaW5nLm4gKyAxKTtcbiAgICBpZiAocm9sbGluZy51bml0ID09PSBcIndcIikgc3RhcnQgPSBhZGREYXlzSVNPKGVuZCwgLShyb2xsaW5nLm4gKiA3KSArIDEpO1xuICAgIGlmIChyb2xsaW5nLnVuaXQgPT09IFwibVwiKSBzdGFydCA9IGFkZE1vbnRoc0lTTyhlbmQsIC1yb2xsaW5nLm4pO1xuICAgIGlmIChyb2xsaW5nLnVuaXQgPT09IFwieVwiKSB7XG4gICAgICBjb25zdCBlID0gbmV3IERhdGUoZW5kICsgXCJUMDA6MDA6MDAuMDAwWlwiKTtcbiAgICAgIHN0YXJ0ID0gdG9JU08obmV3IERhdGUoRGF0ZS5VVEMoZS5nZXRVVENGdWxsWWVhcigpIC0gcm9sbGluZy5uLCBlLmdldFVUQ01vbnRoKCksIGUuZ2V0VVRDRGF0ZSgpKSkpO1xuICAgIH1cbiAgICBpZiAobmV3IERhdGUoc3RhcnQpID4gbmV3IERhdGUoZW5kKSkgW3N0YXJ0LCBlbmRdID0gW2VuZCwgc3RhcnRdO1xuICAgIHJldHVybiB7IHN0YXJ0LCBlbmQgfTtcbiAgfVxuXG4gIC8vIDQpIERFRkFVTFQ6IHVzZSBzZWxlY3RlZE1vbnRoIGZyb20gbGVmdCBwYW5lbCAoZnVsbCBtb250aCk7IGlmIG5vdCBnaXZlbiwgdXNlIGN1cnJlbnQgbW9udGggdW50aWwgXCJ0b2RheVwiXG4gIGlmIChzZWxlY3RlZE1vbnRoKSB7XG4gICAgY29uc3QgeSA9IHBhcnNlSW50KHNlbGVjdGVkTW9udGguc2xpY2UoMCw0KSwxMCk7XG4gICAgY29uc3QgbTAgPSBwYXJzZUludChzZWxlY3RlZE1vbnRoLnNsaWNlKDUsNyksMTApIC0gMTtcbiAgICByZXR1cm4geyBzdGFydDogc3RhcnRPZk1vbnRoVVRDKHksIG0wKSwgZW5kOiBlbmRPZk1vbnRoVVRDKHksIG0wKSB9O1xuICB9XG4gIGNvbnN0IHRvZGF5ID0gdG9kYXlJblRaKHR6KTtcbiAgY29uc3QgeSA9IHBhcnNlSW50KHRvZGF5LnNsaWNlKDAsNCksMTApO1xuICBjb25zdCBtMCA9IHBhcnNlSW50KHRvZGF5LnNsaWNlKDUsNyksMTApIC0gMTtcbiAgcmV0dXJuIHsgc3RhcnQ6IHN0YXJ0T2ZNb250aFVUQyh5LCBtMCksIGVuZDogdG9kYXkgfTtcbn1cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PSBBR0dSRUdBVElPTiA9PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5jb25zdCBpblJhbmdlID0gKGlzbzogc3RyaW5nLCByOiBSYW5nZSkgPT4gaXNvID49IHIuc3RhcnQgJiYgaXNvIDw9IHIuZW5kO1xuXG5mdW5jdGlvbiBmaWx0ZXJCeVJhbmdlKGFsbDogYW55W10sIHI6IFJhbmdlKSB7XG4gIHJldHVybiBhbGwuZmlsdGVyKGUgPT4gaW5SYW5nZShTdHJpbmcoZS5kYXRlKS5zbGljZSgwLDEwKSwgcikpO1xufVxuZnVuY3Rpb24gZGFpbHlTZXJpZXMoZXhwZW5zZXM6IGFueVtdLCByOiBSYW5nZSkge1xuICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKHIuc3RhcnQgKyBcIlQwMDowMDowMC4wMDBaXCIpO1xuICBjb25zdCBlbmQgPSBuZXcgRGF0ZShyLmVuZCArIFwiVDAwOjAwOjAwLjAwMFpcIik7XG4gIGNvbnN0IGRheXMgPSBNYXRoLm1heCgxLCBNYXRoLnJvdW5kKCgrZW5kIC0gK3N0YXJ0KSAvIE1TX0RBWSkgKyAxKTtcbiAgY29uc3QgbWFwID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXlzOyBpKyspIHtcbiAgICBtYXAuc2V0KHRvSVNPKG5ldyBEYXRlKERhdGUuVVRDKHN0YXJ0LmdldFVUQ0Z1bGxZZWFyKCksIHN0YXJ0LmdldFVUQ01vbnRoKCksIHN0YXJ0LmdldFVUQ0RhdGUoKSArIGkpKSksIDApO1xuICB9XG4gIGZvciAoY29uc3QgZSBvZiBleHBlbnNlcykge1xuICAgIGNvbnN0IGsgPSBTdHJpbmcoZS5kYXRlKS5zbGljZSgwLCAxMCk7XG4gICAgaWYgKG1hcC5oYXMoaykpIG1hcC5zZXQoaywgKG1hcC5nZXQoaykgfHwgMCkgKyBlLmFtb3VudCk7XG4gIH1cbiAgcmV0dXJuIEFycmF5LmZyb20obWFwLmVudHJpZXMoKSkubWFwKChbZGF0ZSwgYW1vdW50XSkgPT4gKHsgZGF0ZSwgYW1vdW50IH0pKTtcbn1cbmZ1bmN0aW9uIHdlZWtkYXlCcmVha2Rvd24oZXhwZW5zZXM6IGFueVtdLCByOiBSYW5nZSkge1xuICBjb25zdCB0b3RhbHMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiA3IH0sICgpID0+IDApO1xuICBmb3IgKGNvbnN0IGUgb2YgZXhwZW5zZXMpIHtcbiAgICBjb25zdCBrID0gU3RyaW5nKGUuZGF0ZSkuc2xpY2UoMCwxMCk7XG4gICAgaWYgKGluUmFuZ2UoaywgcikpIHtcbiAgICAgIGNvbnN0IHdkID0gbmV3IERhdGUoayArIFwiVDAwOjAwOjAwLjAwMFpcIikuZ2V0VVRDRGF5KCk7XG4gICAgICB0b3RhbHNbd2RdICs9IGUuYW1vdW50O1xuICAgIH1cbiAgfVxuICBjb25zdCBsYWJlbHMgPSBbXCJTdW5cIixcIk1vblwiLFwiVHVlXCIsXCJXZWRcIixcIlRodVwiLFwiRnJpXCIsXCJTYXRcIl07XG4gIHJldHVybiB0b3RhbHMubWFwKChhbW91bnQsIGkpID0+ICh7IHdlZWtkYXk6IGxhYmVsc1tpXSwgYW1vdW50IH0pKTtcbn1cbmZ1bmN0aW9uIHRvcENhdHMoZXhwZW5zZXM6IGFueVtdKSB7XG4gIGNvbnN0IGJ5Q2F0OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gIGxldCB0b3RhbCA9IDA7XG4gIGZvciAoY29uc3QgZSBvZiBleHBlbnNlcykge1xuICAgIHRvdGFsICs9IGUuYW1vdW50O1xuICAgIGNvbnN0IGtleSA9IGUuY2F0ZWdvcnkgfHwgXCJPdGhlclwiO1xuICAgIGJ5Q2F0W2tleV0gPSAoYnlDYXRba2V5XSB8fCAwKSArIGUuYW1vdW50O1xuICB9XG4gIGNvbnN0IHNvcnRlZCA9IE9iamVjdC5lbnRyaWVzKGJ5Q2F0KS5zb3J0KChhLGIpPT5iWzFdLWFbMV0pO1xuICByZXR1cm4geyB0b3RhbCwgc29ydGVkLCB0b3A6IHNvcnRlZFswXSBhcyBbc3RyaW5nLCBudW1iZXJdIHwgdW5kZWZpbmVkIH07XG59XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT0gQ0FURUdPUlkgSU5GRVJFTkNFID09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbmZ1bmN0aW9uIGluZmVyQ2F0ZWdvcnkoZGVzYzogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgZCA9IChkZXNjfHxcIlwiKS50b0xvd2VyQ2FzZSgpO1xuICBpZiAoL2Zvb2R8Y29mZmVlfGx1bmNofGRpbm5lcnxicmVha2Zhc3R8Z3JvY2VyLy50ZXN0KGQpKSByZXR1cm4gXCJGb29kXCI7XG4gIGlmICgvdWJlcnx0YXhpfGJ1c3xwYXRofG1ldHJvfHRyYWlufHRyYW5zaXR8cmlkZS8udGVzdChkKSkgcmV0dXJuIFwiVHJhbnNpdFwiO1xuICBpZiAoL25ldGZsaXh8c3BvdGlmeXxzdWJzY3JpcHRpb258c3VzY3JpcC8udGVzdChkKSkgcmV0dXJuIFwiU3Vic2NyaXB0aW9uc1wiO1xuICBpZiAoL3JlbnR8YmlsbHxlbGVjdHJpY3x3YXRlcnxpbnRlcm5ldHx1dGlsaXR5fHNlcnZpY2lvc3xsdXp8YWd1YS8udGVzdChkKSkgcmV0dXJuIFwiQmlsbHNcIjtcbiAgaWYgKC9jbG90aHxzaGlydHxwYW50fHNob2V8ZHJlc3N8c2hvcHxyb3BhfHphcGF0b3N8dGllbmRhLy50ZXN0KGQpKSByZXR1cm4gXCJTaG9wcGluZ1wiO1xuICByZXR1cm4gXCJPdGhlclwiO1xufVxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09IEFNT1VOVCAmIERBVEUgRVhUUkFDVElPTiA9PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5jb25zdCBleHRyYWN0QW1vdW50ID0gKHE6IHN0cmluZyk6IG51bWJlciB8IG51bGwgPT4ge1xuICBjb25zdCBsb3dlciA9IHEudG9Mb3dlckNhc2UoKTtcbiAgXG4gIC8vIFRyeSB3b3JkIG51bWJlcnM6IFwidGhvdXNhbmQgZG9sbGFyc1wiLCBcImZpdmUgaHVuZHJlZFwiLCBldGMuXG4gIGlmICgvXFxidGhvdXNhbmRcXGIvLnRlc3QobG93ZXIpKSB7XG4gICAgY29uc3QgbnVtTWF0Y2ggPSBsb3dlci5tYXRjaCgvXFxiKG9uZXx0d298dGhyZWV8Zm91cnxmaXZlfHNpeHxzZXZlbnxlaWdodHxuaW5lfHRlbilcXHMrdGhvdXNhbmQvaSk7XG4gICAgY29uc3QgbXVsdGlwbGllciA9IG51bU1hdGNoID8gcGFyc2VXb3JkTnVtYmVyKG51bU1hdGNoWzFdKSA6IDE7XG4gICAgcmV0dXJuIG11bHRpcGxpZXIgKiAxMDAwO1xuICB9XG4gIFxuICBpZiAoL1xcYmh1bmRyZWRcXGIvLnRlc3QobG93ZXIpKSB7XG4gICAgY29uc3QgbnVtTWF0Y2ggPSBsb3dlci5tYXRjaCgvXFxiKG9uZXx0d298dGhyZWV8Zm91cnxmaXZlfHNpeHxzZXZlbnxlaWdodHxuaW5lfHRlbilcXHMraHVuZHJlZC9pKTtcbiAgICBjb25zdCBtdWx0aXBsaWVyID0gbnVtTWF0Y2ggPyBwYXJzZVdvcmROdW1iZXIobnVtTWF0Y2hbMV0pIDogMTtcbiAgICByZXR1cm4gbXVsdGlwbGllciAqIDEwMDtcbiAgfVxuICBcbiAgLy8gVHJ5IG51bWVyaWM6IFwiMTAwXCIsIFwiJDUwXCIsIFwiMjAgZG9sbGFyc1wiXG4gIGNvbnN0IG0gPSBxLm1hdGNoKC8oPzpcXCQ/XFxzKikoXFxkKyg/OlxcLlxcZCspPykoPzpcXHMqXFwkKT8oPzpcXHMqKD86ZG9sbGFycz98ZMOzbGFyZXN8ZG9sYXJlcykpPy9pKTtcbiAgcmV0dXJuIG0gPyBwYXJzZUZsb2F0KG1bMV0pIDogbnVsbDtcbn07XG5cbmNvbnN0IHBhcnNlV29yZE51bWJlciA9ICh3b3JkOiBzdHJpbmcpOiBudW1iZXIgPT4ge1xuICBjb25zdCBtYXA6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7XG4gICAgb25lOiAxLCB0d286IDIsIHRocmVlOiAzLCBmb3VyOiA0LCBmaXZlOiA1LFxuICAgIHNpeDogNiwgc2V2ZW46IDcsIGVpZ2h0OiA4LCBuaW5lOiA5LCB0ZW46IDEwLFxuICAgIGVsZXZlbjogMTEsIHR3ZWx2ZTogMTIsIHRoaXJ0ZWVuOiAxMywgZm91cnRlZW46IDE0LCBmaWZ0ZWVuOiAxNSxcbiAgICBzaXh0ZWVuOiAxNiwgc2V2ZW50ZWVuOiAxNywgZWlnaHRlZW46IDE4LCBuaW5ldGVlbjogMTksXG4gICAgdHdlbnR5OiAyMCwgdGhpcnR5OiAzMCwgZm9ydHk6IDQwLCBmaWZ0eTogNTAsXG4gICAgc2l4dHk6IDYwLCBzZXZlbnR5OiA3MCwgZWlnaHR5OiA4MCwgbmluZXR5OiA5MFxuICB9O1xuICByZXR1cm4gbWFwW3dvcmQudG9Mb3dlckNhc2UoKV0gfHwgMTtcbn07XG5cbi8vIGlmIGNsaWVudCBzZW5kcyBleGFjdCBkYXRlLCB0cnVzdCBpdDsgZWxzZTogdXNlIHRvZGF5J3MgZGF0ZVxuZnVuY3Rpb24gY2hvb3NlRXhwZW5zZURhdGUoYm9keURhdGU/OiBzdHJpbmcsIHNlbGVjdGVkTW9udGg/OiBzdHJpbmcsIHR6Pzogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKGJvZHlEYXRlICYmIC9eXFxkezR9LVxcZHsyfS1cXGR7Mn0kLy50ZXN0KGJvZHlEYXRlKSkgcmV0dXJuIGJvZHlEYXRlO1xuXG4gIC8vIEFsd2F5cyB1c2UgdG9kYXkncyBkYXRlIHdoZW4gbm8gZXhwbGljaXQgZGF0ZSBpcyBwcm92aWRlZFxuICByZXR1cm4gdG9kYXlJblRaKHR6KTtcbn1cblxuLy8gUGFyc2UgXCJTZXB0ZW1iZXIgMTAgdG8gMTdcIiwgXCJTZXAgMTAtMTdcIiwgXCIxMOKAkzE3IFNlcFwiLCBcIjA5LzEwIHRvIDA5LzE3XCIsIGV0Yy5cbi8vIFJldHVybnMgYW4gaW5jbHVzaXZlIElTTyByYW5nZSBvciBudWxsLlxuZnVuY3Rpb24gcGFyc2VXYXRjaERhdGVSYW5nZShxOiBzdHJpbmcsIHNlbGVjdGVkTW9udGg/OiBzdHJpbmcsIHR6Pzogc3RyaW5nKTogeyBzdGFydDogc3RyaW5nOyBlbmQ6IHN0cmluZyB9IHwgbnVsbCB7XG4gIGNvbnN0IHMgPSBxLnRvTG93ZXJDYXNlKCk7XG5cbiAgLy8gMSkgTW9udGgtbmFtZSArIGRheSB0byBkYXk6IFwic2VwdGVtYmVyIDEwIHRvIDE3XCIgLyBcInNlcCAxMC0xN1wiXG4gIGxldCBtID0gcy5tYXRjaCgvXFxiKFthLXrDocOpw63Ds8O6w7zDsV17Myx9KVxccysoXFxkezEsMn0pXFxzKig/OnRvfC184oCTKVxccyooXFxkezEsMn0pXFxiL2kpO1xuICBpZiAobSkge1xuICAgIGNvbnN0IG1pID0gbW9udGhOYW1lVG9JbmRleChtWzFdKTtcbiAgICBpZiAobWkgIT0gbnVsbCkge1xuICAgICAgY29uc3QgeyB5ZWFyIH0gPSByZXNvbHZlWWVhckZvck1vbnRoKG1pLCBzZWxlY3RlZE1vbnRoLCB0eik7XG4gICAgICBjb25zdCBkMSA9IGNsYW1wRGF5KHllYXIsIG1pLCBwYXJzZUludChtWzJdLCAxMCkpO1xuICAgICAgY29uc3QgZDIgPSBjbGFtcERheSh5ZWFyLCBtaSwgcGFyc2VJbnQobVszXSwgMTApKTtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gdG9JU08obmV3IERhdGUoRGF0ZS5VVEMoeWVhciwgbWksIE1hdGgubWluKGQxLCBkMikpKSk7XG4gICAgICBjb25zdCBlbmQgPSB0b0lTTyhuZXcgRGF0ZShEYXRlLlVUQyh5ZWFyLCBtaSwgTWF0aC5tYXgoZDEsIGQyKSkpKTtcbiAgICAgIHJldHVybiB7IHN0YXJ0LCBlbmQgfTtcbiAgICB9XG4gIH1cblxuICAvLyAyKSBEYXkgcmFuZ2UgKyBtb250aC1uYW1lIGF0IGVuZDogXCIxMCB0byAxNyBzZXB0ZW1iZXJcIlxuICBtID0gcy5tYXRjaCgvXFxiKFxcZHsxLDJ9KVxccyooPzp0b3wtfOKAkylcXHMqKFxcZHsxLDJ9KVxccysoW2EtesOhw6nDrcOzw7rDvMOxXXszLH0pXFxiL2kpO1xuICBpZiAobSkge1xuICAgIGNvbnN0IG1pID0gbW9udGhOYW1lVG9JbmRleChtWzNdKTtcbiAgICBpZiAobWkgIT0gbnVsbCkge1xuICAgICAgY29uc3QgeyB5ZWFyIH0gPSByZXNvbHZlWWVhckZvck1vbnRoKG1pLCBzZWxlY3RlZE1vbnRoLCB0eik7XG4gICAgICBjb25zdCBkMSA9IGNsYW1wRGF5KHllYXIsIG1pLCBwYXJzZUludChtWzFdLCAxMCkpO1xuICAgICAgY29uc3QgZDIgPSBjbGFtcERheSh5ZWFyLCBtaSwgcGFyc2VJbnQobVsyXSwgMTApKTtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gdG9JU08obmV3IERhdGUoRGF0ZS5VVEMoeWVhciwgbWksIE1hdGgubWluKGQxLCBkMikpKSk7XG4gICAgICBjb25zdCBlbmQgPSB0b0lTTyhuZXcgRGF0ZShEYXRlLlVUQyh5ZWFyLCBtaSwgTWF0aC5tYXgoZDEsIGQyKSkpKTtcbiAgICAgIHJldHVybiB7IHN0YXJ0LCBlbmQgfTtcbiAgICB9XG4gIH1cblxuICAvLyAzKSBNb250aCBkYXkgdG8gbW9udGggZGF5OiBcImF1ZyAxIHRvIGF1ZyA3XCIgLyBcImF1Z3VzdCAxIHRvIGF1Z3VzdCA3XCJcbiAgbSA9IHMubWF0Y2goL1xcYihbYS16w6HDqcOtw7PDusO8w7FdezMsfSlcXHMrKFxcZHsxLDJ9KVxccyooPzp0b3wtfOKAkylcXHMqKFthLXrDocOpw63Ds8O6w7zDsV17Myx9KVxccysoXFxkezEsMn0pXFxiL2kpO1xuICBpZiAobSkge1xuICAgIGNvbnN0IG1pMSA9IG1vbnRoTmFtZVRvSW5kZXgobVsxXSk7XG4gICAgY29uc3QgbWkyID0gbW9udGhOYW1lVG9JbmRleChtWzNdKTtcbiAgICBpZiAobWkxICE9IG51bGwgJiYgbWkyICE9IG51bGwpIHtcbiAgICAgIGNvbnN0IHsgeWVhcjogeWVhcjEgfSA9IHJlc29sdmVZZWFyRm9yTW9udGgobWkxLCBzZWxlY3RlZE1vbnRoLCB0eik7XG4gICAgICBjb25zdCB7IHllYXI6IHllYXIyIH0gPSByZXNvbHZlWWVhckZvck1vbnRoKG1pMiwgc2VsZWN0ZWRNb250aCwgdHopO1xuICAgICAgY29uc3QgZDEgPSBjbGFtcERheSh5ZWFyMSwgbWkxLCBwYXJzZUludChtWzJdLCAxMCkpO1xuICAgICAgY29uc3QgZDIgPSBjbGFtcERheSh5ZWFyMiwgbWkyLCBwYXJzZUludChtWzRdLCAxMCkpO1xuICAgICAgY29uc3Qgc3RhcnQgPSB0b0lTTyhuZXcgRGF0ZShEYXRlLlVUQyh5ZWFyMSwgbWkxLCBkMSkpKTtcbiAgICAgIGNvbnN0IGVuZCA9IHRvSVNPKG5ldyBEYXRlKERhdGUuVVRDKHllYXIyLCBtaTIsIGQyKSkpO1xuICAgICAgcmV0dXJuIHsgc3RhcnQ6IHN0YXJ0IDwgZW5kID8gc3RhcnQgOiBlbmQsIGVuZDogZW5kID4gc3RhcnQgPyBlbmQgOiBzdGFydCB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIDQpIE51bWVyaWMgXCJtbS9kZCB0byBtbS9kZFwiIChvciBkZC9tbSBiYXNlZCBvbiBoZXVyaXN0aWMgaXMgb3ZlcmtpbGw7IGFzc3VtZSBtbS9kZClcbiAgbSA9IHMubWF0Y2goL1xcYihcXGR7MSwyfSlbXFwvXFwtXShcXGR7MSwyfSlcXHMqKD86dG98LXzigJMpXFxzKihcXGR7MSwyfSlbXFwvXFwtXShcXGR7MSwyfSlcXGIvKTtcbiAgaWYgKG0pIHtcbiAgICBjb25zdCB5ID0gKHNlbGVjdGVkTW9udGggfHwgdG9kYXlJblRaKHR6KSkuc2xpY2UoMCw0KTtcbiAgICBjb25zdCBtMSA9IHBhcnNlSW50KG1bMV0sMTApIC0gMSwgZDEgPSBwYXJzZUludChtWzJdLDEwKTtcbiAgICBjb25zdCBtMiA9IHBhcnNlSW50KG1bM10sMTApIC0gMSwgZDIgPSBwYXJzZUludChtWzRdLDEwKTtcbiAgICBjb25zdCBzdGFydCA9IHRvSVNPKG5ldyBEYXRlKERhdGUuVVRDKCt5LCBtMSwgZDEpKSk7XG4gICAgY29uc3QgZW5kICAgPSB0b0lTTyhuZXcgRGF0ZShEYXRlLlVUQygreSwgbTIsIGQyKSkpO1xuICAgIHJldHVybiB7IHN0YXJ0OiBzdGFydCA8IGVuZCA/IHN0YXJ0IDogZW5kLCBlbmQ6IGVuZCA+IHN0YXJ0ID8gZW5kIDogc3RhcnQgfTtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG4vLyBQaWNrIHRoZSB5ZWFyIHRvIHVzZSBmb3IgXCJTZXB0ZW1iZXIg4oCmXCIgYmFzZWQgb24gdGhlIHNlbGVjdGVkIG1vbnRoIG9yIHRvZGF5LlxuZnVuY3Rpb24gcmVzb2x2ZVllYXJGb3JNb250aChtb250aEluZGV4MDogbnVtYmVyLCBzZWxlY3RlZE1vbnRoPzogc3RyaW5nLCB0ej86IHN0cmluZyk6IHsgeWVhcjogbnVtYmVyIH0ge1xuICBpZiAoc2VsZWN0ZWRNb250aCkgcmV0dXJuIHsgeWVhcjogcGFyc2VJbnQoc2VsZWN0ZWRNb250aC5zbGljZSgwLDQpLCAxMCkgfTtcbiAgcmV0dXJuIHsgeWVhcjogcGFyc2VJbnQodG9kYXlJblRaKHR6KS5zbGljZSgwLDQpLCAxMCkgfTtcbn1cblxuZnVuY3Rpb24gY2xhbXBEYXkoeTogbnVtYmVyLCBtMDogbnVtYmVyLCBkOiBudW1iZXIpIHtcbiAgY29uc3QgZW5kID0gZW5kT2ZNb250aFVUQyh5LCBtMCk7XG4gIGNvbnN0IGxhc3QgPSBwYXJzZUludChlbmQuc2xpY2UoOCwxMCksIDEwKTtcbiAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KDEsIGQpLCBsYXN0KTtcbn1cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PSBJTlRFTlQgREVURUNUT1JTID09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbmNvbnN0IGlzQ2hhcnRJbnRlbnQgPSAocTogc3RyaW5nKSA9PlxuICAvXFxiKGNoYXJ0fGdyYXBofHRyZW5kfHBsb3R8Z3Jbw6FhXWZpY1tvYV0pXFxiL2kudGVzdChxKSB8fFxuICAvXlxccypcXGQrXFxzKltkd215XVxccypjaGFydCQvaS50ZXN0KHEpIHx8IC9eY2hhcnQkL2kudGVzdChxKTtcblxuY29uc3QgaXNNb250aGx5SW50ZW50ID0gKHE6IHN0cmluZykgPT5cbiAgLyhzdW1tYXJ5fHJlcG9ydHx0aGlzIG1vbnRofG1vbnRoKVxcYi9pLnRlc3QocSkgfHxcbiAgL1xcYihyZXN1bWVufHJlcG9ydGV8ZXN0ZVxccyttZXN8bWVzKVxcYi9pLnRlc3QocSk7XG5cbmNvbnN0IGlzWWVhcmx5SW50ZW50ID0gKHE6IHN0cmluZykgPT5cbiAgKC9cXGJ5ZWFyKGx5KT9cXGIvaS50ZXN0KHEpICYmIC8oc3VtbWFyeXxyZXBvcnR8dG90YWwpL2kudGVzdChxKSkgfHxcbiAgKC9cXGIoYSjDsXxuKW8pXFxiL2kudGVzdChxKSAmJiAvKHJlc3VtZW58cmVwb3J0ZXx0b3RhbCkvaS50ZXN0KHEpKTtcblxuY29uc3QgaXNNb3N0U3BlbnRJbnRlbnQgPSAocTogc3RyaW5nKSA9PlxuICAoL1xcYm1vc3RcXGIvaS50ZXN0KHEpICYmIC9cXGIoc3BlbnR8c3BlbmRpbmcpXFxiL2kudGVzdChxKSkgfHwgL1xcYm1bYcOhXXNcXHMrZ2FzdGFkL2kudGVzdChxKTtcblxuY29uc3QgaXNJbnNpZ2h0c0ludGVudCA9IChxOiBzdHJpbmcpID0+IC8oaW5zaWdodHxhbmFseXNpc3xhbmFseXxpZGVhcykvaS50ZXN0KHEpO1xuXG4vLyBBZGQsIERlbGV0ZSwgR29hbCwgV2F0Y2hcbmNvbnN0IGlzQWRkSW50ZW50ID0gKHE6IHN0cmluZykgPT4ge1xuICAvLyBEb24ndCBtYXRjaCBpZiBpdCdzIGNsZWFybHkgYSBcIm1vc3Qgc3BlbnRcIiBxdWVyeVxuICBpZiAoL1xcYihtb3N0fHRvcHxoaWdoZXN0fGJpZ2dlc3R8bGFyZ2VzdClcXGIvaS50ZXN0KHEpKSByZXR1cm4gZmFsc2U7XG4gIC8vIERvbid0IG1hdGNoIGlmIGl0J3MgY2xlYXJseSBhbiBpbnNpZ2h0cy9zdW1tYXJ5IHF1ZXJ5XG4gIGlmICgvXFxiKGluc2lnaHR8c3VtbWFyeXxyZXBvcnQpXFxiL2kudGVzdChxKSkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gL1xcYihhZGR8c3BlbnR8c3BlbmR8YWdyZWdhfGHDsWFkZXxhbmFkZXxzdW1hcnxyZWdpc3RyYXJ8YWRkIGV4cGVuc2V8Z2FzdGV8Z2FzdMOpKVxcYi9pLnRlc3QocSkgfHwgL15cXHMqXFwkP1xcZC8udGVzdChxKTtcbn07XG5jb25zdCBpc0RlbGV0ZUludGVudCA9IChxOiBzdHJpbmcpID0+IC9cXGIoZGVsZXRlfHJlbW92ZXxlbGltaW5hcnxib3JyYXJ8cXVpdGFyKVxcYi9pLnRlc3QocSk7XG5jb25zdCBpc0dvYWxJbnRlbnQgPSAocTogc3RyaW5nKSA9PiAvXFxiKGdvYWx8bWV0YSlcXGIvaS50ZXN0KHEpICYmIC9cXGIoc2V0fGNyZWF0ZXxjcmVhcnxlc3RhYmxlY2VyfGFkZHxhZ3JlZ2F8YcOxYWRlfGFuYWRlKVxcYi9pLnRlc3QocSk7XG5jb25zdCBpc1dhdGNoSW50ZW50ID0gKHE6IHN0cmluZykgPT4gL1xcYih3YXRjaHxhbGVydHxub3RpZnl8YWxlcnRhfGF2aXNvKVxcYi9pLnRlc3QocSk7XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT0gUk9VVEUgPT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCB1c2VyID0gZ2V0Q3VycmVudFVzZXIoKTtcbiAgaWYgKCF1c2VyKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJVbmF1dGhvcml6ZWRcIiB9LCB7IHN0YXR1czogNDAxIH0pO1xuXG4gIGNvbnN0IGJvZHkgPSAoYXdhaXQgcmVxLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKSkgfHwge307XG4gIGNvbnN0IHF1ZXJ5OiBzdHJpbmcgPSBTdHJpbmcoYm9keS5xdWVyeSB8fCBcIlwiKS50cmltKCk7XG4gIGNvbnN0IHNlbGVjdGVkTW9udGg6IHN0cmluZyB8IHVuZGVmaW5lZCA9IGJvZHkubW9udGg7IC8vIFwiWVlZWS1NTVwiIGZyb20gbGVmdCBwYW5lbFxuICBjb25zdCBleHBsaWNpdERhdGU6IHN0cmluZyB8IHVuZGVmaW5lZCA9IGJvZHkuZGF0ZTsgICAvLyBcIllZWVktTU0tRERcIiAob3B0aW9uYWwgZXhhY3QpXG4gIGNvbnN0IHR6OiBzdHJpbmcgfCB1bmRlZmluZWQgPSBib2R5LnR6OyAgICAgICAgICAgICAgIC8vIGUuZy4gXCJBbWVyaWNhL05ld19Zb3JrXCIgKG9wdGlvbmFsKVxuXG4gIGNvbnN0IGFsbEV4cGVuc2VzID0gZGIubGlzdEV4cGVuc2VzKHVzZXIuaWQsIHt9KTtcblxuICAvKiAtLS0tLS0tLS0tIENIQVJUIC0tLS0tLS0tLS0gKi9cbiAgaWYgKGlzQ2hhcnRJbnRlbnQocXVlcnkpKSB7XG4gICAgY29uc3QgcmFuZ2UgPSByZXNvbHZlUmFuZ2UocXVlcnksIHNlbGVjdGVkTW9udGgsIHR6KTtcbiAgICAvLyBvcHRpb25hbCBjYXRlZ29yeTogXCJjaGFydCBsYXN0IHdlZWsgb24gZm9vZFwiXG4gICAgY29uc3QgY2F0TWF0Y2ggPSBxdWVyeS5tYXRjaCgvXFxiKG9ufGZvcnxlbnxwYXJhKVxccysoW2EtesOhw6nDrcOzw7rDvMOxXVtcXHdcXHMtXSopJC9pKTtcbiAgICBjb25zdCBjYXQgPSBjYXRNYXRjaCA/IGNhdE1hdGNoWzJdLnRyaW0oKSA6IG51bGw7XG5cbiAgICBjb25zdCB3aXRoaW4gPSBmaWx0ZXJCeVJhbmdlKGFsbEV4cGVuc2VzLCByYW5nZSk7XG4gICAgY29uc3QgZmlsdGVyZWQgPSBjYXRcbiAgICAgID8gd2l0aGluLmZpbHRlcigoZTogYW55KSA9PlxuICAgICAgICAgIGUuY2F0ZWdvcnkudG9Mb3dlckNhc2UoKSA9PT0gY2F0LnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBlLmRlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoY2F0LnRvTG93ZXJDYXNlKCkpXG4gICAgICAgIClcbiAgICAgIDogd2l0aGluO1xuXG4gICAgY29uc3Qgc2VyaWVzID0gZGFpbHlTZXJpZXMoZmlsdGVyZWQsIHJhbmdlKTtcbiAgICBjb25zdCB3ZWVrZGF5ID0gd2Vla2RheUJyZWFrZG93bihmaWx0ZXJlZCwgcmFuZ2UpO1xuICAgIGNvbnN0IHRvdGFsID0gZmlsdGVyZWQucmVkdWNlKChzOiBudW1iZXIsIGU6IGFueSkgPT4gcyArIGUuYW1vdW50LCAwKTtcbiAgICBjb25zdCBkYXlzID0gTWF0aC5tYXgoMSwgTWF0aC5yb3VuZCgoK25ldyBEYXRlKHJhbmdlLmVuZCkgLSArbmV3IERhdGUocmFuZ2Uuc3RhcnQpKSAvIE1TX0RBWSkgKyAxKTtcbiAgICBjb25zdCBhdmcgPSB0b3RhbCAvIGRheXM7XG4gICAgY29uc3QgcGVhayA9IHNlcmllcy5yZWR1Y2UoKG0sIHApID0+IChwLmFtb3VudCA+IG0uYW1vdW50ID8gcCA6IG0pLCB7IGRhdGU6IHJhbmdlLnN0YXJ0LCBhbW91bnQ6IDAgfSk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgY2hhcnQ6IHtcbiAgICAgICAgcmFuZ2UsXG4gICAgICAgIGNhdGVnb3J5OiBjYXQgfHwgXCJBbGxcIixcbiAgICAgICAgc3VtbWFyeTogeyB0b3RhbCwgYXZnLCBwZWFrIH0sXG4gICAgICAgIHNlcmllcywgICAgICAgICAgICAgICAgICAgLy8gW3sgZGF0ZSwgYW1vdW50IH1dXG4gICAgICAgIHdlZWtkYXlCcmVha2Rvd246IHdlZWtkYXkgLy8gW3sgd2Vla2RheSwgYW1vdW50IH1dXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKiAtLS0tLS0tLS0tIEFERCBFWFBFTlNFIC0tLS0tLS0tLS0gKi9cbiAgaWYgKGlzQWRkSW50ZW50KHF1ZXJ5KSkge1xuICAgIGNvbnN0IGFtb3VudCA9IGV4dHJhY3RBbW91bnQocXVlcnkpO1xuICAgIGlmICghYW1vdW50KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlczogW1wi4p2MIFBsZWFzZSBpbmNsdWRlIGFuIGFtb3VudC4gRXhhbXBsZTogJ0FkZCAxMiBjb2ZmZWUnIG9yICckMjAgZm9yIGdyb2NlcmllcycuXCJdIH0pO1xuICAgIH1cblxuICAgIC8vIEV4dHJhY3QgZGF0ZSBmcm9tIHF1ZXJ5IEZJUlNUIChiZWZvcmUgZGVzY3JpcHRpb24gZXh0cmFjdGlvbilcbiAgICBsZXQgZGF0ZVRvVXNlID0gZXhwbGljaXREYXRlO1xuICAgIFxuICAgIGlmICghZGF0ZVRvVXNlKSB7XG4gICAgICAvLyBUcnkgc2xhc2ggZGF0ZSBmb3JtYXQ6IE1NL0REL1lZWVkgb3IgREQvTU0vWVlZWVxuICAgICAgY29uc3Qgc2xhc2hEYXRlTWF0Y2ggPSBxdWVyeS5tYXRjaCgvXFxiKFxcZHsxLDJ9KVxcLyhcXGR7MSwyfSlcXC8oXFxkezR9KVxcYi8pO1xuICAgICAgaWYgKHNsYXNoRGF0ZU1hdGNoKSB7XG4gICAgICAgIGNvbnN0IHAxID0gcGFyc2VJbnQoc2xhc2hEYXRlTWF0Y2hbMV0sIDEwKTtcbiAgICAgICAgY29uc3QgcDIgPSBwYXJzZUludChzbGFzaERhdGVNYXRjaFsyXSwgMTApO1xuICAgICAgICBjb25zdCB5ZWFyID0gc2xhc2hEYXRlTWF0Y2hbM107XG4gICAgICAgIFxuICAgICAgICAvLyBBc3N1bWUgTU0vREQvWVlZWSBmb3JtYXQgKFVTIHN0YW5kYXJkKVxuICAgICAgICBjb25zdCBtb250aCA9IHAxLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICAgICAgY29uc3QgZGF5ID0gcDIudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgICAgICBkYXRlVG9Vc2UgPSBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1gO1xuICAgICAgICBjb25zb2xlLmxvZyhgW0V4cGVuc2VdIFBhcnNlZCBzbGFzaCBkYXRlIFwiJHtzbGFzaERhdGVNYXRjaFswXX1cIiBhcyAke2RhdGVUb1VzZX1gKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgaWYgKCFkYXRlVG9Vc2UpIHtcbiAgICAgIC8vIFRyeSBtb250aCArIGRheSArIHllYXIgZm9ybWF0OiBcIm5vdiAxLCAyMDI1XCIsIFwibm92ZW1iZXIgMSAyMDI1XCIsIFwic2VwdCAyMywyMDI1XCIgKHdpdGggb3Igd2l0aG91dCBzcGFjZSBhZnRlciBjb21tYSlcbiAgICAgIGNvbnN0IG1vbnRoRGF5WWVhck1hdGNoID0gcXVlcnkubWF0Y2goL1xcYig/Om9uXFxzKyk/KFthLXrDocOpw63Ds8O6w7zDsV0rKVxccysoXFxkezEsMn0pKD86c3R8bmR8cmR8dGgpPyw/XFxzKihcXGR7NH0pP1xcYi9pKTtcbiAgICAgIGlmIChtb250aERheVllYXJNYXRjaCkge1xuICAgICAgICBjb25zdCBtb250aE5hbWUgPSBtb250aERheVllYXJNYXRjaFsxXTtcbiAgICAgICAgY29uc3QgZGF5ID0gcGFyc2VJbnQobW9udGhEYXlZZWFyTWF0Y2hbMl0sIDEwKTtcbiAgICAgICAgY29uc3QgeWVhciA9IG1vbnRoRGF5WWVhck1hdGNoWzNdID8gcGFyc2VJbnQobW9udGhEYXlZZWFyTWF0Y2hbM10sIDEwKSA6IChzZWxlY3RlZE1vbnRoID8gcGFyc2VJbnQoc2VsZWN0ZWRNb250aC5zbGljZSgwLDQpLCAxMCkgOiBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkpO1xuICAgICAgICBjb25zdCBtb250aEluZGV4ID0gbW9udGhOYW1lVG9JbmRleChtb250aE5hbWUpO1xuICAgICAgICBjb25zb2xlLmxvZyhgW0V4cGVuc2VdIE1hdGNoZWQ6IFwiJHttb250aERheVllYXJNYXRjaFswXX1cIiwgbW9udGg9XCIke21vbnRoTmFtZX1cIiwgbW9udGhJbmRleD0ke21vbnRoSW5kZXh9LCBkYXk9JHtkYXl9LCB5ZWFyPSR7eWVhcn1gKTtcbiAgICAgICAgaWYgKG1vbnRoSW5kZXggIT09IG51bGwpIHtcbiAgICAgICAgICBjb25zdCBjbGFtcGVkRGF5ID0gY2xhbXBEYXkoeWVhciwgbW9udGhJbmRleCwgZGF5KTtcbiAgICAgICAgICBkYXRlVG9Vc2UgPSB0b0lTTyhuZXcgRGF0ZShEYXRlLlVUQyh5ZWFyLCBtb250aEluZGV4LCBjbGFtcGVkRGF5KSkpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBbRXhwZW5zZV0gUGFyc2VkIFwiJHttb250aERheVllYXJNYXRjaFswXX1cIiBhcyAke2RhdGVUb1VzZX0gKG1vbnRoSW5kZXg9JHttb250aEluZGV4fSwgY2xhbXBlZERheT0ke2NsYW1wZWREYXl9KWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBbRXhwZW5zZV0gRVJST1I6IG1vbnRoTmFtZVRvSW5kZXggcmV0dXJuZWQgbnVsbCBmb3IgXCIke21vbnRoTmFtZX1cImApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmICghZGF0ZVRvVXNlKSB7XG4gICAgICAvLyBUcnkgbW9udGggbmFtZSBmb3JtYXQ6IFwiaW4gQXVndXN0IDIwMjVcIiwgXCJpbiBtYXlcIlxuICAgICAgY29uc3QgbW9udGhZZWFyTWF0Y2ggPSBxdWVyeS5tYXRjaCgvXFxiKD86aW58b24pXFxzKyhbYS16w6HDqcOtw7PDusO8w7FdKylcXHMrKFxcZHs0fSlcXGIvaSk7XG4gICAgICBpZiAobW9udGhZZWFyTWF0Y2gpIHtcbiAgICAgICAgY29uc3QgbW9udGhOYW1lID0gbW9udGhZZWFyTWF0Y2hbMV07XG4gICAgICAgIGNvbnN0IHllYXIgPSBwYXJzZUludChtb250aFllYXJNYXRjaFsyXSwgMTApO1xuICAgICAgICBjb25zdCBtb250aEluZGV4ID0gbW9udGhOYW1lVG9JbmRleChtb250aE5hbWUpO1xuICAgICAgICBpZiAobW9udGhJbmRleCAhPT0gbnVsbCkge1xuICAgICAgICAgIC8vIFVzZSBsYXN0IGRheSBvZiB0aGF0IG1vbnRoXG4gICAgICAgICAgZGF0ZVRvVXNlID0gZW5kT2ZNb250aFVUQyh5ZWFyLCBtb250aEluZGV4KTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgW0V4cGVuc2VdIFBhcnNlZCBcIiR7bW9udGhZZWFyTWF0Y2hbMF19XCIgYXMgJHtkYXRlVG9Vc2V9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gRXh0cmFjdCBkZXNjcmlwdGlvbiAoYWZ0ZXIgZGF0ZSBwYXJzaW5nLCBzbyB3ZSBjYW4gcmVtb3ZlIGRhdGUgZnJvbSBkZXNjcmlwdGlvbilcbiAgICBsZXQgZGVzY3JpcHRpb24gPSBcIlwiO1xuICAgIFxuICAgIC8vIFBhdHRlcm4gMTogXCJhZGQgc3dpbW1pbmcgZm9yICQxMDBcIiBvciBcImFkZCAkMTAwIGZvciBzd2ltbWluZ1wiXG4gICAgY29uc3QgZm9yTWF0Y2ggPSBxdWVyeS5tYXRjaCgvXFxiKGZvcnxwYXJhKVxccysoW15cXCRcXGRdKz8pKD86XFxzK29uXFxzK3xcXHMraW5cXHMrfCQpL2kpO1xuICAgIGlmIChmb3JNYXRjaCkge1xuICAgICAgZGVzY3JpcHRpb24gPSBmb3JNYXRjaFsyXS50cmltKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFBhdHRlcm4gMjogXCJhZGQgMTAwIHN3aW1taW5nXCIgLSBleHRyYWN0IGFmdGVyIGFtb3VudFxuICAgICAgZGVzY3JpcHRpb24gPSBxdWVyeVxuICAgICAgICAucmVwbGFjZSgvXihhZGR8YWdyZWdhfGHDsWFkZXxhbmFkZXxzdW1hcnxyZWdpc3RyYXIpXFxzKy9pLCBcIlwiKVxuICAgICAgICAucmVwbGFjZSgvXFxiKGh1bmRyZWR8dGhvdXNhbmR8bWlsbGlvbilcXHMrKD86ZG9sbGFycz98ZMOzbGFyZXN8ZG9sYXJlcyk/XFxzKi9pLCBcIlwiKVxuICAgICAgICAucmVwbGFjZSgvXlxcJD9cXHMqXFxkKyg/OlxcLlxcZCspP1xccyooPzpcXCQpP1xccyooPzpkb2xsYXJzP3xkw7NsYXJlc3xkb2xhcmVzKT9cXHMqL2ksIFwiXCIpXG4gICAgICAgIC5yZXBsYWNlKC9cXHMrb25cXHMrW2EtesOhw6nDrcOzw7rDvMOxXStcXHMrXFxkezEsMn0sP1xccypcXGR7NH0vaSwgXCJcIilcbiAgICAgICAgLnJlcGxhY2UoL1xccytpblxccytbYS16w6HDqcOtw7PDusO8w7FdK1xccytcXGR7NH0vaSwgXCJcIilcbiAgICAgICAgLnJlcGxhY2UoL1xccytcXGR7MSwyfVxcL1xcZHsxLDJ9XFwvXFxkezR9L2ksIFwiXCIpXG4gICAgICAgIC50cmltKCk7XG4gICAgfVxuICAgIFxuICAgIGlmICghZGVzY3JpcHRpb24pIGRlc2NyaXB0aW9uID0gXCJFeHBlbnNlXCI7XG4gICAgXG4gICAgLy8gY2hvb3NlIGRhdGUgaW5zaWRlIHNlbGVjdGVkTW9udGggaWYgcHJvdmlkZWRcbiAgICBjb25zdCBkYXRlID0gY2hvb3NlRXhwZW5zZURhdGUoZGF0ZVRvVXNlLCBzZWxlY3RlZE1vbnRoLCB0eik7XG4gICAgY29uc29sZS5sb2coYFtFeHBlbnNlXSBGaW5hbCBkYXRlOiAke2RhdGV9IChkYXRlVG9Vc2U6ICR7ZGF0ZVRvVXNlfSwgc2VsZWN0ZWRNb250aDogJHtzZWxlY3RlZE1vbnRofSwgZXhwbGljaXREYXRlOiAke2V4cGxpY2l0RGF0ZX0pYCk7XG4gICAgY29uc3QgY2F0ZWdvcnkgPSBpbmZlckNhdGVnb3J5KGRlc2NyaXB0aW9uKTtcblxuICAgIGNvbnN0IGUgPSBkYi5jcmVhdGVFeHBlbnNlKHtcbiAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgIGFtb3VudCxcbiAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgY2F0ZWdvcnksXG4gICAgICBkYXRlXG4gICAgfSk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgbWVzc2FnZXM6IFtg4pyFIEFkZGVkOiAke2UuZGVzY3JpcHRpb259IOKAkyAkJHtlLmFtb3VudC50b0ZpeGVkKDIpfSAoJHtlLmNhdGVnb3J5fSkgb24gJHtlLmRhdGV9YF0sXG4gICAgICBlZmZlY3RzOiBbeyB0eXBlOiBcImV4cGVuc2VfY3JlYXRlZFwiLCBpZDogZS5pZCB9XVxuICAgIH0pO1xuICB9XG5cbiAgLyogLS0tLS0tLS0tLSBERUxFVEUgV0FUQ0ggLS0tLS0tLS0tLSAqL1xuICBpZiAoaXNEZWxldGVJbnRlbnQocXVlcnkpICYmIC9cXGIod2F0Y2h8YWxlcnR8YWxlcnRhKVxcYi9pLnRlc3QocXVlcnkpKSB7XG4gICAgLy8gUGFyc2U6IFwiZGVsZXRlIHdhdGNoIHNob2VzXCIgb3IgXCJkZWxldGUgd2F0Y2ggZm9yIGZvb2RcIlxuICAgIGxldCBjYXRlZ29yeSA9IFwiXCI7XG4gICAgY29uc3QgY2F0TWF0Y2ggPSBxdWVyeS5tYXRjaCgvXFxiKHdhdGNofGFsZXJ0fGFsZXJ0YSlcXHMrKD86Zm9yXFxzKyk/KFthLXrDocOpw63Ds8O6w7zDsV1cXHcrKS9pKTtcbiAgICBpZiAoY2F0TWF0Y2gpIHtcbiAgICAgIGNhdGVnb3J5ID0gY2F0TWF0Y2hbMl07XG4gICAgfVxuXG4gICAgaWYgKCFjYXRlZ29yeSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZXM6IFtcIuKdjCBQbGVhc2Ugc3BlY2lmeSB0aGUgY2F0ZWdvcnkuIEV4YW1wbGU6ICdkZWxldGUgd2F0Y2ggZm9vZCcgb3IgJ2RlbGV0ZSB3YXRjaCBmb3Igc2hvZXMnLlwiXSB9KTtcbiAgICB9XG5cbiAgICAvLyBGaW5kIG1hdGNoaW5nIHdhdGNoXG4gICAgY29uc3QgYWxsV2F0Y2hlcyA9IGRiLmxpc3RTcGVuZGluZ1dhdGNoZXModXNlci5pZCk7XG4gICAgY29uc3QgbWF0Y2hpbmdXYXRjaCA9IGFsbFdhdGNoZXMuZmluZCgodzogYW55KSA9PiBcbiAgICAgIHcuY2F0ZWdvcnkudG9Mb3dlckNhc2UoKSA9PT0gY2F0ZWdvcnkudG9Mb3dlckNhc2UoKVxuICAgICk7XG5cbiAgICBpZiAobWF0Y2hpbmdXYXRjaCkge1xuICAgICAgZGIuZGVsZXRlU3BlbmRpbmdXYXRjaChtYXRjaGluZ1dhdGNoLmlkLCB1c2VyLmlkKTtcbiAgICAgIGNvbnN0IHBlcmlvZExhYmVsID0gbWF0Y2hpbmdXYXRjaC5wZXJpb2QgPT09IFwiY3VzdG9tXCIgJiYgKG1hdGNoaW5nV2F0Y2ggYXMgYW55KS5yYW5nZVN0YXJ0ICYmIChtYXRjaGluZ1dhdGNoIGFzIGFueSkucmFuZ2VFbmRcbiAgICAgICAgPyBgJHsobWF0Y2hpbmdXYXRjaCBhcyBhbnkpLnJhbmdlU3RhcnR9IHRvICR7KG1hdGNoaW5nV2F0Y2ggYXMgYW55KS5yYW5nZUVuZH1gXG4gICAgICAgIDogbWF0Y2hpbmdXYXRjaC5wZXJpb2QgPT09IFwid2Vla2x5XCIgPyBcIndlZWtseVwiXG4gICAgICAgIDogbWF0Y2hpbmdXYXRjaC5wZXJpb2QgPT09IFwieWVhcmx5XCIgPyBcInllYXJseVwiXG4gICAgICAgIDogXCJtb250aGx5XCI7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBtZXNzYWdlczogW2DinIUgRGVsZXRlZCB3YXRjaDogJHttYXRjaGluZ1dhdGNoLmNhdGVnb3J5fSAtICQke21hdGNoaW5nV2F0Y2gudGhyZXNob2xkfSAke3BlcmlvZExhYmVsfWBdLFxuICAgICAgICBlZmZlY3RzOiBbeyB0eXBlOiBcIndhdGNoX2RlbGV0ZWRcIiwgaWQ6IG1hdGNoaW5nV2F0Y2guaWQgfV1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhdmFpbGFibGUgPSBhbGxXYXRjaGVzLm1hcCgodzogYW55KSA9PiBg4oCiICR7dy5jYXRlZ29yeX0gLSAkJHt3LnRocmVzaG9sZH0gJHt3LnBlcmlvZH1gKS5qb2luKFwiXFxuXCIpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIG1lc3NhZ2VzOiBbYOKdjCBDb3VsZCBub3QgZmluZCB3YXRjaCBmb3IgXCIke2NhdGVnb3J5fVwiLlxcblxcbkF2YWlsYWJsZSB3YXRjaGVzOlxcbiR7YXZhaWxhYmxlIHx8IFwiTm9uZVwifWBdIFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLSBERUxFVEUgRVhQRU5TRSAoc2ltcGxlKSAtLS0tLS0tLS0tICovXG4gIGlmIChpc0RlbGV0ZUludGVudChxdWVyeSkpIHtcbiAgICBjb25zdCBhbW91bnQgPSBleHRyYWN0QW1vdW50KHF1ZXJ5KTtcbiAgICAvLyBQYXJzZSBleGFjdCBkYXRlIGZyb20gcXVlcnlcbiAgICBsZXQgdGFyZ2V0RGF0ZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGxldCB0YXJnZXRNb250aDogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGNvbnN0IGZ1bGxEYXRlTWF0Y2ggPSBxdWVyeS5tYXRjaCgvXFxiKD86b258aW4pXFxzKyhbYS16w6HDqcOtw7PDusO8w7FdKylcXHMrKFxcZHsxLDJ9KSg/OnN0fG5kfHJkfHRoKT8sP1xccyooXFxkezR9KT9cXGIvaSk7XG4gICAgaWYgKGZ1bGxEYXRlTWF0Y2gpIHtcbiAgICAgIGNvbnN0IG1vbnRoTmFtZSA9IGZ1bGxEYXRlTWF0Y2hbMV07XG4gICAgICBjb25zdCBkYXkgPSBwYXJzZUludChmdWxsRGF0ZU1hdGNoWzJdLCAxMCk7XG4gICAgICBjb25zdCB5ZWFyID0gZnVsbERhdGVNYXRjaFszXSA/IHBhcnNlSW50KGZ1bGxEYXRlTWF0Y2hbM10sIDEwKSA6IChzZWxlY3RlZE1vbnRoID8gcGFyc2VJbnQoc2VsZWN0ZWRNb250aC5zbGljZSgwLDQpLCAxMCkgOiBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkpO1xuICAgICAgY29uc3QgbWkgPSBtb250aE5hbWVUb0luZGV4KG1vbnRoTmFtZSk7XG4gICAgICBpZiAobWkgIT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgY2xhbXBlZERheSA9IGNsYW1wRGF5KHllYXIsIG1pLCBkYXkpO1xuICAgICAgICB0YXJnZXREYXRlID0gdG9JU08obmV3IERhdGUoRGF0ZS5VVEMoeWVhciwgbWksIGNsYW1wZWREYXkpKSk7XG4gICAgICAgIHRhcmdldE1vbnRoID0gYCR7eWVhcn0tJHtTdHJpbmcobWkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfWA7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdGFyZ2V0TW9udGgpIHtcbiAgICAgIGNvbnN0IG1vbnRoT25seU1hdGNoID0gcXVlcnkubWF0Y2goL1xcYig/Om9ufGluKVxccysoW2EtesOhw6nDrcOzw7rDvMOxXSspXFxiL2kpO1xuICAgICAgaWYgKG1vbnRoT25seU1hdGNoKSB7XG4gICAgICAgIGNvbnN0IG1pID0gbW9udGhOYW1lVG9JbmRleChtb250aE9ubHlNYXRjaFsxXSk7XG4gICAgICAgIGlmIChtaSAhPT0gbnVsbCkge1xuICAgICAgICAgIGNvbnN0IHllYXIgPSBzZWxlY3RlZE1vbnRoID8gc2VsZWN0ZWRNb250aC5zbGljZSgwLCA0KSA6IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICB0YXJnZXRNb250aCA9IGAke3llYXJ9LSR7U3RyaW5nKG1pICsgMSkucGFkU3RhcnQoMiwgJzAnKX1gO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGxldCBhZnRlciA9IHF1ZXJ5XG4gICAgICAucmVwbGFjZSgvXFxiKGRlbGV0ZXxyZW1vdmV8ZWxpbWluYXJ8Ym9ycmFyfHF1aXRhcilcXGIvaSwgXCJcIilcbiAgICAgIC5yZXBsYWNlKC9cXCQ/XFxzKlxcZCsoPzpcXC5cXGQrKT9cXHMqXFwkP1xccyooPzpkb2xsYXJzP3xkw7NsYXJlc3xkb2xhcmVzKT8vaSwgXCJcIilcbiAgICAgIC5yZXBsYWNlKC9cXGIoPzpvbnxpbilcXHMrW2EtesOhw6nDrcOzw7rDvMOxXSsoPzpcXHMrXFxkezEsMn0oPzpzdHxuZHxyZHx0aCk/LD9cXHMqXFxkezR9KT9cXGIvaSwgXCJcIilcbiAgICAgIC5yZXBsYWNlKC9cXGIoZm9yfHBhcmEpXFxzKy9pLCBcIlwiKVxuICAgICAgLnRyaW0oKTtcblxuICAgIGNvbnN0IG1vbnRoSVNPID0gdGFyZ2V0TW9udGggfHwgc2VsZWN0ZWRNb250aCB8fCB0b2RheUluVFoodHopLnNsaWNlKDAsNyk7XG4gICAgY29uc3QgbW9udGhFeHBlbnNlcyA9IGRiLmxpc3RFeHBlbnNlcyh1c2VyLmlkLCB7IG1vbnRoOiBtb250aElTTyB9KTtcblxuICAgIGlmICghYW1vdW50IHx8ICFhZnRlcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZXM6IFtcIuKdjCBQbGVhc2Ugc2F5IGFtb3VudCBhbmQgZGVzY3JpcHRpb24uIEV4YW1wbGU6ICdkZWxldGUgMzAgZm9yIHBhdGggb24gZGVjZW1iZXIgMycuXCJdIH0pO1xuICAgIH1cblxuICAgIGxldCBjYW5kaWRhdGVzID0gbW9udGhFeHBlbnNlcy5maWx0ZXIoKGU6IGFueSkgPT4gZS5hbW91bnQgPT09IGFtb3VudCk7XG4gICAgXG4gICAgLy8gSWYgd2UgaGF2ZSBhIHNwZWNpZmljIGRhdGUsIGZpbHRlciBieSB0aGF0IGRhdGVcbiAgICBpZiAodGFyZ2V0RGF0ZSAmJiBjYW5kaWRhdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGRhdGVGaWx0ZXJlZCA9IGNhbmRpZGF0ZXMuZmlsdGVyKChlOiBhbnkpID0+IFN0cmluZyhlLmRhdGUpLnNsaWNlKDAsMTApID09PSB0YXJnZXREYXRlKTtcbiAgICAgIGlmIChkYXRlRmlsdGVyZWQubGVuZ3RoID4gMCkge1xuICAgICAgICBjYW5kaWRhdGVzID0gZGF0ZUZpbHRlcmVkO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZiAoY2FuZGlkYXRlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnN0IGxpc3QgPSBtb250aEV4cGVuc2VzLm1hcCgoZTogYW55KSA9PiBg4oCiICR7ZS5kZXNjcmlwdGlvbn0gLSAke2UuYW1vdW50LnRvRml4ZWQoMil9IG9uICR7U3RyaW5nKGUuZGF0ZSkuc2xpY2UoMCwxMCl9YCkuam9pbihcIlxcblwiKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2VzOiBbYOKdjCBOb3QgZm91bmQgJHthbW91bnR9IGZvciBcIiR7YWZ0ZXJ9XCIke3RhcmdldERhdGUgPyBgIG9uICR7dGFyZ2V0RGF0ZX1gIDogYCBpbiAke21vbnRoSVNPfWB9LlxcblxcbkF2YWlsYWJsZTpcXG4ke2xpc3QgfHwgXCJOb25lXCJ9YF0gfSk7XG4gICAgfVxuXG4gICAgY29uc3Qga2V5cyA9IGFmdGVyLnRvTG93ZXJDYXNlKCkuc3BsaXQoL1xccysvKS5maWx0ZXIodyA9PiB3Lmxlbmd0aCA+IDIpO1xuICAgIGxldCBjaG9zZW4gPSBjYW5kaWRhdGVzWzBdO1xuICAgIGNvbnN0IGJldHRlciA9IGNhbmRpZGF0ZXMuZmluZCgoZTogYW55KSA9PlxuICAgICAga2V5cy5zb21lKHcgPT4gZS5kZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHcpIHx8IGUuY2F0ZWdvcnkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyh3KSlcbiAgICApO1xuICAgIGlmIChiZXR0ZXIpIGNob3NlbiA9IGJldHRlcjtcblxuICAgIGRiLmRlbGV0ZUV4cGVuc2UoY2hvc2VuLmlkLCB1c2VyLmlkKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgbWVzc2FnZXM6IFtg4pyFIERlbGV0ZWQ6ICR7Y2hvc2VuLmRlc2NyaXB0aW9ufSDigJMgJHtjaG9zZW4uYW1vdW50LnRvRml4ZWQoMil9IG9uICR7U3RyaW5nKGNob3Nlbi5kYXRlKS5zbGljZSgwLDEwKX1gXSxcbiAgICAgIGVmZmVjdHM6IFt7IHR5cGU6IFwiZXhwZW5zZV9kZWxldGVkXCIsIGlkOiBjaG9zZW4uaWQgfV1cbiAgICB9KTtcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0gR09BTCAtLS0tLS0tLS0tICovXG4gIGlmIChpc0dvYWxJbnRlbnQocXVlcnkpKSB7XG4gICAgY29uc3QgYW1vdW50ID0gZXh0cmFjdEFtb3VudChxdWVyeSk7XG4gICAgbGV0IHBlcmlvZDogXCJ3ZWVrbHlcInxcIm1vbnRobHlcInxcInllYXJseVwifHVuZGVmaW5lZDtcbiAgICBpZiAoL1xcYndlZWtseXxzZW1hbmFsXFxiL2kudGVzdChxdWVyeSkpIHBlcmlvZCA9IFwid2Vla2x5XCI7XG4gICAgZWxzZSBpZiAoL1xcYm1vbnRobHl8bWVuc3VhbFxcYi9pLnRlc3QocXVlcnkpKSBwZXJpb2QgPSBcIm1vbnRobHlcIjtcbiAgICBlbHNlIGlmICgvXFxieWVhcmx5fHllYXJseXxhbnVhbFxcYi9pLnRlc3QocXVlcnkpKSBwZXJpb2QgPSBcInllYXJseVwiO1xuICAgIGVsc2UgaWYgKC9cXGJtb250aHxtZXNcXGIvaS50ZXN0KHF1ZXJ5KSkgcGVyaW9kID0gXCJtb250aGx5XCI7XG5cbiAgICBjb25zdCBjYXRNYXRjaCA9IHF1ZXJ5Lm1hdGNoKC9cXGIoZm9yfHBhcmEpXFxzKyhbYS16w6HDqcOtw7PDusO8w7FdW1xcd1xccy1dKikkL2kpO1xuICAgIGNvbnN0IGNhdGVnb3J5ID0gY2F0TWF0Y2ggPyBjYXRNYXRjaFsyXS50cmltKCkgOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAoIWFtb3VudCB8fCAhcGVyaW9kKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlczogW1wi4p2MIFBsZWFzZSBpbmNsdWRlIGFtb3VudCBhbmQgcGVyaW9kLiBFeGFtcGxlOiAnU2V0IG1vbnRobHkgZ29hbCAzMDAgZm9yIGZvb2QnLlwiXSB9KTtcbiAgICB9XG5cbiAgICAvLyBFeHRyYWN0IG1vbnRoIGZyb20gcXVlcnkgaWYgc3BlY2lmaWVkIChlLmcuLCBcImluIERlY2VtYmVyIDIwMjVcIilcbiAgICBsZXQgbW9udGhWYWx1ZSA9IHNlbGVjdGVkTW9udGggfHwgdG9kYXlJblRaKHR6KS5zbGljZSgwLDcpO1xuICAgIGNvbnN0IG1vbnRoWWVhck1hdGNoID0gcXVlcnkubWF0Y2goL1xcYig/OmlufGZvcilcXHMrKGphbnxmZWJ8bWFyfGFwcnxtYXl8anVufGp1bHxhdWd8c2VwfG9jdHxub3Z8ZGVjKVthLXpdKlxccysoXFxkezR9KVxcYi9pKTtcbiAgICBpZiAobW9udGhZZWFyTWF0Y2gpIHtcbiAgICAgIGNvbnN0IG1vbnRoTmFtZSA9IG1vbnRoWWVhck1hdGNoWzFdO1xuICAgICAgY29uc3QgeWVhciA9IG1vbnRoWWVhck1hdGNoWzJdO1xuICAgICAgY29uc3QgbW9udGhJbmRleCA9IG1vbnRoTmFtZVRvSW5kZXgobW9udGhOYW1lKTtcbiAgICAgIGlmIChtb250aEluZGV4ICE9PSBudWxsKSB7XG4gICAgICAgIG1vbnRoVmFsdWUgPSBgJHt5ZWFyfS0ke1N0cmluZyhtb250aEluZGV4ICsgMSkucGFkU3RhcnQoMiwgJzAnKX1gO1xuICAgICAgICBjb25zb2xlLmxvZyhgW0dvYWxdIFBhcnNlZCBcIiR7bW9udGhZZWFyTWF0Y2hbMF19XCIgYXMgJHttb250aFZhbHVlfWApO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZiAocGVyaW9kID09PSBcInllYXJseVwiKSBtb250aFZhbHVlID0gbW9udGhWYWx1ZS5zbGljZSgwLDQpO1xuICAgIGlmIChwZXJpb2QgPT09IFwid2Vla2x5XCIpIG1vbnRoVmFsdWUgPSBtb250aFZhbHVlICsgXCItMDFcIjtcblxuICAgIGNvbnN0IGxhYmVsID0gYFN0YXkgdW5kZXIgJCR7YW1vdW50fSAke3BlcmlvZH0ke2NhdGVnb3J5ID8gYCBmb3IgJHtjYXRlZ29yeX1gIDogXCJcIn1gO1xuICAgIGNvbnN0IGdvYWwgPSBkYi5jcmVhdGVHb2FsKHtcbiAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgIGxhYmVsLFxuICAgICAgbGltaXQ6IGFtb3VudCxcbiAgICAgIG1vbnRoOiBtb250aFZhbHVlLFxuICAgICAgcGVyaW9kLFxuICAgICAgY2F0ZWdvcnlcbiAgICB9KTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBtZXNzYWdlczogW2DinIUgR29hbCBjcmVhdGVkOiAke2dvYWwubGFiZWx9LmBdLFxuICAgICAgZWZmZWN0czogW3sgdHlwZTogXCJnb2FsX2NyZWF0ZWRcIiwgaWQ6IGdvYWwuaWQgfV1cbiAgICB9KTtcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0gV0FUQ0ggKEFMRVJUKSDigJQgd2Vla2x5ICsgY3VzdG9tIGRhdGUgcmFuZ2VzIC0tLS0tLS0tLS0gKi9cbiAgaWYgKGlzV2F0Y2hJbnRlbnQocXVlcnkpKSB7XG4gICAgY29uc3QgYW1vdW50ID0gZXh0cmFjdEFtb3VudChxdWVyeSk7XG5cbiAgICAvLyBQZXJpb2Q6IG5vdyBzdXBwb3J0cyB3ZWVrbHkvbW9udGhseS95ZWFybHkgKEVOL0VTKVxuICAgIC8vIFVzZSBsb29zZXIgbWF0Y2hpbmcgdG8gaGFuZGxlIFwiNTAwd2Vla2x5XCIgKG5vIHNwYWNlKVxuICAgIGxldCBwZXJpb2Q6IFwid2Vla2x5XCIgfCBcIm1vbnRobHlcIiB8IFwieWVhcmx5XCIgfCBcImN1c3RvbVwiIHwgdW5kZWZpbmVkO1xuICAgIGlmICgvKHdlZWtseXxzZW1hbmFsKS9pLnRlc3QocXVlcnkpKSBwZXJpb2QgPSBcIndlZWtseVwiO1xuICAgIGVsc2UgaWYgKC8obW9udGhseXxtZW5zdWFsfG1lcykvaS50ZXN0KHF1ZXJ5KSkgcGVyaW9kID0gXCJtb250aGx5XCI7XG4gICAgZWxzZSBpZiAoLyh5ZWFybHl8YW5udWFsfGFudWFsfHllYXIpL2kudGVzdChxdWVyeSkpIHBlcmlvZCA9IFwieWVhcmx5XCI7XG5cbiAgICAvLyBDdXN0b20gZXhwbGljaXQgZGF0ZSByYW5nZSBsaWtlIFwic2VwdGVtYmVyIDEwIHRvIDE3XCJcbiAgICBjb25zdCBkYXRlUmFuZ2UgPSBwYXJzZVdhdGNoRGF0ZVJhbmdlKHF1ZXJ5LCBzZWxlY3RlZE1vbnRoLCB0eik7IC8vIC0+IHtzdGFydCxlbmR9fG51bGxcbiAgICBpZiAoZGF0ZVJhbmdlKSBwZXJpb2QgPSBcImN1c3RvbVwiO1xuXG4gICAgaWYgKCFhbW91bnQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIG1lc3NhZ2VzOiBbXCLinYwgUGxlYXNlIGluY2x1ZGUgYW4gYW1vdW50LiBFeGFtcGxlOiAnd2F0Y2ggZm9vZCA1MDAgd2Vla2x5JyBvciAnd2F0Y2ggNTAwIGZvciBmb29kIG1vbnRobHknLlwiXVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQ2F0ZWdvcnk6IGV4dHJhY3QgYmVmb3JlIGFtb3VudCwgZXhjbHVkaW5nIGRhdGVzIGFuZCBrZXl3b3Jkc1xuICAgIC8vIFBhdHRlcm46IFwid2F0Y2ggQ0FURUdPUlkgYW1vdW50IHBlcmlvZCBbZm9yIGRhdGVdXCJcbiAgICBsZXQgY2F0ZWdvcnk6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBcbiAgICAvLyBUcnkgdG8gbWF0Y2g6IHdhdGNoIFtjYXRlZ29yeV0gW2Ftb3VudF1cbiAgICBjb25zdCBjYXRCZWZvcmVBbW91bnQgPSBxdWVyeS5tYXRjaCgvXFxiKD86d2F0Y2h8YWxlcnR8bm90aWZ5fGFsZXJ0YXxhdmlzbylcXHMrKFthLXrDocOpw63Ds8O6w7zDsV1cXHcrKVxccytcXCQ/XFxkL2kpO1xuICAgIGlmIChjYXRCZWZvcmVBbW91bnQgJiYgY2F0QmVmb3JlQW1vdW50WzFdKSB7XG4gICAgICBjb25zdCB3b3JkID0gY2F0QmVmb3JlQW1vdW50WzFdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAvLyBNYWtlIHN1cmUgaXQncyBub3QgYSBrZXl3b3JkXG4gICAgICBpZiAoIS8od2Vla2x5fG1vbnRobHl8eWVhcmx5fHNlbWFuYWx8bWVuc3VhbHxhbnVhbHxmb3J8b258ZW58cGFyYSkvaS50ZXN0KHdvcmQpKSB7XG4gICAgICAgIGNhdGVnb3J5ID0gY2F0QmVmb3JlQW1vdW50WzFdO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBJZiBub3QgZm91bmQsIHRyeSBcImZvciBjYXRlZ29yeVwiIHBhdHRlcm5cbiAgICBpZiAoIWNhdGVnb3J5KSB7XG4gICAgICBjb25zdCBjYXRBZnRlckZvciA9IHF1ZXJ5Lm1hdGNoKC9cXGIoZm9yfG9ufGVufHBhcmEpXFxzKyhbYS16w6HDqcOtw7PDusO8w7FdXFx3KykvaSk7XG4gICAgICBpZiAoY2F0QWZ0ZXJGb3IgJiYgY2F0QWZ0ZXJGb3JbMl0pIHtcbiAgICAgICAgY29uc3Qgd29yZCA9IGNhdEFmdGVyRm9yWzJdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSBpdCdzIG5vdCBhIGRhdGUgd29yZFxuICAgICAgICBpZiAoIS8oamFudWFyeXxmZWJydWFyeXxtYXJjaHxhcHJpbHxtYXl8anVuZXxqdWx5fGF1Z3VzdHxzZXB0ZW1iZXJ8b2N0b2Jlcnxub3ZlbWJlcnxkZWNlbWJlcnxlbmVyb3xmZWJyZXJvfG1hcnpvfGFicmlsfG1heW98anVuaW98anVsaW98YWdvc3RvfHNlcHRpZW1icmV8b2N0dWJyZXxub3ZpZW1icmV8ZGljaWVtYnJlKS9pLnRlc3Qod29yZCkpIHtcbiAgICAgICAgICBjYXRlZ29yeSA9IGNhdEFmdGVyRm9yWzJdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEZhbGxiYWNrOiBndWVzcyBmcm9tIHJlbWFpbmluZyB3b3Jkc1xuICAgIGlmICghY2F0ZWdvcnkpIHtcbiAgICAgIGNvbnN0IGNsZWFuZWQgPSBxdWVyeS5yZXBsYWNlKC9cXCQ/XFxzKlxcZCsoPzpcXC5cXGQrKT8vZywgXCJcIik7XG4gICAgICBjb25zdCB3b3JkcyA9IGNsZWFuZWQuc3BsaXQoL1xccysvKS5maWx0ZXIodyA9PiBcbiAgICAgICAgdy5sZW5ndGggPiAyICYmIFxuICAgICAgICAhLyh3YXRjaHxhbGVydHxub3RpZnl8YWxlcnRhfGF2aXNvfHdlZWtseXxtb250aGx5fHllYXJseXxzZW1hbmFsfG1lbnN1YWx8YW51YWx8Zm9yfG9ufGVufHBhcmF8amFudWFyeXxmZWJydWFyeXxtYXJjaHxhcHJpbHxtYXl8anVuZXxqdWx5fGF1Z3VzdHxzZXB0ZW1iZXJ8b2N0b2Jlcnxub3ZlbWJlcnxkZWNlbWJlcnxlbmVyb3xmZWJyZXJvfG1hcnpvfGFicmlsfG1heW98anVuaW98anVsaW98YWdvc3RvfHNlcHRpZW1icmV8b2N0dWJyZXxub3ZpZW1icmV8ZGljaWVtYnJlfFxcZHs0fSkvaS50ZXN0KHcpXG4gICAgICApO1xuICAgICAgY2F0ZWdvcnkgPSAod29yZHNbMF0gfHwgXCJHZW5lcmFsXCIpLnRyaW0oKTtcbiAgICB9XG5cbiAgICAvLyBBbmNob3IgdG8gc2VsZWN0ZWQgbW9udGgveWVhciBzbyBcIm1vbnRobHkveWVhcmx5XCIgaXMgZGV0ZXJtaW5pc3RpYy5cbiAgICBsZXQgbW9udGhWYWx1ZSA9IHNlbGVjdGVkTW9udGggfHwgdG9kYXlJblRaKHR6KS5zbGljZSgwLCA3KTtcbiAgICBpZiAocGVyaW9kID09PSBcInllYXJseVwiKSBtb250aFZhbHVlID0gbW9udGhWYWx1ZS5zbGljZSgwLCA0KTtcbiAgICBpZiAoIXBlcmlvZCkgcGVyaW9kID0gXCJtb250aGx5XCI7IC8vIHNlbnNpYmxlIGRlZmF1bHQgaWYgdXNlciBvbWl0dGVkIGl0XG5cbiAgICAvLyBGb3Igd2Vla2x5OiBzdG9yZSB0aGUgSVNPIHdlZWsgc3RhcnQgc28gaXQncyByZXByb2R1Y2libGUuXG4gICAgbGV0IHJhbmdlU3RhcnQ6IHN0cmluZyB8IHVuZGVmaW5lZCwgcmFuZ2VFbmQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBpZiAocGVyaW9kID09PSBcIndlZWtseVwiICYmICFkYXRlUmFuZ2UpIHtcbiAgICAgIC8vIFVzZSBUT0RBWSdzIGRhdGUgZm9yIHRoZSBjdXJyZW50IHdlZWsgKG5vdCBzZWxlY3RlZCBtb250aClcbiAgICAgIGNvbnN0IHRvZGF5ID0gdG9kYXlJblRaKHR6KTtcbiAgICAgIHJhbmdlU3RhcnQgPSBzdGFydE9mV2Vla01vblVUQyh0b2RheSk7XG4gICAgICByYW5nZUVuZCA9IGVuZE9mV2Vla01vblVUQyh0b2RheSk7XG4gICAgfVxuICAgIGlmIChwZXJpb2QgPT09IFwiY3VzdG9tXCIgJiYgZGF0ZVJhbmdlKSB7XG4gICAgICByYW5nZVN0YXJ0ID0gZGF0ZVJhbmdlLnN0YXJ0O1xuICAgICAgcmFuZ2VFbmQgPSBkYXRlUmFuZ2UuZW5kO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSB0aGUgd2F0Y2guIFdlIHBhc3MgcmFuZ2VTdGFydC9yYW5nZUVuZCBhcyBvcHRpb25hbCBmaWVsZHMg4oCUXG4gICAgLy8gc2FmZSBldmVuIGlmIHlvdXIgZGIgbGF5ZXIgaWdub3JlcyB1bmtub3duIGtleXMuXG4gICAgY29uc3Qgd2F0Y2ggPSAoZGIgYXMgYW55KS5jcmVhdGVTcGVuZGluZ1dhdGNoKHtcbiAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgIGNhdGVnb3J5LFxuICAgICAgdGhyZXNob2xkOiBhbW91bnQsXG4gICAgICBwZXJpb2Q6IHBlcmlvZCA9PT0gXCJjdXN0b21cIiA/IFwiY3VzdG9tXCIgOiBwZXJpb2QsICAgICAgICAgLy8gXCJ3ZWVrbHlcIiB8IFwibW9udGhseVwiIHwgXCJ5ZWFybHlcIiB8IFwiY3VzdG9tXCJcbiAgICAgIG1vbnRoOiBtb250aFZhbHVlLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGtlZXAgZXhpc3Rpbmcgc2NoZW1hIGhhcHB5XG4gICAgICByYW5nZVN0YXJ0LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvcHRpb25hbCAod2Vla2x5L2N1c3RvbSlcbiAgICAgIHJhbmdlRW5kLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9wdGlvbmFsICh3ZWVrbHkvY3VzdG9tKVxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9KTtcblxuICAgIC8vIEZyaWVuZGx5IGNvbmZpcm1hdGlvbiB0ZXh0XG4gICAgbGV0IHdoZW4gPVxuICAgICAgcGVyaW9kID09PSBcIndlZWtseVwiICYmIHJhbmdlU3RhcnQgJiYgcmFuZ2VFbmRcbiAgICAgICAgPyBgdGhpcyB3ZWVrICgke3JhbmdlU3RhcnR9IOKGkiAke3JhbmdlRW5kfSlgXG4gICAgICAgIDogcGVyaW9kID09PSBcIm1vbnRobHlcIlxuICAgICAgICA/IGBtb250aGx5ICgke21vbnRoVmFsdWV9KWBcbiAgICAgICAgOiBwZXJpb2QgPT09IFwieWVhcmx5XCJcbiAgICAgICAgPyBgeWVhciAke21vbnRoVmFsdWV9YFxuICAgICAgICA6IHBlcmlvZCA9PT0gXCJjdXN0b21cIiAmJiByYW5nZVN0YXJ0ICYmIHJhbmdlRW5kXG4gICAgICAgID8gYCR7cmFuZ2VTdGFydH0g4oaSICR7cmFuZ2VFbmR9YFxuICAgICAgICA6IHBlcmlvZDtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBtZXNzYWdlczogW1xuICAgICAgICBg4pyFIFdhdGNoIGNyZWF0ZWQ6IEFsZXJ0IHdoZW4gJHtjYXRlZ29yeX0gcmVhY2hlcyAkJHthbW91bnR9ICR7d2hlbn0uYFxuICAgICAgXSxcbiAgICAgIGVmZmVjdHM6IFt7IHR5cGU6IFwid2F0Y2hfY3JlYXRlZFwiLCBpZDogd2F0Y2g/LmlkIH1dXG4gICAgfSk7XG4gIH1cblxuICAvKiAtLS0tLS0tLS0tIElOU0lHSFRTIChERUZBVUxUID0gU0VMRUNURUQgTU9OVEgpIC0tLS0tLS0tLS0gKi9cbiAgaWYgKGlzSW5zaWdodHNJbnRlbnQocXVlcnkpKSB7XG4gICAgY29uc3QgcmFuZ2UgPSByZXNvbHZlUmFuZ2UocXVlcnksIHNlbGVjdGVkTW9udGgsIHR6KTtcbiAgICBjb25zdCB3aXRoaW4gPSBmaWx0ZXJCeVJhbmdlKGFsbEV4cGVuc2VzLCByYW5nZSk7XG4gICAgY29uc3QgdG90YWwgPSB3aXRoaW4ucmVkdWNlKChzOiBudW1iZXIsIGU6IGFueSkgPT4gcyArIGUuYW1vdW50LCAwKTtcbiAgICBjb25zdCBkYXlzID0gTWF0aC5tYXgoMSwgTWF0aC5yb3VuZCgoK25ldyBEYXRlKHJhbmdlLmVuZCkgLSArbmV3IERhdGUocmFuZ2Uuc3RhcnQpKSAvIE1TX0RBWSkgKyAxKTtcbiAgICBjb25zdCBhdmdQZXJEYXkgPSB0b3RhbCAvIGRheXM7XG4gICAgY29uc3QgcHJvamVjdGVkID0gYXZnUGVyRGF5ICogZGF5cztcblxuICAgIGNvbnN0IHsgc29ydGVkIH0gPSB0b3BDYXRzKHdpdGhpbik7XG4gICAgY29uc3QgdG9wMyA9IHNvcnRlZC5zbGljZSgwLDMpLm1hcCgoW2MsYV0saSk9PmAke2krMX0uICR7Y306ICQke2EudG9GaXhlZCgyKX1gKS5qb2luKFwiXFxuXCIpO1xuXG4gICAgY29uc3QgYnlDYXQ6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fTtcbiAgICB3aXRoaW4uZm9yRWFjaCgoZTogYW55KSA9PiAoYnlDYXRbZS5jYXRlZ29yeSB8fCBcIk90aGVyXCJdID0gKGJ5Q2F0W2UuY2F0ZWdvcnkgfHwgXCJPdGhlclwiXSB8fCAwKSArIGUuYW1vdW50KSk7XG4gICAgY29uc3QgdGlwczogc3RyaW5nW10gPSBbXTtcbiAgICBpZiAoYnlDYXRbXCJGb29kXCJdID4gMzAwKSB0aXBzLnB1c2goXCLwn5KhIEZvb2QgaXMgaGlnaCDigJQgbWVhbCBwcmVwIGNvdWxkIGhlbHAuXCIpO1xuICAgIGlmIChieUNhdFtcIlRyYW5zaXRcIl0gPiAxNTApIHRpcHMucHVzaChcIvCfkqEgQ29uc2lkZXIgYSB3ZWVrbHkvbW9udGhseSB0cmFuc2l0IHBhc3MuXCIpO1xuICAgIGlmIChieUNhdFtcIlN1YnNjcmlwdGlvbnNcIl0gPiAxMDApIHRpcHMucHVzaChcIvCfkqEgUmV2aWV3IGFuZCBjYW5jZWwgdW51c2VkIHN1YnNjcmlwdGlvbnMuXCIpO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgIGDwn5SNIEluc2lnaHRzICR7cmFuZ2Uuc3RhcnR9IOKGkiAke3JhbmdlLmVuZH1gLFxuICAgICAgICBg4oCiIFRvdGFsOiAkJHt0b3RhbC50b0ZpeGVkKDIpfSDigKIgRGFpbHkgYXZnOiAkJHthdmdQZXJEYXkudG9GaXhlZCgyKX0g4oCiIFByb2plY3RlZDogfiQke3Byb2plY3RlZC50b0ZpeGVkKDIpfWAsXG4gICAgICAgIHNvcnRlZC5sZW5ndGggPyBg4oCiIFRvcCBjYXRlZ29yaWVzOlxcbiR7dG9wM31gIDogXCLigKIgTm8gY2F0ZWdvcml6ZWQgc3BlbmRpbmcuXCIsXG4gICAgICAgIC4uLih0aXBzLmxlbmd0aCA/IFtcIlwiLCAuLi50aXBzXSA6IFtdKVxuICAgICAgXVxuICAgIH0pO1xuICB9XG5cbiAgLyogLS0tLS0tLS0tLSBNT1NUIFNQRU5UIChQRVJJT0QtQVdBUkUpIC0tLS0tLS0tLS0gKi9cbiAgaWYgKGlzTW9zdFNwZW50SW50ZW50KHF1ZXJ5KSkge1xuICAgIGNvbnN0IHJhbmdlID0gcmVzb2x2ZVJhbmdlKHF1ZXJ5LCBzZWxlY3RlZE1vbnRoLCB0eik7XG4gICAgY29uc3Qgd2l0aGluID0gZmlsdGVyQnlSYW5nZShhbGxFeHBlbnNlcywgcmFuZ2UpO1xuICAgIGlmICghd2l0aGluLmxlbmd0aCkgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZXM6IFtgTm8gZXhwZW5zZXMgZnJvbSAke3JhbmdlLnN0YXJ0fSB0byAke3JhbmdlLmVuZH0uYF0gfSk7XG5cbiAgICBjb25zdCB7IHRvdGFsLCBzb3J0ZWQsIHRvcCB9ID0gdG9wQ2F0cyh3aXRoaW4pO1xuICAgIGNvbnN0IG1zZ3M6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKHRvcCkge1xuICAgICAgbXNncy5wdXNoKGDwn5KwIEZyb20gJHtyYW5nZS5zdGFydH0gdG8gJHtyYW5nZS5lbmR9LCB5b3Ugc3BlbnQgdGhlIG1vc3Qgb24gJHt0b3BbMF19OiAkJHt0b3BbMV0udG9GaXhlZCgyKX0gKCR7dG90YWwgPyAoKHRvcFsxXSAvIHRvdGFsKSAqIDEwMCkudG9GaXhlZCgxKSA6IFwiMC4wXCJ9JSlgKTtcbiAgICAgIG1zZ3MucHVzaChgXFxuVG9wIDMgQ2F0ZWdvcmllczpcXG5gICsgc29ydGVkLnNsaWNlKDAsMykubWFwKChbYyxhXSxpKT0+YCR7aSsxfS4gJHtjfTogJCR7YS50b0ZpeGVkKDIpfWApLmpvaW4oXCJcXG5cIikpO1xuICAgIH0gZWxzZSB7XG4gICAgICBtc2dzLnB1c2goXCJObyBjYXRlZ29yaXplZCBzcGVuZGluZyBpbiB0aGF0IHJhbmdlLlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgbWVzc2FnZXM6IG1zZ3MgfSk7XG4gIH1cblxuICAvKiAtLS0tLS0tLS0tIE1PTlRITFkgU1VNTUFSWSAoQUxXQVlTIFVTRSBTRUxFQ1RFRCBNT05USCBJRiBQUk9WSURFRCkgLS0tLS0tLS0tLSAqL1xuICBpZiAoaXNNb250aGx5SW50ZW50KHF1ZXJ5KSkge1xuICAgIC8vIFRyeSB0byBwYXJzZSBtb250aCBmcm9tIHF1ZXJ5IGZpcnN0XG4gICAgY29uc3QgZXhwbGljaXRSYW5nZSA9IHBhcnNlRXhwbGljaXRNb250aFJhbmdlKHF1ZXJ5KTtcbiAgICBjb25zdCBtb250aElTTyA9IGV4cGxpY2l0UmFuZ2UgPyBleHBsaWNpdFJhbmdlLnN0YXJ0LnNsaWNlKDAsIDcpIDogKHNlbGVjdGVkTW9udGggfHwgdG9kYXlJblRaKHR6KS5zbGljZSgwLDcpKTtcbiAgICBjb25zdCBtb250aEV4cGVuc2VzID0gZGIubGlzdEV4cGVuc2VzKHVzZXIuaWQsIHsgbW9udGg6IG1vbnRoSVNPIH0pO1xuICAgIGNvbnN0IHRvdGFsID0gbW9udGhFeHBlbnNlcy5yZWR1Y2UoKHM6bnVtYmVyLGU6YW55KT0+cytlLmFtb3VudCwwKTtcbiAgICBjb25zdCBieUNhdDogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICAgIGZvciAoY29uc3QgZSBvZiBtb250aEV4cGVuc2VzKSBieUNhdFtlLmNhdGVnb3J5IHx8IFwiT3RoZXJcIl0gPSAoYnlDYXRbZS5jYXRlZ29yeSB8fCBcIk90aGVyXCJdIHx8IDApICsgZS5hbW91bnQ7XG4gICAgY29uc3Qgc29ydGVkID0gT2JqZWN0LmVudHJpZXMoYnlDYXQpLnNvcnQoKGEsYik9PmJbMV0tYVsxXSk7XG4gICAgY29uc3QgdG9wID0gc29ydGVkWzBdO1xuXG4gICAgY29uc3QgbXNnczogc3RyaW5nW10gPSBbXTtcbiAgICBtc2dzLnB1c2goYPCfk4ogTW9udGhseSBTdW1tYXJ5IGZvciAke21vbnRoSVNPfTpcXG5Ub3RhbCBTcGVudDogJCR7dG90YWwudG9GaXhlZCgyKX1cXG5UcmFuc2FjdGlvbnM6ICR7bW9udGhFeHBlbnNlcy5sZW5ndGh9YCk7XG4gICAgaWYgKHRvcCkgbXNncy5wdXNoKGDwn5KwIE1vc3Qgc3BlbnQgb246ICR7dG9wWzBdfSAoJCR7dG9wWzFdLnRvRml4ZWQoMil9IC0gJHt0b3RhbCA/ICgodG9wWzFdIC8gdG90YWwpICogMTAwKS50b0ZpeGVkKDEpIDogXCIwLjBcIn0lKWApO1xuICAgIGlmIChzb3J0ZWQubGVuZ3RoKSBtc2dzLnB1c2goYFxcbkJyZWFrZG93biBieSBDYXRlZ29yeTpcXG5gICsgc29ydGVkLm1hcCgoW2MsYV0pPT5g4oCiICR7Y306ICQke2EudG9GaXhlZCgyKX1gKS5qb2luKFwiXFxuXCIpKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlczogbXNncyB9KTtcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0gWUVBUkxZIFNVTU1BUlkgLS0tLS0tLS0tLSAqL1xuICBpZiAoaXNZZWFybHlJbnRlbnQocXVlcnkpKSB7XG4gICAgY29uc3QgeSA9IChzZWxlY3RlZE1vbnRoID8gc2VsZWN0ZWRNb250aC5zbGljZSgwLDQpIDogdG9kYXlJblRaKHR6KS5zbGljZSgwLDQpKTtcbiAgICBjb25zdCB5ZWFyRXhwZW5zZXMgPSBhbGxFeHBlbnNlcy5maWx0ZXIoKGU6YW55KT0+IFN0cmluZyhlLmRhdGUpLnN0YXJ0c1dpdGgoeSkpO1xuICAgIGNvbnN0IHRvdGFsID0geWVhckV4cGVuc2VzLnJlZHVjZSgoczpudW1iZXIsZTphbnkpPT5zK2UuYW1vdW50LDApO1xuICAgIGNvbnN0IGJ5Q2F0OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge307XG4gICAgY29uc3QgYnlNb250aDogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHt9O1xuICAgIGZvciAoY29uc3QgZSBvZiB5ZWFyRXhwZW5zZXMpIHtcbiAgICAgIGNvbnN0IGNhdCA9IGUuY2F0ZWdvcnkgfHwgXCJPdGhlclwiO1xuICAgICAgYnlDYXRbY2F0XSA9IChieUNhdFtjYXRdIHx8IDApICsgZS5hbW91bnQ7XG4gICAgICBjb25zdCBtayA9IFN0cmluZyhlLmRhdGUpLnNsaWNlKDAsNyk7XG4gICAgICBieU1vbnRoW21rXSA9IChieU1vbnRoW21rXSB8fCAwKSArIGUuYW1vdW50O1xuICAgIH1cbiAgICBjb25zdCB0b3AgPSBPYmplY3QuZW50cmllcyhieUNhdCkuc29ydCgoYSxiKT0+YlsxXS1hWzFdKVswXTtcbiAgICBjb25zdCBhdmdNb250aGx5ID0gdG90YWwgLyBNYXRoLm1heChPYmplY3Qua2V5cyhieU1vbnRoKS5sZW5ndGgsIDEpO1xuXG4gICAgY29uc3QgbXNnczogc3RyaW5nW10gPSBbXTtcbiAgICBtc2dzLnB1c2goYPCfk4ogWWVhcmx5IFN1bW1hcnkgZm9yICR7eX06XFxuVG90YWwgU3BlbnQ6ICQke3RvdGFsLnRvRml4ZWQoMil9XFxuVHJhbnNhY3Rpb25zOiAke3llYXJFeHBlbnNlcy5sZW5ndGh9XFxuQXZlcmFnZSBNb250aGx5OiAkJHthdmdNb250aGx5LnRvRml4ZWQoMil9YCk7XG4gICAgaWYgKHRvcCkgbXNncy5wdXNoKGDwn5KwIE1vc3Qgc3BlbnQgb246ICR7dG9wWzBdfSAoJCR7dG9wWzFdLnRvRml4ZWQoMil9IC0gJHt0b3RhbCA/ICgodG9wWzFdIC8gdG90YWwpICogMTAwKS50b0ZpeGVkKDEpIDogXCIwLjBcIn0lKWApO1xuICAgIGNvbnN0IGJyZWFrZG93biA9IE9iamVjdC5lbnRyaWVzKGJ5Q2F0KS5zb3J0KChhLGIpPT5iWzFdLWFbMV0pLm1hcCgoW2MsYV0pPT5g4oCiICR7Y306ICQke2EudG9GaXhlZCgyKX1gKS5qb2luKFwiXFxuXCIpO1xuICAgIGlmIChicmVha2Rvd24pIG1zZ3MucHVzaChgXFxuQnJlYWtkb3duIGJ5IENhdGVnb3J5OlxcbiR7YnJlYWtkb3dufWApO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2VzOiBtc2dzIH0pO1xuICB9XG5cbiAgLyogLS0tLS0tLS0tLSBGQUxMQkFDSyBIRUxQIC0tLS0tLS0tLS0gKi9cbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICBtZXNzYWdlczogW1xuICAgICAgXCJUcnk6XCIsXG4gICAgICBcIuKAoiBBZGQ6ICdBZGQgMjAgZG9sbGFycyBmb3IgcGF0aCcgKCsgb3B0aW9uYWwgeyBkYXRlOiAnWVlZWS1NTS1ERCcsIG1vbnRoOiAnWVlZWS1NTScgfSlcIixcbiAgICAgIFwi4oCiIERlbGV0ZTogJ2RlbGV0ZSAxMDAgZm9yIGNvZmZlZSdcIixcbiAgICAgIFwi4oCiIEdvYWw6ICdTZXQgbW9udGhseSBnb2FsIDMwMCBmb3IgZm9vZCdcIixcbiAgICAgIFwi4oCiIFdhdGNoOiAnV2F0Y2ggZm9vZCA1MDAgd2Vla2x5L21vbnRobHkveWVhcmx5J1wiLFxuICAgICAgXCLigKIgQ2hhcnQ6ICdjaGFydCA3ZCcsICdjaGFydCBsYXN0IHdlZWsnLCAnY2hhcnQgTWF5IDIwMjUnLCAnY2hhcnQgbGFzdCBtb250aCBvbiBmb29kJ1wiLFxuICAgICAgXCLigKIgSW5zaWdodHM6ICdpbnNpZ2h0cycgKHVzZXMgc2VsZWN0ZWQgbW9udGggYnkgZGVmYXVsdClcIixcbiAgICAgIFwi4oCiIE1vc3Qgc3BlbnQ6ICdNb3N0IHNwZW50IG9uIHRoaXMgd2Vlaz8nIC8gJ01vc3Qgc3BlbnQgb24gTWF5IDIwMjUnXCIsXG4gICAgICBcIuKAoiBTdW1tYXJ5OiAnbW9udGhseSBzdW1tYXJ5JywgJ3llYXJseSBzdW1tYXJ5J1wiLFxuICAgIF1cbiAgfSk7XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0Q3VycmVudFVzZXIiLCJkYiIsIk1TX0RBWSIsInRvSVNPIiwiZCIsIkRhdGUiLCJVVEMiLCJnZXRVVENGdWxsWWVhciIsImdldFVUQ01vbnRoIiwiZ2V0VVRDRGF0ZSIsInRvSVNPU3RyaW5nIiwic2xpY2UiLCJ0b2RheUluVFoiLCJ0eiIsIm5vdyIsImZtdCIsIkludGwiLCJEYXRlVGltZUZvcm1hdCIsInRpbWVab25lIiwieWVhciIsIm1vbnRoIiwiZGF5IiwicGFydHMiLCJmb3JtYXRUb1BhcnRzIiwieSIsImZpbmQiLCJwIiwidHlwZSIsInZhbHVlIiwiU3RyaW5nIiwibSIsInBhZFN0YXJ0Iiwic3RhcnRPZk1vbnRoVVRDIiwibTAiLCJlbmRPZk1vbnRoVVRDIiwic3RhcnRPZldlZWtNb25VVEMiLCJpc28iLCJnZXRVVENEYXkiLCJkaWZmIiwic2V0VVRDRGF0ZSIsImVuZE9mV2Vla01vblVUQyIsInMiLCJhZGREYXlzSVNPIiwiZGVsdGEiLCJhZGRNb250aHNJU08iLCJzZXRVVENNb250aCIsIk1PTlRIUyIsIk1PTlRIX0FCQlJFViIsIm1vbnRoTmFtZVRvSW5kZXgiLCJsb3dlciIsInRvTG93ZXJDYXNlIiwidW5kZWZpbmVkIiwiaSIsImluZGV4T2YiLCJwYXJzZUV4cGxpY2l0TW9udGhSYW5nZSIsInEiLCJtYXRjaCIsIm1pIiwicGFyc2VJbnQiLCJjb25zb2xlIiwibG9nIiwic3RhcnQiLCJlbmQiLCJ3b3JkcyIsInNwbGl0Iiwid29yZCIsIndvcmRJbmRleCIsImFmdGVyV29yZCIsImxlbmd0aCIsInRyaW0iLCJ0ZXN0IiwiZ2V0RnVsbFllYXIiLCJwYXJzZU5hbWVkIiwicGFyc2VSb2xsaW5nIiwiY29tcGFjdCIsIm4iLCJ1bml0IiwibG9uZyIsInJlc29sdmVSYW5nZSIsInF1ZXJ5Iiwic2VsZWN0ZWRNb250aCIsImV4cGxpY2l0IiwibmFtZWQiLCJ0b2RheSIsInByZXZFbmQiLCJ5eSIsIm1tMCIsInlyIiwicm9sbGluZyIsImUiLCJpblJhbmdlIiwiciIsImZpbHRlckJ5UmFuZ2UiLCJhbGwiLCJmaWx0ZXIiLCJkYXRlIiwiZGFpbHlTZXJpZXMiLCJleHBlbnNlcyIsImRheXMiLCJNYXRoIiwibWF4Iiwicm91bmQiLCJtYXAiLCJNYXAiLCJzZXQiLCJrIiwiaGFzIiwiZ2V0IiwiYW1vdW50IiwiQXJyYXkiLCJmcm9tIiwiZW50cmllcyIsIndlZWtkYXlCcmVha2Rvd24iLCJ0b3RhbHMiLCJ3ZCIsImxhYmVscyIsIndlZWtkYXkiLCJ0b3BDYXRzIiwiYnlDYXQiLCJ0b3RhbCIsImtleSIsImNhdGVnb3J5Iiwic29ydGVkIiwiT2JqZWN0Iiwic29ydCIsImEiLCJiIiwidG9wIiwiaW5mZXJDYXRlZ29yeSIsImRlc2MiLCJleHRyYWN0QW1vdW50IiwibnVtTWF0Y2giLCJtdWx0aXBsaWVyIiwicGFyc2VXb3JkTnVtYmVyIiwicGFyc2VGbG9hdCIsIm9uZSIsInR3byIsInRocmVlIiwiZm91ciIsImZpdmUiLCJzaXgiLCJzZXZlbiIsImVpZ2h0IiwibmluZSIsInRlbiIsImVsZXZlbiIsInR3ZWx2ZSIsInRoaXJ0ZWVuIiwiZm91cnRlZW4iLCJmaWZ0ZWVuIiwic2l4dGVlbiIsInNldmVudGVlbiIsImVpZ2h0ZWVuIiwibmluZXRlZW4iLCJ0d2VudHkiLCJ0aGlydHkiLCJmb3J0eSIsImZpZnR5Iiwic2l4dHkiLCJzZXZlbnR5IiwiZWlnaHR5IiwibmluZXR5IiwiY2hvb3NlRXhwZW5zZURhdGUiLCJib2R5RGF0ZSIsInBhcnNlV2F0Y2hEYXRlUmFuZ2UiLCJyZXNvbHZlWWVhckZvck1vbnRoIiwiZDEiLCJjbGFtcERheSIsImQyIiwibWluIiwibWkxIiwibWkyIiwieWVhcjEiLCJ5ZWFyMiIsIm0xIiwibTIiLCJtb250aEluZGV4MCIsImxhc3QiLCJpc0NoYXJ0SW50ZW50IiwiaXNNb250aGx5SW50ZW50IiwiaXNZZWFybHlJbnRlbnQiLCJpc01vc3RTcGVudEludGVudCIsImlzSW5zaWdodHNJbnRlbnQiLCJpc0FkZEludGVudCIsImlzRGVsZXRlSW50ZW50IiwiaXNHb2FsSW50ZW50IiwiaXNXYXRjaEludGVudCIsIlBPU1QiLCJyZXEiLCJ1c2VyIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiYm9keSIsImNhdGNoIiwiZXhwbGljaXREYXRlIiwiYWxsRXhwZW5zZXMiLCJsaXN0RXhwZW5zZXMiLCJpZCIsInJhbmdlIiwiY2F0TWF0Y2giLCJjYXQiLCJ3aXRoaW4iLCJmaWx0ZXJlZCIsImRlc2NyaXB0aW9uIiwiaW5jbHVkZXMiLCJzZXJpZXMiLCJyZWR1Y2UiLCJhdmciLCJwZWFrIiwiY2hhcnQiLCJzdW1tYXJ5IiwibWVzc2FnZXMiLCJkYXRlVG9Vc2UiLCJzbGFzaERhdGVNYXRjaCIsInAxIiwicDIiLCJ0b1N0cmluZyIsIm1vbnRoRGF5WWVhck1hdGNoIiwibW9udGhOYW1lIiwibW9udGhJbmRleCIsImNsYW1wZWREYXkiLCJtb250aFllYXJNYXRjaCIsImZvck1hdGNoIiwicmVwbGFjZSIsImNyZWF0ZUV4cGVuc2UiLCJ1c2VySWQiLCJ0b0ZpeGVkIiwiZWZmZWN0cyIsImFsbFdhdGNoZXMiLCJsaXN0U3BlbmRpbmdXYXRjaGVzIiwibWF0Y2hpbmdXYXRjaCIsInciLCJkZWxldGVTcGVuZGluZ1dhdGNoIiwicGVyaW9kTGFiZWwiLCJwZXJpb2QiLCJyYW5nZVN0YXJ0IiwicmFuZ2VFbmQiLCJ0aHJlc2hvbGQiLCJhdmFpbGFibGUiLCJqb2luIiwidGFyZ2V0RGF0ZSIsInRhcmdldE1vbnRoIiwiZnVsbERhdGVNYXRjaCIsIm1vbnRoT25seU1hdGNoIiwiYWZ0ZXIiLCJtb250aElTTyIsIm1vbnRoRXhwZW5zZXMiLCJjYW5kaWRhdGVzIiwiZGF0ZUZpbHRlcmVkIiwibGlzdCIsImtleXMiLCJjaG9zZW4iLCJiZXR0ZXIiLCJzb21lIiwiZGVsZXRlRXhwZW5zZSIsIm1vbnRoVmFsdWUiLCJsYWJlbCIsImdvYWwiLCJjcmVhdGVHb2FsIiwibGltaXQiLCJkYXRlUmFuZ2UiLCJjYXRCZWZvcmVBbW91bnQiLCJjYXRBZnRlckZvciIsImNsZWFuZWQiLCJ3YXRjaCIsImNyZWF0ZVNwZW5kaW5nV2F0Y2giLCJjcmVhdGVkQXQiLCJ3aGVuIiwiYXZnUGVyRGF5IiwicHJvamVjdGVkIiwidG9wMyIsImMiLCJmb3JFYWNoIiwidGlwcyIsInB1c2giLCJtc2dzIiwiZXhwbGljaXRSYW5nZSIsInllYXJFeHBlbnNlcyIsInN0YXJ0c1dpdGgiLCJieU1vbnRoIiwibWsiLCJhdmdNb250aGx5IiwiYnJlYWtkb3duIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/suggestions/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SESSION_COOKIE: () => (/* binding */ SESSION_COOKIE),\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   signUser: () => (/* binding */ signUser),\n/* harmony export */   verifyPassword: () => (/* binding */ verifyPassword)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./db */ \"(rsc)/./src/lib/db.ts\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nconst JWT_SECRET = process.env.JWT_SECRET || \"dev-secret-change-me\";\nconst SESSION_COOKIE = \"hallowallet_token\";\nasync function hashPassword(pw) {\n    const salt = await bcryptjs__WEBPACK_IMPORTED_MODULE_3___default().genSalt(10);\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_3___default().hash(pw, salt);\n}\nasync function verifyPassword(pw, hash) {\n    return bcryptjs__WEBPACK_IMPORTED_MODULE_3___default().compare(pw, hash);\n}\nfunction signUser(user) {\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign({\n        sub: user.id\n    }, JWT_SECRET, {\n        expiresIn: \"7d\"\n    });\n}\n// Read-only: used in server components/layouts/route handlers\nfunction getCurrentUser() {\n    const token = (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)().get(SESSION_COOKIE)?.value;\n    if (!token) return null;\n    try {\n        const payload = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET);\n        return _db__WEBPACK_IMPORTED_MODULE_2__.db.getUserById(payload.sub) || null;\n    } catch  {\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0I7QUFDUTtBQUNiO0FBRUk7QUFFOUIsTUFBTUksYUFBYUMsUUFBUUMsR0FBRyxDQUFDRixVQUFVLElBQUk7QUFDdEMsTUFBTUcsaUJBQWlCLG9CQUFvQjtBQUUzQyxlQUFlQyxhQUFhQyxFQUFVO0lBQzNDLE1BQU1DLE9BQU8sTUFBTVAsdURBQWMsQ0FBQztJQUNsQyxPQUFPQSxvREFBVyxDQUFDTSxJQUFJQztBQUN6QjtBQUVPLGVBQWVHLGVBQWVKLEVBQVUsRUFBRUcsSUFBWTtJQUMzRCxPQUFPVCx1REFBYyxDQUFDTSxJQUFJRztBQUM1QjtBQUVPLFNBQVNHLFNBQVNDLElBQVU7SUFDakMsT0FBT2hCLHdEQUFRLENBQUM7UUFBRWtCLEtBQUtGLEtBQUtHLEVBQUU7SUFBQyxHQUFHZixZQUFZO1FBQUVnQixXQUFXO0lBQUs7QUFDbEU7QUFFQSw4REFBOEQ7QUFDdkQsU0FBU0M7SUFDZCxNQUFNQyxRQUFRckIscURBQU9BLEdBQUdzQixHQUFHLENBQUNoQixpQkFBaUJpQjtJQUM3QyxJQUFJLENBQUNGLE9BQU8sT0FBTztJQUNuQixJQUFJO1FBQ0YsTUFBTUcsVUFBVXpCLDBEQUFVLENBQUNzQixPQUFPbEI7UUFDbEMsT0FBT0YsbUNBQUVBLENBQUN5QixXQUFXLENBQUNGLFFBQVFQLEdBQUcsS0FBSztJQUN4QyxFQUFFLE9BQU07UUFDTixPQUFPO0lBQ1Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2hhbGxvd2FsbGV0Ly4vc3JjL2xpYi9hdXRoLnRzPzY2OTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5pbXBvcnQgeyBjb29raWVzIH0gZnJvbSBcIm5leHQvaGVhZGVyc1wiO1xuaW1wb3J0IHsgZGIgfSBmcm9tIFwiLi9kYlwiO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuL3R5cGVzXCI7XG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRqc1wiO1xuXG5jb25zdCBKV1RfU0VDUkVUID0gcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCBcImRldi1zZWNyZXQtY2hhbmdlLW1lXCI7XG5leHBvcnQgY29uc3QgU0VTU0lPTl9DT09LSUUgPSBcImhhbGxvd2FsbGV0X3Rva2VuXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNoUGFzc3dvcmQocHc6IHN0cmluZykge1xuICBjb25zdCBzYWx0ID0gYXdhaXQgYmNyeXB0LmdlblNhbHQoMTApO1xuICByZXR1cm4gYmNyeXB0Lmhhc2gocHcsIHNhbHQpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdmVyaWZ5UGFzc3dvcmQocHc6IHN0cmluZywgaGFzaDogc3RyaW5nKSB7XG4gIHJldHVybiBiY3J5cHQuY29tcGFyZShwdywgaGFzaCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaWduVXNlcih1c2VyOiBVc2VyKSB7XG4gIHJldHVybiBqd3Quc2lnbih7IHN1YjogdXNlci5pZCB9LCBKV1RfU0VDUkVULCB7IGV4cGlyZXNJbjogXCI3ZFwiIH0pO1xufVxuXG4vLyBSZWFkLW9ubHk6IHVzZWQgaW4gc2VydmVyIGNvbXBvbmVudHMvbGF5b3V0cy9yb3V0ZSBoYW5kbGVyc1xuZXhwb3J0IGZ1bmN0aW9uIGdldEN1cnJlbnRVc2VyKCk6IFVzZXIgfCBudWxsIHtcbiAgY29uc3QgdG9rZW4gPSBjb29raWVzKCkuZ2V0KFNFU1NJT05fQ09PS0lFKT8udmFsdWU7XG4gIGlmICghdG9rZW4pIHJldHVybiBudWxsO1xuICB0cnkge1xuICAgIGNvbnN0IHBheWxvYWQgPSBqd3QudmVyaWZ5KHRva2VuLCBKV1RfU0VDUkVUKSBhcyB7IHN1Yjogc3RyaW5nIH07XG4gICAgcmV0dXJuIGRiLmdldFVzZXJCeUlkKHBheWxvYWQuc3ViKSB8fCBudWxsO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImp3dCIsImNvb2tpZXMiLCJkYiIsImJjcnlwdCIsIkpXVF9TRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwiU0VTU0lPTl9DT09LSUUiLCJoYXNoUGFzc3dvcmQiLCJwdyIsInNhbHQiLCJnZW5TYWx0IiwiaGFzaCIsInZlcmlmeVBhc3N3b3JkIiwiY29tcGFyZSIsInNpZ25Vc2VyIiwidXNlciIsInNpZ24iLCJzdWIiLCJpZCIsImV4cGlyZXNJbiIsImdldEN1cnJlbnRVc2VyIiwidG9rZW4iLCJnZXQiLCJ2YWx1ZSIsInBheWxvYWQiLCJ2ZXJpZnkiLCJnZXRVc2VyQnlJZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nconst DB_FILE = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), \".data\", \"db.json\");\n// Load data from file if it exists\nfunction loadData() {\n    try {\n        if (fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(DB_FILE)) {\n            const data = JSON.parse(fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(DB_FILE, \"utf-8\"));\n            console.log(\"[DB] Loaded from file:\", data.users.length, \"users\");\n            return data;\n        }\n    } catch (err) {\n        console.error(\"[DB] Error loading data:\", err);\n    }\n    return {\n        users: [],\n        expenses: [],\n        goals: [],\n        spendingWatches: []\n    };\n}\n// Save data to file\nfunction saveData() {\n    try {\n        const dir = path__WEBPACK_IMPORTED_MODULE_2___default().dirname(DB_FILE);\n        if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(dir)) {\n            fs__WEBPACK_IMPORTED_MODULE_1___default().mkdirSync(dir, {\n                recursive: true\n            });\n        }\n        fs__WEBPACK_IMPORTED_MODULE_1___default().writeFileSync(DB_FILE, JSON.stringify({\n            users,\n            expenses,\n            goals,\n            spendingWatches\n        }, null, 2));\n    } catch (err) {\n        console.error(\"[DB] Error saving data:\", err);\n    }\n}\nconst initialData = loadData();\nconst users = initialData.users;\nconst expenses = initialData.expenses;\nconst goals = initialData.goals;\nconst spendingWatches = initialData.spendingWatches || [];\nconst db = {\n    createUser (data) {\n        const user = {\n            id: (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)(),\n            ...data\n        };\n        users.push(user);\n        console.log(\"[DB] User created:\", user.email, \"Total users:\", users.length);\n        saveData();\n        return user;\n    },\n    findUserByEmail (email) {\n        const found = users.find((u)=>u.email === email) || null;\n        console.log(\"[DB] Finding user by email:\", email, \"Found:\", !!found, \"Total users:\", users.length);\n        return found;\n    },\n    getUserById (id) {\n        return users.find((u)=>u.id === id) || null;\n    },\n    updateUserPassword (userId, newHashedPassword) {\n        const user = users.find((u)=>u.id === userId);\n        if (!user) return false;\n        user.passwordHash = newHashedPassword;\n        console.log(\"[DB] Password updated for user:\", user.email);\n        saveData();\n        return true;\n    },\n    createExpense (data) {\n        const e = {\n            id: (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)(),\n            ...data\n        };\n        expenses.push(e);\n        saveData();\n        return e;\n    },\n    updateExpense (id, userId, patch) {\n        const idx = expenses.findIndex((e)=>e.id === id && e.userId === userId);\n        if (idx === -1) return null;\n        expenses[idx] = {\n            ...expenses[idx],\n            ...patch\n        };\n        saveData();\n        return expenses[idx];\n    },\n    deleteExpense (id, userId) {\n        const idx = expenses.findIndex((e)=>e.id === id && e.userId === userId);\n        if (idx === -1) return false;\n        expenses.splice(idx, 1);\n        saveData();\n        return true;\n    },\n    listExpenses (userId, filters) {\n        return expenses.filter((e)=>{\n            if (e.userId !== userId) return false;\n            if (filters?.month && !e.date.startsWith(filters.month)) return false;\n            if (filters?.category && filters.category !== \"All\" && e.category !== filters.category) return false;\n            return true;\n        });\n    },\n    createGoal (data) {\n        const g = {\n            id: (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)(),\n            ...data\n        };\n        goals.push(g);\n        saveData();\n        return g;\n    },\n    listGoals (userId, month) {\n        return goals.filter((g)=>{\n            if (g.userId !== userId) return false;\n            if (!month) return true;\n            // For yearly goals, show them in all months of the same year\n            if (g.period === \"yearly\") {\n                const goalYear = g.month.slice(0, 4);\n                const filterYear = month.slice(0, 4);\n                return goalYear === filterYear;\n            }\n            // For weekly goals, show them in the month they were created\n            if (g.period === \"weekly\") {\n                const goalMonth = g.month.slice(0, 7);\n                return goalMonth === month;\n            }\n            // For monthly goals, exact month match\n            return g.month === month;\n        });\n    },\n    deleteGoal (id, userId) {\n        const idx = goals.findIndex((g)=>g.id === id && g.userId === userId);\n        if (idx === -1) return false;\n        goals.splice(idx, 1);\n        saveData();\n        return true;\n    },\n    createSpendingWatch (data) {\n        const watch = {\n            id: (0,crypto__WEBPACK_IMPORTED_MODULE_0__.randomUUID)(),\n            ...data\n        };\n        spendingWatches.push(watch);\n        console.log(\"[DB] Spending watch created:\", watch, \"Total watches:\", spendingWatches.length);\n        saveData();\n        return watch;\n    },\n    listSpendingWatches (userId) {\n        return spendingWatches.filter((w)=>w.userId === userId);\n    },\n    deleteSpendingWatch (id, userId) {\n        const idx = spendingWatches.findIndex((w)=>w.id === id && w.userId === userId);\n        if (idx === -1) return false;\n        spendingWatches.splice(idx, 1);\n        saveData();\n        return true;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bEQ7SUFDQStCLHFCQUFvQnhDLEVBQVUsRUFBRVMsTUFBYztRQUM1QyxNQUFNTyxNQUFNNUIsZ0JBQWdCNkIsU0FBUyxDQUFDc0IsQ0FBQUEsSUFBS0EsRUFBRXZDLEVBQUUsS0FBS0EsTUFBTXVDLEVBQUU5QixNQUFNLEtBQUtBO1FBQ3ZFLElBQUlPLFFBQVEsQ0FBQyxHQUFHLE9BQU87UUFDdkI1QixnQkFBZ0IrQixNQUFNLENBQUNILEtBQUs7UUFDNUIzQjtRQUNBLE9BQU87SUFDVDtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYWxsb3dhbGxldC8uL3NyYy9saWIvZGIudHM/OWU0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFeHBlbnNlLCBHb2FsLCBVc2VyIH0gZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCB7IHJhbmRvbVVVSUQgfSBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuXG5jb25zdCBEQl9GSUxFID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksIFwiLmRhdGFcIiwgXCJkYi5qc29uXCIpO1xuXG4vLyBMb2FkIGRhdGEgZnJvbSBmaWxlIGlmIGl0IGV4aXN0c1xuZnVuY3Rpb24gbG9hZERhdGEoKSB7XG4gIHRyeSB7XG4gICAgaWYgKGZzLmV4aXN0c1N5bmMoREJfRklMRSkpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhEQl9GSUxFLCBcInV0Zi04XCIpKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiW0RCXSBMb2FkZWQgZnJvbSBmaWxlOlwiLCBkYXRhLnVzZXJzLmxlbmd0aCwgXCJ1c2Vyc1wiKTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIltEQl0gRXJyb3IgbG9hZGluZyBkYXRhOlwiLCBlcnIpO1xuICB9XG4gIHJldHVybiB7IHVzZXJzOiBbXSwgZXhwZW5zZXM6IFtdLCBnb2FsczogW10sIHNwZW5kaW5nV2F0Y2hlczogW10gfTtcbn1cblxuLy8gU2F2ZSBkYXRhIHRvIGZpbGVcbmZ1bmN0aW9uIHNhdmVEYXRhKCkge1xuICB0cnkge1xuICAgIGNvbnN0IGRpciA9IHBhdGguZGlybmFtZShEQl9GSUxFKTtcbiAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZGlyKSkge1xuICAgICAgZnMubWtkaXJTeW5jKGRpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgfVxuICAgIGZzLndyaXRlRmlsZVN5bmMoREJfRklMRSwgSlNPTi5zdHJpbmdpZnkoeyB1c2VycywgZXhwZW5zZXMsIGdvYWxzLCBzcGVuZGluZ1dhdGNoZXMgfSwgbnVsbCwgMikpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiW0RCXSBFcnJvciBzYXZpbmcgZGF0YTpcIiwgZXJyKTtcbiAgfVxufVxuXG50eXBlIFNwZW5kaW5nV2F0Y2ggPSB7XG4gIGlkOiBzdHJpbmc7XG4gIHVzZXJJZDogc3RyaW5nO1xuICBjYXRlZ29yeTogc3RyaW5nO1xuICB0aHJlc2hvbGQ6IG51bWJlcjtcbiAgcGVyaW9kOiBcIndlZWtseVwiIHwgXCJtb250aGx5XCIgfCBcInllYXJseVwiIHwgXCJjdXN0b21cIjtcbiAgbW9udGg6IHN0cmluZztcbiAgcmFuZ2VTdGFydD86IHN0cmluZztcbiAgcmFuZ2VFbmQ/OiBzdHJpbmc7XG4gIGNyZWF0ZWRBdDogc3RyaW5nO1xufTtcblxuY29uc3QgaW5pdGlhbERhdGEgPSBsb2FkRGF0YSgpO1xuY29uc3QgdXNlcnM6IFVzZXJbXSA9IGluaXRpYWxEYXRhLnVzZXJzO1xuY29uc3QgZXhwZW5zZXM6IEV4cGVuc2VbXSA9IGluaXRpYWxEYXRhLmV4cGVuc2VzO1xuY29uc3QgZ29hbHM6IEdvYWxbXSA9IGluaXRpYWxEYXRhLmdvYWxzO1xuY29uc3Qgc3BlbmRpbmdXYXRjaGVzOiBTcGVuZGluZ1dhdGNoW10gPSBpbml0aWFsRGF0YS5zcGVuZGluZ1dhdGNoZXMgfHwgW107XG5cbmV4cG9ydCBjb25zdCBkYiA9IHtcbiAgY3JlYXRlVXNlcihkYXRhOiBPbWl0PFVzZXIsIFwiaWRcIj4pOiBVc2VyIHtcbiAgICBjb25zdCB1c2VyOiBVc2VyID0geyBpZDogcmFuZG9tVVVJRCgpLCAuLi5kYXRhIH07XG4gICAgdXNlcnMucHVzaCh1c2VyKTtcbiAgICBjb25zb2xlLmxvZyhcIltEQl0gVXNlciBjcmVhdGVkOlwiLCB1c2VyLmVtYWlsLCBcIlRvdGFsIHVzZXJzOlwiLCB1c2Vycy5sZW5ndGgpO1xuICAgIHNhdmVEYXRhKCk7XG4gICAgcmV0dXJuIHVzZXI7XG4gIH0sXG4gIGZpbmRVc2VyQnlFbWFpbChlbWFpbDogc3RyaW5nKSB7XG4gICAgY29uc3QgZm91bmQgPSB1c2Vycy5maW5kKHUgPT4gdS5lbWFpbCA9PT0gZW1haWwpIHx8IG51bGw7XG4gICAgY29uc29sZS5sb2coXCJbREJdIEZpbmRpbmcgdXNlciBieSBlbWFpbDpcIiwgZW1haWwsIFwiRm91bmQ6XCIsICEhZm91bmQsIFwiVG90YWwgdXNlcnM6XCIsIHVzZXJzLmxlbmd0aCk7XG4gICAgcmV0dXJuIGZvdW5kO1xuICB9LFxuICBnZXRVc2VyQnlJZChpZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHVzZXJzLmZpbmQodSA9PiB1LmlkID09PSBpZCkgfHwgbnVsbDtcbiAgfSxcbiAgdXBkYXRlVXNlclBhc3N3b3JkKHVzZXJJZDogc3RyaW5nLCBuZXdIYXNoZWRQYXNzd29yZDogc3RyaW5nKSB7XG4gICAgY29uc3QgdXNlciA9IHVzZXJzLmZpbmQodSA9PiB1LmlkID09PSB1c2VySWQpO1xuICAgIGlmICghdXNlcikgcmV0dXJuIGZhbHNlO1xuICAgIHVzZXIucGFzc3dvcmRIYXNoID0gbmV3SGFzaGVkUGFzc3dvcmQ7XG4gICAgY29uc29sZS5sb2coXCJbREJdIFBhc3N3b3JkIHVwZGF0ZWQgZm9yIHVzZXI6XCIsIHVzZXIuZW1haWwpO1xuICAgIHNhdmVEYXRhKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG4gIGNyZWF0ZUV4cGVuc2UoZGF0YTogT21pdDxFeHBlbnNlLCBcImlkXCI+KTogRXhwZW5zZSB7XG4gICAgY29uc3QgZTogRXhwZW5zZSA9IHsgaWQ6IHJhbmRvbVVVSUQoKSwgLi4uZGF0YSB9O1xuICAgIGV4cGVuc2VzLnB1c2goZSk7XG4gICAgc2F2ZURhdGEoKTtcbiAgICByZXR1cm4gZTtcbiAgfSxcbiAgdXBkYXRlRXhwZW5zZShpZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZywgcGF0Y2g6IFBhcnRpYWw8RXhwZW5zZT4pIHtcbiAgICBjb25zdCBpZHggPSBleHBlbnNlcy5maW5kSW5kZXgoZSA9PiBlLmlkID09PSBpZCAmJiBlLnVzZXJJZCA9PT0gdXNlcklkKTtcbiAgICBpZiAoaWR4ID09PSAtMSkgcmV0dXJuIG51bGw7XG4gICAgZXhwZW5zZXNbaWR4XSA9IHsgLi4uZXhwZW5zZXNbaWR4XSwgLi4ucGF0Y2ggfTtcbiAgICBzYXZlRGF0YSgpO1xuICAgIHJldHVybiBleHBlbnNlc1tpZHhdO1xuICB9LFxuICBkZWxldGVFeHBlbnNlKGlkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKSB7XG4gICAgY29uc3QgaWR4ID0gZXhwZW5zZXMuZmluZEluZGV4KGUgPT4gZS5pZCA9PT0gaWQgJiYgZS51c2VySWQgPT09IHVzZXJJZCk7XG4gICAgaWYgKGlkeCA9PT0gLTEpIHJldHVybiBmYWxzZTtcbiAgICBleHBlbnNlcy5zcGxpY2UoaWR4LCAxKTtcbiAgICBzYXZlRGF0YSgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuICBsaXN0RXhwZW5zZXModXNlcklkOiBzdHJpbmcsIGZpbHRlcnM/OiB7IG1vbnRoPzogc3RyaW5nOyBjYXRlZ29yeT86IHN0cmluZyB9KSB7XG4gICAgcmV0dXJuIGV4cGVuc2VzLmZpbHRlcihlID0+IHtcbiAgICAgIGlmIChlLnVzZXJJZCAhPT0gdXNlcklkKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoZmlsdGVycz8ubW9udGggJiYgIWUuZGF0ZS5zdGFydHNXaXRoKGZpbHRlcnMubW9udGgpKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoZmlsdGVycz8uY2F0ZWdvcnkgJiYgZmlsdGVycy5jYXRlZ29yeSAhPT0gXCJBbGxcIiAmJiBlLmNhdGVnb3J5ICE9PSBmaWx0ZXJzLmNhdGVnb3J5KSByZXR1cm4gZmFsc2U7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgfSxcbiAgY3JlYXRlR29hbChkYXRhOiBPbWl0PEdvYWwsIFwiaWRcIj4pOiBHb2FsIHtcbiAgICBjb25zdCBnOiBHb2FsID0geyBpZDogcmFuZG9tVVVJRCgpLCAuLi5kYXRhIH07XG4gICAgZ29hbHMucHVzaChnKTtcbiAgICBzYXZlRGF0YSgpO1xuICAgIHJldHVybiBnO1xuICB9LFxuICBsaXN0R29hbHModXNlcklkOiBzdHJpbmcsIG1vbnRoPzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIGdvYWxzLmZpbHRlcihnID0+IHtcbiAgICAgIGlmIChnLnVzZXJJZCAhPT0gdXNlcklkKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoIW1vbnRoKSByZXR1cm4gdHJ1ZTtcbiAgICAgIFxuICAgICAgLy8gRm9yIHllYXJseSBnb2Fscywgc2hvdyB0aGVtIGluIGFsbCBtb250aHMgb2YgdGhlIHNhbWUgeWVhclxuICAgICAgaWYgKGcucGVyaW9kID09PSBcInllYXJseVwiKSB7XG4gICAgICAgIGNvbnN0IGdvYWxZZWFyID0gZy5tb250aC5zbGljZSgwLCA0KTtcbiAgICAgICAgY29uc3QgZmlsdGVyWWVhciA9IG1vbnRoLnNsaWNlKDAsIDQpO1xuICAgICAgICByZXR1cm4gZ29hbFllYXIgPT09IGZpbHRlclllYXI7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEZvciB3ZWVrbHkgZ29hbHMsIHNob3cgdGhlbSBpbiB0aGUgbW9udGggdGhleSB3ZXJlIGNyZWF0ZWRcbiAgICAgIGlmIChnLnBlcmlvZCA9PT0gXCJ3ZWVrbHlcIikge1xuICAgICAgICBjb25zdCBnb2FsTW9udGggPSBnLm1vbnRoLnNsaWNlKDAsIDcpO1xuICAgICAgICByZXR1cm4gZ29hbE1vbnRoID09PSBtb250aDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRm9yIG1vbnRobHkgZ29hbHMsIGV4YWN0IG1vbnRoIG1hdGNoXG4gICAgICByZXR1cm4gZy5tb250aCA9PT0gbW9udGg7XG4gICAgfSk7XG4gIH0sXG4gIGRlbGV0ZUdvYWwoaWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpIHtcbiAgICBjb25zdCBpZHggPSBnb2Fscy5maW5kSW5kZXgoZyA9PiBnLmlkID09PSBpZCAmJiBnLnVzZXJJZCA9PT0gdXNlcklkKTtcbiAgICBpZiAoaWR4ID09PSAtMSkgcmV0dXJuIGZhbHNlO1xuICAgIGdvYWxzLnNwbGljZShpZHgsIDEpO1xuICAgIHNhdmVEYXRhKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG4gIGNyZWF0ZVNwZW5kaW5nV2F0Y2goZGF0YTogT21pdDxTcGVuZGluZ1dhdGNoLCBcImlkXCI+KTogU3BlbmRpbmdXYXRjaCB7XG4gICAgY29uc3Qgd2F0Y2g6IFNwZW5kaW5nV2F0Y2ggPSB7IGlkOiByYW5kb21VVUlEKCksIC4uLmRhdGEgfTtcbiAgICBzcGVuZGluZ1dhdGNoZXMucHVzaCh3YXRjaCk7XG4gICAgY29uc29sZS5sb2coXCJbREJdIFNwZW5kaW5nIHdhdGNoIGNyZWF0ZWQ6XCIsIHdhdGNoLCBcIlRvdGFsIHdhdGNoZXM6XCIsIHNwZW5kaW5nV2F0Y2hlcy5sZW5ndGgpO1xuICAgIHNhdmVEYXRhKCk7XG4gICAgcmV0dXJuIHdhdGNoO1xuICB9LFxuICBsaXN0U3BlbmRpbmdXYXRjaGVzKHVzZXJJZDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHNwZW5kaW5nV2F0Y2hlcy5maWx0ZXIodyA9PiB3LnVzZXJJZCA9PT0gdXNlcklkKTtcbiAgfSxcbiAgZGVsZXRlU3BlbmRpbmdXYXRjaChpZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZykge1xuICAgIGNvbnN0IGlkeCA9IHNwZW5kaW5nV2F0Y2hlcy5maW5kSW5kZXgodyA9PiB3LmlkID09PSBpZCAmJiB3LnVzZXJJZCA9PT0gdXNlcklkKTtcbiAgICBpZiAoaWR4ID09PSAtMSkgcmV0dXJuIGZhbHNlO1xuICAgIHNwZW5kaW5nV2F0Y2hlcy5zcGxpY2UoaWR4LCAxKTtcbiAgICBzYXZlRGF0YSgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuIl0sIm5hbWVzIjpbInJhbmRvbVVVSUQiLCJmcyIsInBhdGgiLCJEQl9GSUxFIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJsb2FkRGF0YSIsImV4aXN0c1N5bmMiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwicmVhZEZpbGVTeW5jIiwiY29uc29sZSIsImxvZyIsInVzZXJzIiwibGVuZ3RoIiwiZXJyIiwiZXJyb3IiLCJleHBlbnNlcyIsImdvYWxzIiwic3BlbmRpbmdXYXRjaGVzIiwic2F2ZURhdGEiLCJkaXIiLCJkaXJuYW1lIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwid3JpdGVGaWxlU3luYyIsInN0cmluZ2lmeSIsImluaXRpYWxEYXRhIiwiZGIiLCJjcmVhdGVVc2VyIiwidXNlciIsImlkIiwicHVzaCIsImVtYWlsIiwiZmluZFVzZXJCeUVtYWlsIiwiZm91bmQiLCJmaW5kIiwidSIsImdldFVzZXJCeUlkIiwidXBkYXRlVXNlclBhc3N3b3JkIiwidXNlcklkIiwibmV3SGFzaGVkUGFzc3dvcmQiLCJwYXNzd29yZEhhc2giLCJjcmVhdGVFeHBlbnNlIiwiZSIsInVwZGF0ZUV4cGVuc2UiLCJwYXRjaCIsImlkeCIsImZpbmRJbmRleCIsImRlbGV0ZUV4cGVuc2UiLCJzcGxpY2UiLCJsaXN0RXhwZW5zZXMiLCJmaWx0ZXJzIiwiZmlsdGVyIiwibW9udGgiLCJkYXRlIiwic3RhcnRzV2l0aCIsImNhdGVnb3J5IiwiY3JlYXRlR29hbCIsImciLCJsaXN0R29hbHMiLCJwZXJpb2QiLCJnb2FsWWVhciIsInNsaWNlIiwiZmlsdGVyWWVhciIsImdvYWxNb250aCIsImRlbGV0ZUdvYWwiLCJjcmVhdGVTcGVuZGluZ1dhdGNoIiwid2F0Y2giLCJsaXN0U3BlbmRpbmdXYXRjaGVzIiwidyIsImRlbGV0ZVNwZW5kaW5nV2F0Y2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/semver","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time","vendor-chunks/bcryptjs"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsuggestions%2Froute&page=%2Fapi%2Fsuggestions%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsuggestions%2Froute.ts&appDir=%2FUsers%2Fjk%2FDownloads%2Fhallowallet%203-main%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjk%2FDownloads%2Fhallowallet%203-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();